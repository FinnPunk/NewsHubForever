<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>NewsHub - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π —Å AI</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dock.css">
    <meta name="description" content="–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–π —Å AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π –¥–ª—è 100 –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –†–æ—Å—Å–∏–∏">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4A90E2">
</head>
<body>
    <div class="app" id="mainApp">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="site-title">NewsHub</h1>
                    <nav class="breadcrumb" id="breadcrumb">
                        <span class="breadcrumb-item active">–õ–µ–Ω—Ç–∞</span>
                        <span class="breadcrumb-item">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        <span class="breadcrumb-item">–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </nav>
                </div>
                <div class="header-actions">
                    <div class="app-version" id="appVersion">v2.7.5</div>
                    
                    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
                    <button class="btn btn--icon theme-toggle" id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                        <svg class="theme-icon theme-icon-light" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"/>
                        </svg>
                        <svg class="theme-icon theme-icon-dark" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                            <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"/>
                        </svg>
                    </button>
                    
                    <button class="btn btn--icon" id="settingsToggle" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                        </svg>
                    </button>
                    <button class="btn btn--icon" id="searchToggle" title="–ü–æ–∏—Å–∫">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                    <button class="btn btn--icon" id="githubLink" title="GitHub –ø—Ä–æ–µ–∫—Ç–∞" onclick="window.open('https://github.com/FinnPunk/NewsHubForever', '_blank')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Expandable Search -->
            <div class="search-bar hidden" id="searchBar">
                <div class="search-input-wrapper">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    <input type="text" id="searchInput" class="form-control" placeholder="–ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –∏ –Ω–æ–≤–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫)" autocomplete="off">
                    <button class="search-clear hidden" id="searchClear">√ó</button>
                </div>
                <div class="search-suggestions" id="searchSuggestions"></div>
            </div>
        </header>

        <!-- Settings Dropdown (–≤–Ω–µ header –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ z-index) -->
        <div class="settings-dropdown" id="settingsDropdown">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <div class="setting-item">
                <div class="setting-info">
                    <div class="setting-title">–ò—Å—Ç–æ—á–Ω–∏–∫–∏</div>
                    <div class="setting-desc">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RSS –∏ VK –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏</div>
                </div>
                <button class="btn btn--secondary btn--sm" id="manageSourcesBtn">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
            </div>
            <div class="setting-item">
                <div class="setting-info">
                    <div class="setting-title">OpenAI API</div>
                    <div class="setting-desc">–ö–ª—é—á –¥–ª—è AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏</div>
                </div>
                <button class="btn btn--secondary btn--sm" id="setupOpenAIBtn">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
            </div>
            <div class="setting-item">
                <div class="setting-info">
                    <div class="setting-title">–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</div>
                    <div class="setting-desc">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã</div>
                </div>
                <select class="setting-select" id="updateFrequency">
                    <option value="900000">15 –º–∏–Ω—É—Ç</option>
                    <option value="3600000" selected>1 —á–∞—Å</option>
                    <option value="7200000">2 —á–∞—Å–∞</option>
                </select>
            </div>
            <div class="setting-item" style="border-top: 1px solid var(--border-light); padding-top: 1rem; margin-top: 1rem;">
                <div class="setting-info">
                    <div class="setting-title" style="color: var(--error-color);">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</div>
                    <div class="setting-desc">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ñ–∏–ª—å—Ç—Ä—ã –∏ –∫—ç—à</div>
                </div>
                <button class="btn btn--danger btn--sm" id="clearAllDataBtn">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>

        <!-- Sources Management Modal (RSS + VK) -->
        <div class="modal hidden" id="rssSourcesModal">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2>üì° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏</h2>
                    <button class="modal-close" data-modal="rssSourcesModal">√ó</button>
                </div>
                <div class="modal-body">
                    <!-- –í–∫–ª–∞–¥–∫–∏ -->
                    <div class="tabs" style="margin-bottom: 1.5rem;">
                        <button class="tab-btn active" data-tab="rss">üì∞ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏</button>
                        <button class="tab-btn" data-tab="vk">üì± VK –≥—Ä—É–ø–ø—ã</button>
                    </div>
                    
                    <!-- RSS Tab -->
                    <div class="tab-content active" id="rss-tab">
                        <p class="modal-desc">–î–æ–±–∞–≤–ª—è–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                    
                    <!-- Add New Source -->
                    <div class="rss-add-section">
                        <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫</h3>
                        <div class="rss-add-form">
                            <input type="text" id="rssSourceName" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞" style="margin-bottom: 0.5rem;">
                            <input type="url" id="rssSourceUrl" class="form-control" placeholder="URL RSS –ª–µ–Ω—Ç—ã" style="margin-bottom: 0.5rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <select id="rssSourceCategory" class="form-control">
                                    <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                                    <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                    <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                                    <option value="design">–î–∏–∑–∞–π–Ω</option>
                                    <option value="other">–î—Ä—É–≥–æ–µ</option>
                                </select>
                                <button class="btn btn--primary" id="addRssSourceBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <!-- Current Sources List -->
                    <div class="rss-sources-list">
                        <h3>üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</h3>
                        <div id="rssSourcesList" class="sources-grid">
                            <!-- Sources will be loaded here -->
                        </div>
                    </div>
                    </div>
                    
                    <!-- VK Tab -->
                    <div class="tab-content" id="vk-tab">
                        <p class="modal-desc">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ VK –≥—Ä—É–ø–ø–∞–º–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                        
                        <!-- VK Groups List -->
                        <div class="vk-groups-list">
                            <h3>üì± VK –ì—Ä—É–ø–ø—ã</h3>
                            <div id="vkGroupsList" class="sources-grid">
                                <!-- VK groups will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Add Custom VK Group -->
                        <div class="vk-add-section" style="margin-top: 1.5rem;">
                            <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å VK –≥—Ä—É–ø–ø—É</h3>
                            <div class="rss-add-form">
                                <input type="text" id="vkGroupName" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" style="margin-bottom: 0.5rem;">
                                <input type="text" id="vkGroupId" class="form-control" placeholder="ID –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: habr)" style="margin-bottom: 0.5rem;">
                                <div style="display: flex; gap: 0.5rem;">
                                    <select id="vkGroupCategory" class="form-control">
                                        <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                                        <option value="business">–ë–∏–∑–Ω–µ—Å</option>
                                        <option value="design">–î–∏–∑–∞–π–Ω</option>
                                        <option value="education">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                                        <option value="general">–û–±—â–µ–µ</option>
                                    </select>
                                    <button id="addVkGroupBtn" class="btn btn--primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OpenAI API Management Modal -->
        <div class="modal hidden" id="openaiModal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h2>ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAI API</h2>
                    <button class="modal-close" data-modal="openaiModal">√ó</button>
                </div>
                <div class="modal-body">
                    <p class="modal-desc">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ OpenAI API –∫–ª—é—á –¥–ª—è AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∞—Ç–∫–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π</p>
                    
                    <!-- API Key Status -->
                    <div class="api-status-section">
                        <div class="status-card" id="apiStatusCard">
                            <div class="status-icon" id="apiStatusIcon">‚ùå</div>
                            <div class="status-info">
                                <div class="status-title" id="apiStatusTitle">API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</div>
                                <div class="status-desc" id="apiStatusDesc">–î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI —Ñ—É–Ω–∫—Ü–∏–π</div>
                            </div>
                        </div>
                    </div>

                    <!-- API Key Input -->
                    <div class="api-input-section">
                        <h3>üîë API –ö–ª—é—á</h3>
                        <div class="api-input-form">
                            <input type="password" id="openaiApiKeyInput" class="form-control" placeholder="sk-proj-xxxxxxxxxxxxxxxx" style="margin-bottom: 0.5rem;">
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn--primary" id="saveApiKeyBtn" style="flex: 1;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                <button class="btn btn--secondary" id="testApiKeyBtn" style="flex: 1;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                                <button class="btn btn--ghost" id="removeApiKeyBtn">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <!-- Info Section -->
                    <div class="api-info-section">
                        <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <ul class="info-list">
                            <li>AI —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å GPT-3.5-turbo</li>
                            <li>–ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</li>
                            <li>–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –Ω–∞ <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></li>
                            <li>–°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.002 –∑–∞ –æ–¥–Ω—É —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—é</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Feed Page -->
            <div class="page active" id="feedPage">
                <!-- Quick Filters -->
                <div class="quick-filters" id="quickFilters">
                    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª–∞–¥–æ–∫ -->
                    <div class="tab-switcher-modern">
                        <div class="tab-indicator-modern" id="tabIndicator"></div>
                        <button class="tab-button-modern active" data-filter="all">
                            <span class="tab-icon-modern">üåü</span>
                            <span class="tab-text-modern">–í—Å—ë</span>
                            <span class="tab-counter-modern" id="counter-all">0</span>
                        </button>
                        <button class="tab-button-modern" data-filter="news">
                            <span class="tab-icon-modern">üì∞</span>
                            <span class="tab-text-modern">–ù–æ–≤–æ—Å—Ç–∏</span>
                            <span class="tab-counter-modern" id="counter-news">0</span>
                        </button>
                        <button class="tab-button-modern" data-filter="vk-news">
                            <span class="tab-icon-modern">üì±</span>
                            <span class="tab-text-modern">VK</span>
                            <span class="tab-counter-modern" id="counter-vk-news">0</span>
                        </button>
                        <button class="tab-button-modern" data-filter="jobs">
                            <span class="tab-icon-modern">üíº</span>
                            <span class="tab-text-modern">–í–∞–∫–∞–Ω—Å–∏–∏</span>
                            <span class="tab-counter-modern" id="counter-jobs">0</span>
                        </button>
                    </div>
                    
                    <div class="content-actions">
                        <button class="btn btn--icon" id="refreshBtn" title="–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                            </svg>
                        </button>
                        <button class="btn btn--icon" id="filtersToggle" title="–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
                            </svg>
                            <span class="filter-indicator hidden" id="filterIndicator"></span>
                        </button>
                    </div>
                </div>

                <!-- Content Feed -->
                <div class="feed-container" id="feedContainer">
                    <!-- Content cards will be loaded here -->
                </div>

                <!-- Loading Spinner -->
                <div class="loading-spinner hidden" id="loadingSpinner">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–π...</p>
                </div>

                <!-- Skeleton Loading -->
                <div class="skeleton-container hidden" id="skeletonContainer">
                    <!-- Skeleton cards for infinite scroll -->
                </div>

                <!-- End of Feed -->
                <div class="end-of-feed hidden" id="endOfFeed">
                    <div class="end-icon">üéâ</div>
                    <h3>–í—ã –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –≤—Å—ë!</h3>
                    <p>–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                    <button class="btn btn--primary" onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
            </div>

            <!-- Favorites Page -->
            <div class="page" id="favoritesPage">
                <div class="page-header">
                    <h2>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
                    <p class="page-subtitle">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                </div>
                <div class="favorites-feed" id="favoritesFeed">
                    <!-- Saved items will be loaded here -->
                </div>
                <div class="empty-state hidden" id="emptyFavorites">
                    <div class="empty-icon">‚≠ê</div>
                    <h3>–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                    <p>–ù–∞—á–Ω–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                </div>
            </div>

            <!-- Profile Page -->
            <div class="page" id="profilePage">
                <div class="profile-container">
                    <!-- Profile Header -->
                    <div class="profile-header">
                        <div class="profile-avatar-container">
                            <img class="profile-avatar" id="profileAvatar" src="https://i.pravatar.cc/150?img=12" alt="–ü—Ä–æ—Ñ–∏–ª—å">
                            <button class="avatar-edit-btn" id="editAvatarBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="profile-info">
                            <h2 class="profile-name" id="profileName">–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                            <p class="profile-profession" id="profileProfession">Frontend Developer</p>
                            <p class="profile-location" id="profileLocation">–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è</p>
                        </div>
                        <button class="btn btn--primary btn--sm" id="editProfileBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>

                    <!-- Statistics -->
                    <div class="stats-section">
                        <h3 class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="articlesReadStat">0</div>
                                <div class="stat-label">–ü—Ä–æ—á–∏—Ç–∞–Ω–æ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="articlesSavedStat">0</div>
                                <div class="stat-label">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="sourcesCountStat">10</div>
                                <div class="stat-label">–ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="readingTimeStat">0—á</div>
                                <div class="stat-label">–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è</div>
                            </div>
                        </div>
                    </div>

                    <!-- Skills Section -->
                    <div class="profile-section">
                        <div class="section-header">
                            <h3 class="section-title">üíº –ù–∞–≤—ã–∫–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
                            <button class="btn btn--ghost btn--sm" id="editSkillsBtn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        <div class="skills-list" id="skillsList">
                            <!-- Skills will be loaded here -->
                        </div>
                    </div>

                    <!-- Portfolio Section -->
                    <div class="profile-section">
                        <div class="section-header">
                            <h3 class="section-title">üìÇ –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</h3>
                            <button class="btn btn--ghost btn--sm" id="editPortfolioBtn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        <div class="portfolio-grid" id="portfolioGrid">
                            <!-- Portfolio items will be loaded here -->
                        </div>
                    </div>

                    <!-- Statistics Section -->
                    <div class="profile-section">
                        <h3 class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">–ü—Ä–æ—á–∏—Ç–∞–Ω–æ —Å—Ç–∞—Ç–µ–π</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">0</div>
                                <div class="stat-label">–î–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- NewsHub Dock - React Bits Style -->
        <div class="dock-container" id="newsHubDock">
            <!-- Dock will be dynamically created by newsHubDock.js -->
        </div>
    </div>

    <!-- Filters Modal -->
    <div class="modal hidden" id="filtersModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content filters-modal-content">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-icon">üéØ</div>
                    <div>
                        <h2>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã</h2>
                        <p class="modal-subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ª–µ–Ω—Ç—É –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                    </div>
                </div>
                <button class="modal-close" data-modal="filtersModal">√ó</button>
            </div>
            <div class="modal-body filters-modal-body">
                <!-- Date Range Filter -->
                <div class="filter-section">
                    <div class="filter-section-header">
                        <div class="filter-icon">üìÖ</div>
                        <div>
                            <h3>–ü–µ—Ä–∏–æ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h3>
                            <p class="filter-desc">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω</p>
                        </div>
                    </div>
                    <div class="date-filter-pills">
                        <label class="pill-option">
                            <input type="radio" name="dateFilter" value="all" checked>
                            <span class="pill-label">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                                </svg>
                                –í—Å–µ –≤—Ä–µ–º—è
                            </span>
                        </label>
                        <label class="pill-option">
                            <input type="radio" name="dateFilter" value="today">
                            <span class="pill-label">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                                </svg>
                                –°–µ–≥–æ–¥–Ω—è
                            </span>
                        </label>
                        <label class="pill-option">
                            <input type="radio" name="dateFilter" value="week">
                            <span class="pill-label">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"/>
                                </svg>
                                –ù–µ–¥–µ–ª—è
                            </span>
                        </label>
                        <label class="pill-option">
                            <input type="radio" name="dateFilter" value="month">
                            <span class="pill-label">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10z"/>
                                </svg>
                                –ú–µ—Å—è—Ü
                            </span>
                        </label>
                    </div>
                </div>


                <!-- Job Filters (HH.ru) -->
                <div class="filter-section">
                    <div class="filter-section-header">
                        <div class="filter-icon">üíº</div>
                        <div>
                            <h3>–§–∏–ª—å—Ç—Ä—ã –≤–∞–∫–∞–Ω—Å–∏–π (HH.ru)</h3>
                            <p class="filter-desc">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π</p>
                        </div>
                    </div>
                    
                    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å–µ—Ç–∫–∞ 2 –∫–æ–ª–æ–Ω–∫–∏ -->
                    <div class="job-filters-grid">
                        
                        <div class="job-filter-group" style="grid-column: span 2;">
                            <label for="jobType">üíº –¢–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏</label>
                            <select id="jobType" class="form-control">
                                <option value="">–õ—é–±–∞—è</option>
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ CONFIG.jobTypes -->
                            </select>
                            <span class="input-hint">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ VK –≥—Ä—É–ø–ø—ã</span>
                        </div>
                        
                        <div class="job-filter-group">
                            <label for="jobCity">üåç –ì–æ—Ä–æ–¥</label>
                            <select id="jobCity" class="form-control">
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ CONFIG.cities -->
                            </select>
                        </div>

                        <div class="job-filter-group">
                            <label for="jobExperience">üíº –û–ø—ã—Ç</label>
                            <select id="jobExperience" class="form-control">
                                <option value="">–õ—é–±–æ–π</option>
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ CONFIG.experienceLevels -->
                            </select>
                        </div>

                        <div class="job-filter-group">
                            <label for="jobSchedule">üìÖ –ì—Ä–∞—Ñ–∏–∫</label>
                            <select id="jobSchedule" class="form-control">
                                <option value="">–õ—é–±–æ–π</option>
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ CONFIG.schedules -->
                            </select>
                        </div>

                        <div class="job-filter-group">
                            <label for="jobEmployment">üè¢ –ó–∞–Ω—è—Ç–æ—Å—Ç—å</label>
                            <select id="jobEmployment" class="form-control">
                                <option value="">–õ—é–±–∞—è</option>
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ CONFIG.employmentTypes -->
                            </select>
                        </div>

                        <div class="job-filter-group" style="grid-column: span 2;">
                            <label for="jobSalary">üí∞ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞</label>
                            <input type="number" id="jobSalary" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 100 000 ‚ÇΩ" min="0" step="10000">
                        </div>
                    </div>

                    <!-- –ß–µ–∫–±–æ–∫—Å –æ—Ç–¥–µ–ª—å–Ω–æ -->
                    <label class="toggle-option" style="margin-top: 1rem;">
                        <input type="checkbox" id="jobOnlyWithSalary">
                        <span class="toggle-content">
                            <span class="toggle-title">‚úì –¢–æ–ª—å–∫–æ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∑–∞—Ä–ø–ª–∞—Ç—ã</span>
                        </span>
                        <div class="toggle-switch"></div>
                    </label>
                </div>
            </div>
            <div class="modal-footer filters-modal-footer">
                <button class="btn btn--ghost" id="resetFiltersBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                    –°–±—Ä–æ—Å–∏—Ç—å
                </button>
                <button class="btn btn--primary" id="applyFiltersBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                </button>
            </div>
        </div>
    </div>

    <!-- Article Modal -->
    <div class="modal hidden" id="articleModal">
        <div class="modal-backdrop" onclick="closeArticleModal()"></div>
        <div class="modal-content article-modal-content">
            <div class="modal-header">
                <h3 id="articleModalTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏</h3>
                <button class="modal-close" onclick="closeArticleModal()">√ó</button>
            </div>
            <div class="modal-body article-modal-body">
                <div class="article-meta">
                    <div class="source-info">
                        <span class="source-icon" id="articleModalIcon">üì∞</span>
                        <span class="source-name" id="articleModalSource">–ò—Å—Ç–æ—á–Ω–∏–∫</span>
                        <span class="publish-time" id="articleModalTime">–≤—Ä–µ–º—è</span>
                    </div>
                    <div class="article-actions">
                        <button class="action-btn like-btn" id="articleModalLike">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                            <span class="like-count">0</span>
                        </button>
                        <button class="action-btn save-btn" id="articleModalSave">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="article-content" id="articleModalContent">
                    <p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç—å–∏ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∑–¥–µ—Å—å...</p>
                </div>
                <div class="comments-section">
                    <h4>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
                    <div class="comment-form">
                        <textarea placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." id="commentText"></textarea>
                        <button class="btn btn--primary" onclick="addComment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                    <div class="comments-list" id="commentsList">
                        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" target="_blank" class="btn btn--primary" id="articleModalLink">
                    –ß–∏—Ç–∞—Ç—å –Ω–∞ —Å–∞–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
                </a>
                <button class="btn btn--secondary" onclick="window.summarizeArticle()" id="summarizeArticleBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                    –°—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- Job Details Modal -->
    <div class="modal hidden" id="jobModal">
        <div class="modal-backdrop" onclick="window.closeJobModal()"></div>
        <div class="modal-content job-modal-content">
            <div class="modal-header">
                <div>
                    <h3 id="jobModalTitle">–í–∞–∫–∞–Ω—Å–∏—è</h3>
                    <p class="job-modal-company" id="jobModalCompany">–ö–æ–º–ø–∞–Ω–∏—è</p>
                </div>
                <button class="modal-close" onclick="window.closeJobModal()">√ó</button>
            </div>
            <div class="modal-body job-modal-body">
                <div class="job-modal-header">
                    <img id="jobModalLogo" src="" alt="" class="job-modal-logo" style="display: none;">
                    <div class="job-modal-info">
                        <div class="job-modal-salary" id="jobModalSalary">üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞</div>
                        <div class="job-modal-meta">
                            <span id="jobModalLocation">üìç –õ–æ–∫–∞—Ü–∏—è</span>
                            <span id="jobModalExperience">üìÖ –û–ø—ã—Ç</span>
                            <span id="jobModalSchedule">‚è∞ –ì—Ä–∞—Ñ–∏–∫</span>
                        </div>
                    </div>
                </div>
                
                <div class="job-modal-section">
                    <h4>üìã –û–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h4>
                    <div id="jobModalDescription"></div>
                </div>
                
                <div class="job-modal-section">
                    <h4>‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</h4>
                    <div id="jobModalRequirements"></div>
                </div>
                
                <div class="job-modal-section">
                    <h4>üéØ –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</h4>
                    <div id="jobModalResponsibility"></div>
                </div>
                
                <div id="jobAIAssessment" class="job-ai-assessment" style="display: none;">
                    <h4>ü§ñ AI –û—Ü–µ–Ω–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–∏</h4>
                    <div id="jobAIAssessmentContent"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" onclick="window.assessJob()" id="assessJobBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    –û—Ü–µ–Ω–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é (AI)
                </button>
                <a href="#" target="_blank" class="btn btn--primary" id="jobModalLink">
                    –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ HH.ru
                </a>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal hidden" id="editProfileModal">
        <div class="modal-backdrop" onclick="window.closeEditProfileModal()"></div>
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div>
                    <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin: 0.5rem 0 0 0;">
                        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π
                    </p>
                </div>
                <button class="modal-close" onclick="window.closeEditProfileModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="profileNameInput">üë§ –ò–º—è</label>
                    <input type="text" id="profileNameInput" class="form-control" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                </div>
                
                <div class="form-group">
                    <label for="profileProfessionInput">üíº –ü—Ä–æ—Ñ–µ—Å—Å–∏—è</label>
                    <input type="text" id="profileProfessionInput" class="form-control" placeholder="Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫">
                </div>
                
                <div class="form-group">
                    <label for="profileLocationInput">üìç –õ–æ–∫–∞—Ü–∏—è</label>
                    <input type="text" id="profileLocationInput" class="form-control" placeholder="–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è">
                </div>
                
                <div class="form-group">
                    <label for="profileExperienceInput">üìÖ –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</label>
                    <select id="profileExperienceInput" class="form-control">
                        <option value="">–ù–µ —É–∫–∞–∑–∞–Ω</option>
                        <option value="–ù–µ—Ç –æ–ø—ã—Ç–∞">–ù–µ—Ç –æ–ø—ã—Ç–∞</option>
                        <option value="–ú–µ–Ω–µ–µ 1 –≥–æ–¥–∞">–ú–µ–Ω–µ–µ 1 –≥–æ–¥–∞</option>
                        <option value="1-3 –≥–æ–¥–∞">1-3 –≥–æ–¥–∞</option>
                        <option value="3-6 –ª–µ—Ç">3-6 –ª–µ—Ç</option>
                        <option value="–ë–æ–ª–µ–µ 6 –ª–µ—Ç">–ë–æ–ª–µ–µ 6 –ª–µ—Ç</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="profileSkillsInput">üéØ –ù–∞–≤—ã–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                    <textarea id="profileSkillsInput" class="form-control" rows="3" placeholder="JavaScript, React, TypeScript, HTML, CSS"></textarea>
                    <small style="color: var(--text-secondary); font-size: 0.75rem;">
                        –£–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –Ω–∞–≤—ã–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –¥–ª—è –ª—É—á—à–µ–π –æ—Ü–µ–Ω–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π
                    </small>
                </div>
                
                <div class="form-group">
                    <label for="profileBioInput">üìù –û —Å–µ–±–µ</label>
                    <textarea id="profileBioInput" class="form-control" rows="4" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ, –æ–ø—ã—Ç–µ –∏ —Ü–µ–ª—è—Ö"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--ghost" onclick="window.closeEditProfileModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn--primary" onclick="window.saveProfile()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="js/filterSystem.js?v=1.3.0"></script>
    <script src="js/rssAggregator.js?v=1.3.0"></script>
    <script src="js/newsCardRenderer.js?v=1.3.0"></script>
    <script src="js/newsHubDock.js?v=1.3.0"></script>
    <script src="js/pixelBlastInit.js?v=1.1.0"></script>
    
    <!-- VK ID SDK –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <script src="https://unpkg.com/@vkid/sdk@<3.0.0/dist-sdk/umd/index.js"></script>
    
    <!-- Theme initialization - must be first -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ DOM –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            const theme = savedTheme || systemTheme;
            
            document.documentElement.setAttribute('data-theme', theme);
            document.body.className = (document.body.className || '') + ` theme-${theme}`;
        })();
    </script>
    
    
    <!-- Initialization script -->
    <script>
        // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫—ç—à–µ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        // if ('serviceWorker' in navigator && 'caches' in window) {
        //     caches.keys().then(function(cacheNames) {
        //         return Promise.all(
        //             cacheNames.map(function(cacheName) {
        //                 if (cacheName.startsWith('newshub-old')) {
        //                     return caches.delete(cacheName);
        //                 }
        //             })
        //         );
        //     });
        // }
        
        // –û—á–∏—Å—Ç–∫–∞ localStorage –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
        // localStorage.clear();
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π - –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–∞—Ä–∞–Ω–µ–µ
        window.jobsApiReady = false;
        
        // –ü—Ä–æ—Å—Ç–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–∫-–±–∞—Ä
            const dockBar = document.querySelector('.dock-bar');
            const dockButtons = document.querySelectorAll('.dock-btn');
            
            if (dockBar) {
                // –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ –¥–æ–∫-–±–∞—Ä visible
                dockBar.style.display = 'flex';
                dockBar.style.visibility = 'visible';
                dockBar.style.opacity = '1';
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏
                dockButtons.forEach((btn, index) => {
                    const icon = btn.querySelector('.dock-icon');
                    const label = btn.querySelector('.dock-label');
                    const svg = btn.querySelector('svg');
                    
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–Ω–æ–ø–∫–∏
                    btn.style.display = 'inline-flex';
                    btn.style.visibility = 'visible';
                    btn.style.opacity = '1';
                    if (icon) {
                        icon.style.display = 'flex';
                        icon.style.visibility = 'visible';
                        icon.style.opacity = '1';
                    }
                    if (label) {
                        label.style.display = 'block';
                        label.style.visibility = 'visible';
                        label.style.opacity = '1';
                    }
                    if (svg) {
                        svg.style.display = 'block';
                        svg.style.visibility = 'visible';
                        svg.style.opacity = '1';
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
                    btn.addEventListener('click', function() {
                        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                        dockButtons.forEach(b => b.classList.remove('active'));
                        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–π
                        this.classList.add('active');
                    });
                });
            }
            
            const isFirstVisit = !localStorage.getItem('newshub_setup_completed');
            const welcomeModal = document.getElementById('welcomeModal');
            const mainApp = document.getElementById('mainApp');
            
            if (isFirstVisit && welcomeModal && mainApp) {
                welcomeModal.classList.remove('hidden');
                welcomeModal.style.display = 'flex';
                mainApp.classList.add('hidden');
                
                // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
                const popularJobs = [
                    'Frontend Developer', 'Backend Developer', 'Full-stack Developer',
                    'Product Manager', 'UX/UI Designer', 'Data Scientist',
                    'DevOps Engineer', 'QA Engineer', 'Marketing Manager',
                    'Sales Manager', 'Project Manager', 'Business Analyst',
                    'Mobile Developer', 'Python Developer', 'Java Developer',
                    'React Developer', 'Node.js Developer', 'PHP Developer',
                    'Data Analyst', 'Scrum Master'
                ];
                
                const container = document.getElementById('popularJobsGrid');
                if (container) {
                    const buttonsHTML = popularJobs.map(job => 
                        `<button class="job-btn" onclick="selectProfession('${job}')">${job}</button>`
                    ).join('');
                    container.innerHTML = buttonsHTML;
                }
            } else if (mainApp) {
                mainApp.classList.remove('hidden');
                if (welcomeModal) {
                    welcomeModal.classList.add('hidden');
                    welcomeModal.style.display = 'none';
                }
            }
        });
        
        let selectedProfessions = [];
        
        function selectProfession(profession) {
            if (selectedProfessions.includes(profession)) return;
            
            selectedProfessions = [profession]; // –í—ã–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø—Ä–æ—Ñ–µ—Å—Å–∏—é
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            document.querySelectorAll('.job-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.textContent === profession);
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
            const setupBtn = document.getElementById('setupComplete');
            if (setupBtn) {
                setupBtn.disabled = false;
                setupBtn.onclick = completeSetup;
            }
        }
        
        function completeSetup() {
            if (selectedProfessions.length === 0) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è');
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            localStorage.setItem('newshub_setup_completed', 'true');
            localStorage.setItem('selected_profession', selectedProfessions[0]);
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≥–ª–∞–≤–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
            const welcomeModal = document.getElementById('welcomeModal');
            const mainApp = document.getElementById('mainApp');
            
            if (welcomeModal && mainApp) {
                welcomeModal.classList.add('hidden');
                welcomeModal.style.display = 'none';
                mainApp.classList.remove('hidden');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            if (window.filterSystem) {
                window.filterSystem.showToast('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NewsHub!', 'success');
            }
        }
        
        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenAI API –∫–ª—é—á–∞
        function testOpenAIKey() {
            const keyInput = document.getElementById('openaiKey');
            const testBtn = document.getElementById('testApiKey');
            
            if (!keyInput || !testBtn) return;
            
            const apiKey = keyInput.value.trim();
            
            if (!apiKey) {
                alert('–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                return;
            }
            
            if (!apiKey.startsWith('sk-')) {
                alert('API –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"');
                return;
            }
            
            testBtn.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º...';
            testBtn.disabled = true;
            
            // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –∫–ª—é—á–∞
            setTimeout(() => {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–ª—é—á
                localStorage.setItem('openai_api_key', apiKey);
                
                testBtn.textContent = '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç';
                testBtn.style.background = 'var(--success)';
                testBtn.style.color = 'white';
                
                if (window.filterSystem) {
                    window.filterSystem.showToast('OpenAI API –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω', 'success');
                }
                
                setTimeout(() => {
                    testBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å';
                    testBtn.disabled = false;
                    testBtn.style.background = '';
                    testBtn.style.color = '';
                }, 2000);
            }, 1500);
        }
        
        // –ü–æ–∏—Å–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º –æ–∫–Ω–µ
        function setupJobSearch() {
            const jobSearchInput = document.getElementById('jobSearchInput');
            const jobSearchResults = document.getElementById('jobSearchResults');
            const jobSearchClear = document.getElementById('jobSearchClear');
            
            if (!jobSearchInput || !jobSearchResults) return;
            
            const allProfessions = [
                'Frontend Developer', 'Backend Developer', 'Full-stack Developer',
                'Product Manager', 'UX/UI Designer', 'Data Scientist',
                'DevOps Engineer', 'QA Engineer', 'Marketing Manager',
                'Sales Manager', 'Project Manager', 'Business Analyst',
                'Mobile Developer', 'Python Developer', 'Java Developer',
                'React Developer', 'Node.js Developer', 'PHP Developer',
                'Data Analyst', 'Scrum Master', 'System Administrator',
                'Network Engineer', 'Cybersecurity Specialist', 'Database Administrator',
                'Cloud Architect', 'Software Architect', 'Technical Writer',
                'Game Developer', 'Blockchain Developer', 'AI Engineer',
                'ML Engineer', 'Web Designer', 'Graphic Designer',
                'Motion Designer', 'Brand Designer', 'Content Manager',
                'SMM Specialist', 'SEO Specialist', 'Performance –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥',
                'Digital –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥', 'Customer Success Manager', 'Account Manager',
                'HR Manager', 'Recruiter', 'Financial Analyst',
                'Business Intelligence Analyst', 'Operations Manager', 'Supply Chain Manager',
                'Logistics Coordinator', 'Quality Assurance Manager', 'Compliance Officer',
                'Risk Manager', 'Investment Banker', 'Financial Advisor',
                'Insurance Agent', 'Real Estate Agent', 'Property Manager',
                'Construction Manager', 'Architect', 'Civil Engineer',
                'Mechanical Engineer', 'Electrical Engineer', 'Chemical Engineer',
                'Biomedical Engineer', 'Aerospace Engineer', 'Environmental Engineer',
                'Industrial Designer', 'Interior Designer', 'Fashion Designer',
                'Photographer', 'Video Editor', 'Sound Engineer',
                'Music Producer', 'Artist', 'Musician', 'Actor',
                'Director', 'Producer', 'Screenwriter', 'Cinematographer',
                'Photo Editor', 'Illustrator', 'Art Director', 'Creative Director',
                'Package Designer', 'Environmental Designer', 'Landscape Architect',
                'Urban Planner', 'Teacher', 'Professor', 'Researcher',
                'Scientist', 'Doctor', 'Nurse', 'Pharmacist',
                'Veterinarian', 'Psychologist', 'Therapist', 'Social Worker',
                'Lawyer', 'Legal Assistant', 'Paralegal', 'Judge',
                'Journalist', 'Editor', 'Copywriter', 'Translator',
                'Interpreter', 'Librarian', 'Museum Curator', 'Archivist',
                'Chef', 'Barista', 'Waiter', 'Restaurant Manager',
                'Hotel Manager', 'Travel Agent', 'Tour Guide',
                'Event Coordinator', 'Wedding Planner', 'Personal Trainer',
                'Fitness Instructor', 'Yoga Instructor', 'Massage Therapist',
                'Beautician', 'Hair Stylist', 'Makeup Artist', 'Fashion Stylist'
            ];
            
            jobSearchInput.addEventListener('input', function(e) {
                const query = e.target.value.trim().toLowerCase();
                
                if (query.length === 0) {
                    jobSearchResults.classList.add('hidden');
                    jobSearchClear.classList.add('hidden');
                    return;
                }
                
                jobSearchClear.classList.remove('hidden');
                
                const filtered = allProfessions.filter(profession => 
                    profession.toLowerCase().includes(query)
                ).slice(0, 10);
                
                if (filtered.length === 0) {
                    jobSearchResults.innerHTML = '<div class="no-results">–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                } else {
                    jobSearchResults.innerHTML = filtered.map(profession => 
                        `<button class="job-search-result" onclick="selectProfession('${profession}')">${profession}</button>`
                    ).join('');
                }
                
                jobSearchResults.classList.remove('hidden');
            });
            
            if (jobSearchClear) {
                jobSearchClear.addEventListener('click', function() {
                    jobSearchInput.value = '';
                    jobSearchResults.classList.add('hidden');
                    jobSearchClear.classList.add('hidden');
                });
            }
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        document.addEventListener('DOMContentLoaded', function() {
            const testApiBtn = document.getElementById('testApiKey');
            if (testApiBtn) {
                testApiBtn.onclick = testOpenAIKey;
            }
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–∏—Å–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
            setupJobSearch();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            initializeApp();
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initializeApp() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ü–≤–µ—Ç–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
            if (window.colorTokens) {
                // –¶–≤–µ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º React Bits –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
            if (window.ReactBitsIntegration) {
                window.reactBits = new ReactBitsIntegration();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RSS Aggregator
            if (typeof RSSAggregator !== 'undefined') {
                window.rssAggregator = new RSSAggregator();
                
                // –ü–æ–¥–∫–ª—é—á–∞–µ–º VK API –∫ RSS Aggregator
                if (window.vkApi) {
                    window.rssAggregator.vkApi = window.vkApi;
                    console.log('‚úÖ VK API –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ RSS Aggregator');
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
                window.rssAggregator.setSelectedProfessions([1, 3]); // Frontend –∏ Fullstack Developer
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                window.rssAggregator.aggregateNews().then(articles => {
                    // –†–µ–Ω–¥–µ—Ä–∏–º —Å—Ç–∞—Ç—å–∏ –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–µ—Ä
                    if (window.newsRenderer) {
                        const feedContainer = document.getElementById('feedContainer');
                        if (feedContainer && articles.length > 0) {
                            window.newsRenderer.renderCards(articles, feedContainer);
                        }
                    }
                }).catch(error => {
                    // –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                });
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è NewsCardRenderer
            if (window.NewsCardRenderer) {
                window.newsRenderer = new NewsCardRenderer();
            }
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–æ–∫-–±–∞—Ä–∞
            setupDockNavigation();
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
            setupSearchAndFilters();
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º breadcrumb –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            setupBreadcrumbNavigation();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–µ—à –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ localStorage –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            const cachedArticles = getCachedData('news_cache');
            if (cachedArticles && cachedArticles.length > 0) {
                window.cachedRSSNews = cachedArticles;
                console.log('üì∞ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–µ—à RSS –Ω–æ–≤–æ—Å—Ç–µ–π:', cachedArticles.length, '—Å—Ç–∞—Ç–µ–π');
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
                window.updateTabCounter('news', cachedArticles.length);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            loadInitialContent();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            setTimeout(() => {
                const savedArticles = JSON.parse(localStorage.getItem('saved_articles') || '[]');
                savedArticles.forEach(article => {
                    if (article.id) {
                        updateAllSaveButtons(article.id, true);
                    }
                });
                console.log(`üíæ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ${savedArticles.length} —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π`);
            }, 2000); // –î–∞–µ–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        }
        
        // RSS Sources Management Functions
        function loadRssSources() {
            const sourcesList = document.getElementById('rssSourcesList');
            if (!sourcesList || !window.rssAggregator) return;
            
            const sources = window.rssAggregator.sources || [];
            
            if (sources.length === 0) {
                sourcesList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</p>';
                return;
            }
            
            sourcesList.innerHTML = sources.map(source => `
                <div class="source-card" data-source-id="${source.id}">
                    <div class="source-header">
                        <h4>${source.name}</h4>
                        <span class="source-badge ${source.category}">${getCategoryName(source.category)}</span>
                    </div>
                    <div class="source-url">${source.url}</div>
                    <div class="source-actions">
                        <button class="btn btn--ghost btn--sm toggle-source-btn" data-source-id="${source.id}">
                            ${source.enabled !== false ? '‚úì –ê–∫—Ç–∏–≤–µ–Ω' : '‚úó –û—Ç–∫–ª—é—á–µ–Ω'}
                        </button>
                        <button class="btn btn--ghost btn--sm delete-source-btn" data-source-id="${source.id}">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                </div>
            `).join('');
            
            // Attach event listeners
            sourcesList.querySelectorAll('.toggle-source-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sourceId = parseInt(this.dataset.sourceId);
                    toggleRssSource(sourceId);
                });
            });
            
            sourcesList.querySelectorAll('.delete-source-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const sourceId = parseInt(this.dataset.sourceId);
                    deleteRssSource(sourceId);
                });
            });
        }
        
        function getCategoryName(category) {
            const names = {
                tech: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',
                news: '–ù–æ–≤–æ—Å—Ç–∏',
                business: '–ë–∏–∑–Ω–µ—Å',
                design: '–î–∏–∑–∞–π–Ω',
                other: '–î—Ä—É–≥–æ–µ'
            };
            return names[category] || '–î—Ä—É–≥–æ–µ';
        }
        
        function toggleRssSource(sourceId) {
            if (!window.rssAggregator) return;
            
            const source = window.rssAggregator.sources.find(s => s.id === sourceId);
            if (source) {
                source.enabled = source.enabled === false ? true : false;
                if (typeof window.showToast === 'function') {
                    window.showToast(
                        `–ò—Å—Ç–æ—á–Ω–∏–∫ ${source.enabled ? '–≤–∫–ª—é—á–µ–Ω' : '–æ—Ç–∫–ª—é—á–µ–Ω'}`,
                        source.enabled ? 'success' : 'info'
                    );
                }
                loadRssSources();
            }
        }
        
        function deleteRssSource(sourceId) {
            if (!window.rssAggregator) return;
            
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫?')) {
                const index = window.rssAggregator.sources.findIndex(s => s.id === sourceId);
                if (index !== -1) {
                    const sourceName = window.rssAggregator.sources[index].name;
                    window.rssAggregator.sources.splice(index, 1);
                    if (typeof window.showToast === 'function') {
                        window.showToast(`–ò—Å—Ç–æ—á–Ω–∏–∫ "${sourceName}" —É–¥–∞–ª–µ–Ω`, 'success');
                    }
                    loadRssSources();
                }
            }
        }
        
        // Add new RSS source
        document.addEventListener('DOMContentLoaded', function() {
            const addBtn = document.getElementById('addRssSourceBtn');
            if (addBtn) {
                addBtn.addEventListener('click', function() {
                    const name = document.getElementById('rssSourceName').value.trim();
                    const url = document.getElementById('rssSourceUrl').value.trim();
                    const category = document.getElementById('rssSourceCategory').value;
                    
                    if (!name || !url) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                        }
                        return;
                    }
                    
                    if (!window.rssAggregator) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('RSS Aggregator –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error');
                        }
                        return;
                    }
                    
                    const newSource = {
                        id: Date.now(),
                        name: name,
                        url: url,
                        category: category,
                        enabled: true,
                        professions: []
                    };
                    
                    window.rssAggregator.sources.push(newSource);
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast(`–ò—Å—Ç–æ—á–Ω–∏–∫ "${name}" –¥–æ–±–∞–≤–ª–µ–Ω`, 'success');
                    }
                    
                    // Clear inputs
                    document.getElementById('rssSourceName').value = '';
                    document.getElementById('rssSourceUrl').value = '';
                    
                    loadRssSources();
                });
            }
            
            // VK Groups Management
            setupVKGroupsManagement();
            
            // OpenAI API Management
            setupOpenAIManagement();
        });
        
        // VK Groups Management Functions
        function loadVKGroups() {
            const groupsList = document.getElementById('vkGroupsList');
            if (!groupsList) return;
            
            const vkGroups = JSON.parse(localStorage.getItem('custom_vk_groups') || '[]');
            const configGroups = window.CONFIG?.vkGroups || [];
            
            groupsList.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
            configGroups.forEach(group => {
                const groupCard = document.createElement('div');
                groupCard.className = 'source-card';
                groupCard.innerHTML = `
                    <div class="source-info">
                        <div class="source-title">${group.name}</div>
                        <div class="source-url">vk.com/${group.id}</div>
                        <div class="source-category">${group.category}</div>
                    </div>
                    <div class="source-actions">
                        <span class="source-status ${group.enabled ? 'enabled' : 'disabled'}">
                            ${group.enabled ? '‚úÖ' : '‚ùå'}
                        </span>
                    </div>
                `;
                groupsList.appendChild(groupCard);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã
            vkGroups.forEach((group, index) => {
                const groupCard = document.createElement('div');
                groupCard.className = 'source-card custom-group';
                groupCard.innerHTML = `
                    <div class="source-info">
                        <div class="source-title">${group.name}</div>
                        <div class="source-url">vk.com/${group.id}</div>
                        <div class="source-category">${group.category}</div>
                    </div>
                    <div class="source-actions">
                        <button class="btn btn--ghost btn--sm" onclick="toggleVKGroup(${index})">
                            ${group.enabled ? '‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å' : '‚úÖ –í–∫–ª—é—á–∏—Ç—å'}
                        </button>
                        <button class="btn btn--ghost btn--sm btn--danger" onclick="removeVKGroup(${index})">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                `;
                groupsList.appendChild(groupCard);
            });
        }
        
        function toggleVKGroup(index) {
            const vkGroups = JSON.parse(localStorage.getItem('custom_vk_groups') || '[]');
            if (vkGroups[index]) {
                vkGroups[index].enabled = !vkGroups[index].enabled;
                localStorage.setItem('custom_vk_groups', JSON.stringify(vkGroups));
                
                if (typeof window.showToast === 'function') {
                    window.showToast(
                        `–ì—Ä—É–ø–ø–∞ ${vkGroups[index].enabled ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–æ—Ç–∫–ª—é—á–µ–Ω–∞'}`,
                        vkGroups[index].enabled ? 'success' : 'info'
                    );
                }
                loadVKGroups();
            }
        }
        
        function removeVKGroup(index) {
            const vkGroups = JSON.parse(localStorage.getItem('custom_vk_groups') || '[]');
            if (vkGroups[index]) {
                const groupName = vkGroups[index].name;
                vkGroups.splice(index, 1);
                localStorage.setItem('custom_vk_groups', JSON.stringify(vkGroups));
                
                if (typeof window.showToast === 'function') {
                    window.showToast(`–ì—Ä—É–ø–ø–∞ "${groupName}" —É–¥–∞–ª–µ–Ω–∞`, 'success');
                }
                loadVKGroups();
            }
        }
        
        function setupVKGroupsManagement() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º VK –≥—Ä—É–ø–ø—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
            const vkTab = document.querySelector('[data-tab="vk"]');
            if (vkTab) {
                vkTab.addEventListener('click', function() {
                    setTimeout(() => loadVKGroups(), 100);
                });
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è VK –≥—Ä—É–ø–ø—ã
            const addVkGroupBtn = document.getElementById('addVkGroupBtn');
            if (addVkGroupBtn) {
                addVkGroupBtn.addEventListener('click', function() {
                    const name = document.getElementById('vkGroupName').value.trim();
                    const id = document.getElementById('vkGroupId').value.trim();
                    const category = document.getElementById('vkGroupCategory').value;
                    
                    if (!name || !id) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ ID –≥—Ä—É–ø–ø—ã', 'error');
                        }
                        return;
                    }
                    
                    const vkGroups = JSON.parse(localStorage.getItem('custom_vk_groups') || '[]');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
                    if (vkGroups.some(group => group.id === id)) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–ì—Ä—É–ø–ø–∞ —Å —Ç–∞–∫–∏–º ID —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'error');
                        }
                        return;
                    }
                    
                    const newGroup = {
                        id: id,
                        name: name,
                        category: category,
                        enabled: true,
                        url: `https://vk.com/${id}`,
                        relatedJobs: [] // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∑–∂–µ
                    };
                    
                    vkGroups.push(newGroup);
                    localStorage.setItem('custom_vk_groups', JSON.stringify(vkGroups));
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast(`–ì—Ä—É–ø–ø–∞ "${name}" –¥–æ–±–∞–≤–ª–µ–Ω–∞`, 'success');
                    }
                    
                    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
                    document.getElementById('vkGroupName').value = '';
                    document.getElementById('vkGroupId').value = '';
                    
                    loadVKGroups();
                });
            }
        }
        
        // OpenAI API Management Functions
        function loadApiKeyStatus() {
            const apiKey = localStorage.getItem('openai_api_key');
            const statusIcon = document.getElementById('apiStatusIcon');
            const statusTitle = document.getElementById('apiStatusTitle');
            const statusDesc = document.getElementById('apiStatusDesc');
            const statusCard = document.getElementById('apiStatusCard');
            const apiInput = document.getElementById('openaiApiKeyInput');
            
            if (apiKey) {
                statusIcon.textContent = '‚úÖ';
                statusTitle.textContent = 'API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω';
                statusDesc.textContent = `–ö–ª—é—á: ${apiKey.substring(0, 10)}...${apiKey.substring(apiKey.length - 4)}`;
                statusCard.style.borderColor = 'var(--success)';
                statusCard.style.background = 'rgba(79, 209, 199, 0.05)';
                apiInput.value = apiKey;
            } else {
                statusIcon.textContent = '‚ùå';
                statusTitle.textContent = 'API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω';
                statusDesc.textContent = '–î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI —Ñ—É–Ω–∫—Ü–∏–π';
                statusCard.style.borderColor = 'var(--border-medium)';
                statusCard.style.background = 'var(--bg-secondary)';
                apiInput.value = '';
            }
        }
        
        function setupOpenAIManagement() {
            const saveBtn = document.getElementById('saveApiKeyBtn');
            const testBtn = document.getElementById('testApiKeyBtn');
            const removeBtn = document.getElementById('removeApiKeyBtn');
            const apiInput = document.getElementById('openaiApiKeyInput');
            
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    const apiKey = apiInput.value.trim();
                    
                    if (!apiKey) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á', 'error');
                        }
                        return;
                    }
                    
                    if (!apiKey.startsWith('sk-')) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞', 'error');
                        }
                        return;
                    }
                    
                    localStorage.setItem('openai_api_key', apiKey);
                    if (typeof window.showToast === 'function') {
                        window.showToast('OpenAI API –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω', 'success');
                    }
                    loadApiKeyStatus();
                });
            }
            
            if (testBtn) {
                testBtn.addEventListener('click', async function() {
                    const apiKey = apiInput.value.trim() || localStorage.getItem('openai_api_key');
                    
                    if (!apiKey) {
                        if (typeof window.showToast === 'function') {
                            window.showToast('–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á', 'error');
                        }
                        return;
                    }
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–ª—é—á –µ—Å–ª–∏ –æ–Ω –≤–≤–µ–¥–µ–Ω –≤ –ø–æ–ª–µ
                    if (apiInput.value.trim()) {
                        localStorage.setItem('openai_api_key', apiKey);
                    }
                    
                    testBtn.disabled = true;
                    testBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
                    
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—à—É —É–ª—É—á—à–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    const isValid = await window.testOpenAIKey();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                    if (isValid) {
                        testBtn.textContent = '‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç';
                        testBtn.style.background = 'var(--success)';
                        loadApiKeyStatus(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                    } else {
                        testBtn.textContent = '‚ùå –û—à–∏–±–∫–∞';
                        testBtn.style.background = 'var(--error)';
                    }
                    
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        testBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å';
                        testBtn.style.background = '';
                        testBtn.disabled = false;
                    }, 3000);
                });
            }
            
            if (removeBtn) {
                removeBtn.addEventListener('click', function() {
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å API –∫–ª—é—á?')) {
                        localStorage.removeItem('openai_api_key');
                        if (typeof window.showToast === 'function') {
                            window.showToast('API –∫–ª—é—á —É–¥–∞–ª–µ–Ω', 'success');
                        }
                        loadApiKeyStatus();
                    }
                });
            }
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ breadcrumb –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function setupBreadcrumbNavigation() {
            const breadcrumbItems = document.querySelectorAll('.breadcrumb-item');
            const pages = ['–õ–µ–Ω—Ç–∞', '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ', '–ü—Ä–æ—Ñ–∏–ª—å'];
            
            function updateBreadcrumb(activePageName) {
                breadcrumbItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.textContent.trim() === activePageName) {
                        item.classList.add('active');
                    }
                });
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ breadcrumb
                breadcrumbItems.forEach((item, index) => {
                    item.addEventListener('click', function() {
                        const pageName = pages[index];
                        console.log(`üß≠ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: ${pageName}`);
                        updateBreadcrumb(pageName);
                        
                        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
                        if (pageName === '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ') {
                            setTimeout(() => {
                                loadFavorites();
                            }, 100);
                        }
                        
                        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        if (pageName === '–õ–µ–Ω—Ç–∞') {
                            document.getElementById('feedPage').classList.add('active');
                        } else if (pageName === '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ') {
                        document.getElementById('favoritesPage').classList.add('active');
                        loadFavorites();
                    } else if (pageName === '–ü—Ä–æ—Ñ–∏–ª—å') {
                        document.getElementById('profilePage').classList.add('active');
                    }
                });
            });
            
            // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–õ–µ–Ω—Ç–∞"
            updateBreadcrumb('–õ–µ–Ω—Ç–∞');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            window.updateBreadcrumb = updateBreadcrumb;
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        window.toggleSaveArticle = function(articleId, buttonElement) {
            console.log('‚≠ê toggleSaveArticle –≤—ã–∑–≤–∞–Ω–∞ –¥–ª—è:', articleId);
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
            const savedArticles = JSON.parse(localStorage.getItem('saved_articles') || '[]');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è
            const existingIndex = savedArticles.findIndex(article => article.id === articleId);
            
            if (existingIndex !== -1) {
                // –£–¥–∞–ª—è–µ–º –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
                savedArticles.splice(existingIndex, 1);
                localStorage.setItem('saved_articles', JSON.stringify(savedArticles));
                
                console.log('‚ùå –°—Ç–∞—Ç—å—è —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:', articleId);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
                if (buttonElement) {
                    buttonElement.textContent = '‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å';
                    buttonElement.classList.remove('saved');
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ —Å —ç—Ç–∏–º ID
                updateAllSaveButtons(articleId, false);
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ', 'info');
                }
                
                // –ï—Å–ª–∏ –º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ, –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë
                const favoritesPage = document.getElementById('favoritesPage');
                if (favoritesPage && favoritesPage.classList.contains('active')) {
                    window.loadFavorites();
                }
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
                // –ò—â–µ–º —Å—Ç–∞—Ç—å—é –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                let article = null;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º VK –ø–æ—Å—Ç—ã
                if (window.cachedVKPosts) {
                    article = window.cachedVKPosts.find(post => post.id === articleId);
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏
                if (!article && window.cachedRSSNews) {
                    article = window.cachedRSSNews.find(news => news.id === articleId);
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏
                if (!article && window.currentJobs) {
                    article = window.currentJobs.find(job => job.id === articleId);
                }
                
                // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –≤ –∫–µ—à–µ, –ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ DOM
                if (!article) {
                    const cardElement = document.querySelector(`[data-article-id="${articleId}"]`);
                    if (cardElement) {
                        const titleElement = cardElement.querySelector('.news-title');
                        const descElement = cardElement.querySelector('.news-description');
                        const imageElement = cardElement.querySelector('.news-image');
                        const sourceElement = cardElement.querySelector('.news-source');
                        const urlElement = cardElement.querySelector('[data-article-url]');
                        const sourceType = cardElement.getAttribute('data-source-type') || 'unknown';
                        const isHighPriority = cardElement.classList.contains('priority-post');
                        
                        // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                        const allImages = Array.from(cardElement.querySelectorAll('.news-image')).map(img => img.src);
                        
                        article = {
                            id: articleId,
                            title: titleElement?.textContent || '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞',
                            description: descElement?.textContent || '',
                            text: descElement?.textContent || '',
                            image: imageElement?.src || null,
                            images: allImages.length > 0 ? allImages : null,
                            source: sourceElement?.textContent?.replace('üì± ', '') || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                            groupName: sourceElement?.textContent?.replace('üì± ', '') || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                            link: urlElement?.getAttribute('data-article-url') || '#',
                            url: urlElement?.getAttribute('data-article-url') || '#',
                            savedAt: new Date().toISOString(),
                            publishedAt: new Date().toISOString(),
                            sourceType: sourceType,
                            isVKPost: sourceType === 'vk',
                            isHighPriority: isHighPriority,
                            category: sourceType === 'vk' ? 'social' : 'tech'
                        };
                        
                        console.log('‚úÖ –°—Ç–∞—Ç—å—è –∏–∑–≤–ª–µ—á–µ–Ω–∞ –∏–∑ DOM:', article);
                    }
                }
                
                if (article) {
                    // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞—Ç—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                    article.savedAt = new Date().toISOString();
                    
                    savedArticles.push(article);
                    localStorage.setItem('saved_articles', JSON.stringify(savedArticles));
                    
                    console.log('‚úÖ –°—Ç–∞—Ç—å—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ:', article);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
                    if (buttonElement) {
                        buttonElement.textContent = '‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ';
                        buttonElement.classList.add('saved');
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ —Å —ç—Ç–∏–º ID
                    updateAllSaveButtons(articleId, true);
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast('‚≠ê –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ', 'success');
                    }
                } else {
                    console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', articleId);
                    if (typeof window.showToast === 'function') {
                        window.showToast('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
                    }
                }
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç—å–∏
        window.updateAllSaveButtons = function(articleId, isSaved) {
            const buttons = document.querySelectorAll(`[onclick*="toggleSaveArticle('${articleId}'"]`);
            buttons.forEach(button => {
                if (isSaved) {
                    button.textContent = '‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ';
                    button.classList.add('saved');
                } else {
                    button.textContent = '‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å';
                    button.classList.remove('saved');
                }
            });
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
        window.loadFavorites = function() {
            console.log('‚≠ê –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏');
            const favoritesFeed = document.getElementById('favoritesFeed');
            const emptyFavorites = document.getElementById('emptyFavorites');
            const savedArticles = JSON.parse(localStorage.getItem('saved_articles') || '[]');
            
            if (savedArticles.length === 0) {
                favoritesFeed.innerHTML = `
                    <div class="empty-favorites-state">
                        <div class="empty-icon">‚≠ê</div>
                        <h3>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π</h3>
                        <p>–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏, –Ω–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É "‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"</p>
                        <button class="btn btn--primary" onclick="showPage('feedPage')">
                            üì∞ –ü–µ—Ä–µ–π—Ç–∏ –∫ –ª–µ–Ω—Ç–µ
                        </button>
                    </div>
                `;
                if (emptyFavorites) {
                    emptyFavorites.classList.remove('hidden');
                }
                console.log('üì≠ –ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π');
            } else {
                if (emptyFavorites) {
                    emptyFavorites.classList.add('hidden');
                }
                
                console.log(`‚≠ê –ù–∞–π–¥–µ–Ω–æ ${savedArticles.length} –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π`);
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                const sortedArticles = savedArticles.sort((a, b) => {
                    const dateA = new Date(a.savedAt || a.publishedAt || 0);
                    const dateB = new Date(b.savedAt || b.publishedAt || 0);
                    return dateB - dateA;
                });
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
                const favoritesHTML = sortedArticles.map((article, index) => {
                    // –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ —É —Å—Ç–∞—Ç—å–∏ –µ—Å—Ç—å ID
                    if (!article.id) {
                        article.id = `favorite_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" –¥–ª—è –ª—É—á—à–µ–≥–æ UX
                    const enhancedArticle = {
                        ...article,
                        isFavorite: true,
                        favoriteIndex: index + 1
                    };
                    
                    return window.createNewsCard(enhancedArticle);
                }).filter(html => html).join('');
                
                // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ –∫—Ä–∞—Å–∏–≤—É—é —Å–µ—Ç–∫—É
                favoritesFeed.innerHTML = `
                    <div class="favorites-header">
                        <h3>üí´ –í–∞—à–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (${sortedArticles.length})</h3>
                        <div class="favorites-actions">
                            <button class="btn btn--secondary btn--small" onclick="window.clearAllFavorites()">
                                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                            </button>
                            <button class="btn btn--secondary btn--small" onclick="window.exportFavorites()">
                                üì§ –≠–∫—Å–ø–æ—Ä—Ç
                            </button>
                        </div>
                    </div>
                    <div class="favorites-grid">
                        ${favoritesHTML}
                    </div>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
                setTimeout(() => {
                    const cards = favoritesFeed.querySelectorAll('.news-card');
                    cards.forEach((card, index) => {
                        card.style.opacity = '0';
                        card.style.transform = 'translateY(20px)';
                        setTimeout(() => {
                            card.style.transition = 'all 0.4s ease';
                            card.style.opacity = '1';
                            card.style.transform = 'translateY(0)';
                        }, index * 100);
                    });
                }, 50);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                setTimeout(() => {
                    sortedArticles.forEach(article => {
                        if (article.id) {
                            updateAllSaveButtons(article.id, true);
                        }
                    });
                }, 500); // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
        window.clearAllFavorites = function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏?')) {
                localStorage.removeItem('saved_articles');
                window.loadFavorites();
                
                if (typeof window.showToast === 'function') {
                    window.showToast('üóëÔ∏è –í—Å–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ —É–¥–∞–ª–µ–Ω—ã', 'success');
                }
                
                console.log('üóëÔ∏è –í—Å–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –æ—á–∏—â–µ–Ω—ã');
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        window.exportFavorites = function() {
            const savedArticles = JSON.parse(localStorage.getItem('saved_articles') || '[]');
            
            if (savedArticles.length === 0) {
                if (typeof window.showToast === 'function') {
                    window.showToast('üì≠ –ù–µ—Ç —Å—Ç–∞—Ç–µ–π –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'warning');
                }
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ç—å—è–º–∏
            const exportData = savedArticles.map((article, index) => {
                return `${index + 1}. ${article.title}\n   ${article.link || article.url || '–ù–µ—Ç —Å—Å—ã–ª–∫–∏'}\n   –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${new Date(article.savedAt || Date.now()).toLocaleDateString('ru-RU')}\n`;
            }).join('\n');
            
            const blob = new Blob([`–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ NewsHub\n–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: ${new Date().toLocaleDateString('ru-RU')}\n\n${exportData}`], 
                { type: 'text/plain;charset=utf-8' });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `newshub-favorites-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            if (typeof window.showToast === 'function') {
                window.showToast('üì§ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ', 'success');
            }
            
            console.log('üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ', savedArticles.length, '–∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π');
        };
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
        function getCachedData(key, maxAge = 15 * 60 * 1000) {
            const cached = localStorage.getItem(key);
            if (!cached) return null;
            
            try {
                const data = JSON.parse(cached);
                const age = Date.now() - data.timestamp;
                
                if (age < maxAge) {
                    console.log(`‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–µ—à –¥–ª—è ${key} (–≤–æ–∑—Ä–∞—Å—Ç: ${Math.round(age/1000)}—Å)`);
                    return data.content;
                } else {
                    console.log(`‚ùå –ö–µ—à —É—Å—Ç–∞—Ä–µ–ª –¥–ª—è ${key}`);
                    localStorage.removeItem(key);
                    return null;
                }
            } catch (e) {
                return null;
            }
        }
        
        function setCachedData(key, content) {
            const data = {
                content: content,
                timestamp: Date.now()
            };
            localStorage.setItem(key, JSON.stringify(data));
            console.log(`üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω –∫–µ—à –¥–ª—è ${key}`);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        async function loadInitialContent(forceRefresh = false) {
            const feedContainer = document.getElementById('feedContainer');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            if (!feedContainer || !window.rssAggregator || !window.newsRenderer) {
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            if (!forceRefresh) {
                const cachedArticles = getCachedData('news_cache');
                if (cachedArticles && cachedArticles.length > 0) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–µ—à
                    window.cachedRSSNews = cachedArticles;
                    
                    window.newsRenderer.renderCards(cachedArticles, feedContainer);
                    window.cachedNewsHTML = feedContainer.innerHTML;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
                    window.updateTabCounter('news', cachedArticles.length);
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast('üì∞ –ù–æ–≤–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –∫–µ—à–∞', 'success');
                    }
                    return;
                }
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ RSS
            window.loadingState.setLoading('rss', true);
            
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º skeleton loading
                feedContainer.innerHTML = window.newsRenderer.renderSkeleton(5);
                if (loadingSpinner) loadingSpinner.classList.remove('hidden');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏
                console.log('üì∞ –ó–∞–≥—Ä—É–∂–∞–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏...');
                let articles = await window.rssAggregator.aggregateNews(50);
                console.log('‚úÖ –ü–æ–ª—É—á–µ–Ω–æ —Å—Ç–∞—Ç–µ–π:', articles.length);
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ —Ç–∏–ø—É –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                const jobFilters = JSON.parse(localStorage.getItem('job_filters') || '{}');
                if (jobFilters.jobType && forceRefresh) {
                    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
                    const jobTypeName = window.CONFIG?.jobTypes?.find(j => j.id === jobFilters.jobType)?.name;
                    if (jobTypeName) {
                        const searchTerms = jobTypeName.toLowerCase().split(' ');
                        articles = articles.filter(article => {
                            const content = (article.title + ' ' + article.description).toLowerCase();
                            return searchTerms.some(term => content.includes(term));
                        });
                    }
                }          
                if (articles && articles.length > 0) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—å–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–µ—à –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ applyQuickFilter
                    window.cachedRSSNews = articles;
                    
                    window.newsRenderer.renderCards(articles, feedContainer);
                    window.cachedNewsHTML = feedContainer.innerHTML;
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
                    setCachedData('news_cache', articles);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
                    window.updateTabCounter('news', articles.length);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ fallback –¥–∞–Ω–Ω—ã–µ
                    const hasFallbackData = articles.some(article => article.isFallback);
                    if (hasFallbackData) {
                        showDemoDataNotification();
                    }
                } else {
                    feedContainer.innerHTML = window.newsRenderer.renderEmptyState();
                }
                
            } catch (error) {
                feedContainer.innerHTML = `
                    <div class="error-state">
                        <div class="error-icon">‚ö†Ô∏è</div>
                        <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
                        <button class="btn btn--primary" onclick="loadInitialContent(true)">
                            –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
                        </button>
                    </div>
                `;
            } finally {
                if (loadingSpinner) loadingSpinner.classList.add('hidden');
                window.loadingState.setLoading('rss', false);
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
        function showDemoDataNotification() {
            const notification = document.createElement('div');
            notification.className = 'demo-notification';
            notification.innerHTML = `
                <div class="demo-notification-content">
                    <div class="demo-icon">üöÄ</div>
                    <div class="demo-text">
                        <h4>–î–µ–º–æ-—Ä–µ–∂–∏–º NewsHub</h4>
                        <p>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑-–∑–∞ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
                    </div>
                    <button class="demo-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 10000);
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–æ–∫-–±–∞—Ä–∞
        function setupDockNavigation() {
            const dockButtons = document.querySelectorAll('.dock-btn');
            const pages = document.querySelectorAll('.page');
            
            // –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü –∫ –Ω–∞–∑–≤–∞–Ω–∏—è–º breadcrumb
            const pageToTitle = {
                'feedPage': '–õ–µ–Ω—Ç–∞',
                'favoritesPage': '–ò–∑–±—Ä–∞–Ω–Ω–æ–µ', 
                'profilePage': '–ü—Ä–æ—Ñ–∏–ª—å'
            };
            
            dockButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    if (targetPage) {
                        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                        pages.forEach(page => page.classList.remove('active'));
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        const targetPageElement = document.getElementById(targetPage);
                        if (targetPageElement) {
                            targetPageElement.classList.add('active');
                        }
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
                        dockButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º breadcrumb
                        if (window.updateBreadcrumb && pageToTitle[targetPage]) {
                            window.updateBreadcrumb(pageToTitle[targetPage]);
                        }
                    }
                });
            });
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function setupSearchAndFilters() {
            // –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞
            const searchToggle = document.getElementById('searchToggle');
            const searchBar = document.getElementById('searchBar');
            
            if (searchToggle && searchBar) {
                searchToggle.addEventListener('click', function() {
                    searchBar.classList.toggle('hidden');
                    if (!searchBar.classList.contains('hidden')) {
                        const searchInput = document.getElementById('searchInput');
                        if (searchInput) {
                            searchInput.focus();
                        }
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –≤ –ø–æ–∏—Å–∫–µ
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.addEventListener('input', function(e) {
                        const query = e.target.value.trim();
                        if (query.length > 2) {
                            performSearch(query);
                        } else if (query.length === 0) {
                            clearSearchResults();
                        }
                    });
                    
                    searchInput.addEventListener('keydown', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            const query = e.target.value.trim();
                            if (query.length > 0) {
                                performSearch(query);
                            }
                        }
                        if (e.key === 'Escape') {
                            searchBar.classList.add('hidden');
                            e.target.value = '';
                            clearSearchResults();
                        }
                    });
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ (RSS –Ω–æ–≤–æ—Å—Ç–∏ + VK –ø–æ—Å—Ç—ã + –≤–∞–∫–∞–Ω—Å–∏–∏)
            async function performSearch(query) {
                const feedContainer = document.getElementById('feedContainer');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <div class="spinner"></div>
                        <h3>–ü–æ–∏—Å–∫ "${query}"...</h3>
                        <p>–ò—â–µ–º –≤ RSS –Ω–æ–≤–æ—Å—Ç—è—Ö, VK –ø–æ—Å—Ç–∞—Ö –∏ –≤–∞–∫–∞–Ω—Å–∏—è—Ö</p>
                    </div>
                `;
                
                let rssResults = [];
                let vkResults = [];
                let jobsResults = [];
                
                // –ü–æ–∏—Å–∫ –≤ RSS –Ω–æ–≤–æ—Å—Ç—è—Ö
                if (window.rssAggregator) {
                    rssResults = window.rssAggregator.searchArticles(query);
                }
                
                // –ü–æ–∏—Å–∫ –≤ VK –ø–æ—Å—Ç–∞—Ö (–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞)
                if (window.rssAggregator) {
                    try {
                        const jobType = window.rssAggregator.detectJobTypeFromQuery(query);
                        if (jobType) {
                            console.log(`üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞: ${jobType}`);
                            const vkPosts = await window.rssAggregator.loadVKPostsForJobType(jobType);
                            // –§–∏–ª—å—Ç—Ä—É–µ–º VK –ø–æ—Å—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É
                            vkResults = vkPosts.filter(post => 
                                post.title.toLowerCase().includes(query.toLowerCase()) ||
                                post.description.toLowerCase().includes(query.toLowerCase())
                            );
                        }
                    } catch (error) {
                        console.warn('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ VK:', error);
                    }
                }
                
                // –ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –Ω–∞ HH.ru
                if (window.hhApi) {
                    try {
                        const hhResults = await window.hhApi.searchVacancies({
                            text: query,
                            per_page: 20
                        });
                        jobsResults = window.hhApi.transformVacancies(hhResults.items || []);
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π:', error);
                    }
                }
                
                const totalResults = rssResults.length + vkResults.length + jobsResults.length;
                
                if (totalResults > 0) {
                    displaySearchResults([...rssResults, ...vkResults], jobsResults, query);
                    console.log(`üîç –ù–∞–π–¥–µ–Ω–æ: ${rssResults.length} RSS, ${vkResults.length} VK, ${jobsResults.length} –≤–∞–∫–∞–Ω—Å–∏–π`);
                } else {
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                            <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "${query}" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</p>
                            <button class="btn btn--primary" onclick="clearSearchResults()">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ª–µ–Ω—Ç–µ</button>
                        </div>
                    `;
                }
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ (–Ω–æ–≤–æ—Å—Ç–∏ + –≤–∞–∫–∞–Ω—Å–∏–∏)
            function displaySearchResults(newsResults, jobsResults, query) {
                const feedContainer = document.getElementById('feedContainer');
                if (!feedContainer) return;
                
                const totalResults = newsResults.length + jobsResults.length;
                
                let html = `
                    <div class="search-results-header">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${query}"</h3>
                        <p style="color: var(--text-secondary); margin: 0.5rem 0;">
                            –ù–∞–π–¥–µ–Ω–æ: ${newsResults.length} –Ω–æ–≤–æ—Å—Ç–µ–π, ${jobsResults.length} –≤–∞–∫–∞–Ω—Å–∏–π
                        </p>
                        <button class="btn btn--outline btn--sm" onclick="clearSearchResults()">
                            –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ª–µ–Ω—Ç–µ
                        </button>
                    </div>
                `;
                
                feedContainer.innerHTML = html;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏
                if (newsResults.length > 0 && window.newsRenderer) {
                    const newsSection = document.createElement('div');
                    newsSection.innerHTML = '<h4 style="margin: 2rem 0 1rem 0; padding-left: 1rem;">üì∞ –ù–æ–≤–æ—Å—Ç–∏</h4>';
                    feedContainer.appendChild(newsSection);
                    window.newsRenderer.renderCards(newsResults.slice(0, 20), feedContainer);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏
                if (jobsResults.length > 0) {
                    const jobsSection = document.createElement('div');
                    jobsSection.innerHTML = '<h4 style="margin: 2rem 0 1rem 0; padding-left: 1rem;">üíº –í–∞–∫–∞–Ω—Å–∏–∏</h4>';
                    feedContainer.appendChild(jobsSection);
                    
                    // –†–µ–Ω–¥–µ—Ä–∏–º –≤–∞–∫–∞–Ω—Å–∏–∏ —á–µ—Ä–µ–∑ window.displayJobs
                    const jobsContainer = document.createElement('div');
                    feedContainer.appendChild(jobsContainer);
                    
                    let jobsHTML = '<div class="jobs-grid">';
                    jobsResults.forEach(job => {
                        jobsHTML += `
                            <div class="job-card-compact" data-job-id="${job.id}" onclick="window.openJobDetails('${job.id}')">
                                ${job.companyLogo ? 
                                    `<img src="${job.companyLogo}" alt="${job.company}" class="job-logo">` 
                                    : '<div class="job-logo-placeholder">üíº</div>'}
                                <h4 class="job-title">${job.title}</h4>
                                <p class="job-company">${job.company}</p>
                                <div class="job-salary">${job.salary}</div>
                                <div class="job-location">üìç ${job.location}</div>
                                <div class="job-badge">${job.schedule === 'remote' ? 'üè† –£–¥–∞–ª–µ–Ω–∫–∞' : job.experience}</div>
                            </div>
                        `;
                    });
                    jobsHTML += '</div>';
                    jobsContainer.innerHTML = jobsHTML;
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –¥–ª—è –º–æ–¥–∞–ª–∫–∏
                    window.currentJobs = jobsResults;
                }
            }
            
            // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
            function clearSearchResults() {
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.value = '';
                }
                
                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –ª–µ–Ω—Ç—É
                if (window.rssAggregator && window.newsRenderer) {
                    const feedContainer = document.getElementById('feedContainer');
                    if (feedContainer) {
                        feedContainer.innerHTML = '';
                        window.newsRenderer.renderCards(window.rssAggregator.articles, feedContainer);
                    }
                }
            }
            
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            const settingsToggle = document.getElementById('settingsToggle');
            const settingsDropdown = document.getElementById('settingsDropdown');
            
            if (settingsToggle && settingsDropdown) {
                settingsToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º dropdown –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π
                    const rect = settingsToggle.getBoundingClientRect();
                    const isMobile = window.innerWidth <= 768;
                    
                    if (isMobile) {
                        // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - fixed –ø–æ —Ü–µ–Ω—Ç—Ä—É
                        settingsDropdown.style.position = 'fixed';
                        settingsDropdown.style.top = '70px';
                        settingsDropdown.style.left = '1rem';
                        settingsDropdown.style.right = '1rem';
                    } else {
                        // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ - –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π
                        settingsDropdown.style.position = 'fixed';
                        settingsDropdown.style.top = (rect.bottom + 8) + 'px';
                        settingsDropdown.style.right = (window.innerWidth - rect.right) + 'px';
                        settingsDropdown.style.left = 'auto';
                    }
                    
                    settingsDropdown.classList.toggle('show');
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
                document.addEventListener('click', function(e) {
                    if (!settingsDropdown.contains(e.target) && !settingsToggle.contains(e.target)) {
                        settingsDropdown.classList.remove('show');
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
                const manageSourcesBtn = document.getElementById('manageSourcesBtn');
                if (manageSourcesBtn) {
                    manageSourcesBtn.addEventListener('click', function() {
                        const rssModal = document.getElementById('rssSourcesModal');
                        if (rssModal) {
                            rssModal.classList.remove('hidden');
                            document.body.classList.add('modal-open');
                            loadRssSources();
                        }
                        settingsDropdown.classList.remove('show');
                    });
                }
                
                const setupOpenAIBtn = document.getElementById('setupOpenAIBtn');
                if (setupOpenAIBtn) {
                    setupOpenAIBtn.addEventListener('click', function() {
                        console.log('ü§ñ –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ OpenAI –Ω–∞—Å—Ç—Ä–æ–µ–∫');
                        
                        // –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown –Ω–∞—Å—Ç—Ä–æ–µ–∫
                        const settingsDropdown = document.getElementById('settingsDropdown');
                        if (settingsDropdown) {
                            settingsDropdown.classList.remove('active');
                        }
                        
                        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                        const openaiModal = document.getElementById('openaiModal');
                        if (openaiModal) {
                            openaiModal.classList.remove('hidden');
                            document.body.classList.add('modal-open');
                            
                            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å API –∫–ª—é—á–∞
                            if (typeof loadApiKeyStatus === 'function') {
                                loadApiKeyStatus();
                            }
                        } else {
                            console.error('‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ openaiModal –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
                        }
                    });
                }
                
                const updateFrequency = document.getElementById('updateFrequency');
                if (updateFrequency) {
                    updateFrequency.addEventListener('change', function() {
                        const frequency = this.value;
                        localStorage.setItem('update_frequency', frequency);
                        if (typeof window.showToast === 'function') {
                            window.showToast('–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞', 'success');
                        }
                    });
                }
            }
            
            // –ö–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ - –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —Ä–∞–∑
            function initializeFiltersButton() {
                const filtersToggle = document.getElementById('filtersToggle');
                const filtersModal = document.getElementById('filtersModal');
                
                console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:', {
                    filtersToggle: !!filtersToggle,
                    filtersModal: !!filtersModal
                });
                
                if (filtersToggle && filtersModal) {
                    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                    const newFiltersToggle = filtersToggle.cloneNode(true);
                    filtersToggle.parentNode.replaceChild(newFiltersToggle, filtersToggle);
                    
                    newFiltersToggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('üîß –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã');
                        filtersModal.classList.remove('hidden');
                        
                        // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        setTimeout(() => {
                            setupJobFilters();
                        }, 100);
                    });
                    
                    console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
                } else {
                    console.warn('‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤');
                }
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
            initializeFiltersButton();
            
            // –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
            const editProfileBtn = document.getElementById('editProfileBtn');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', function() {
                    window.openEditProfile();
                });
            }
            
            // –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', async function() {
                    console.log('üîÑ Refresh button clicked - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ');
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                    const originalText = refreshBtn.innerHTML;
                    
                    // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä
                    refreshBtn.disabled = true;
                    refreshBtn.innerHTML = '<span class="spinner"></span> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...';
                    
                    try {
                        const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                        console.log('üéØ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –≤–∫–ª–∞–¥–∫—É:', activeFilter);
                        
                        // –û—á–∏—â–∞–µ–º –∫–µ—à–∏ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                        if (activeFilter === 'jobs') {
                            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏...');
                            window.currentJobs = null;
                            await window.loadJobsWithFilters(true);
                        } else if (activeFilter === 'all') {
                            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç...');
                            window.cachedRSSNews = null;
                            window.cachedVKPosts = null;
                            window.currentJobs = null;
                            await loadAllContent();
                        } else if (activeFilter === 'vk-news') {
                            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º VK –Ω–æ–≤–æ—Å—Ç–∏...');
                            window.cachedVKPosts = null;
                            await loadVKPosts();
                        } else if (activeFilter === 'news') {
                            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏...');
                            window.cachedRSSNews = null;
                            await loadInitialContent(true);
                        }
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
                        if (typeof window.showToast === 'function') {
                            window.showToast('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!', 'success');
                        }
                        
                        console.log('‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ');
                    } catch (error) {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', error);
                        if (typeof window.showToast === 'function') {
                            window.showToast('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞', 'error');
                        }
                    } finally {
                        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                        refreshBtn.disabled = false;
                        refreshBtn.innerHTML = originalText;
                    }
                });
            }
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
            let autoRefreshInterval;
            
            function startAutoRefresh() {
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –µ—Å–ª–∏ –µ—Å—Ç—å
                if (autoRefreshInterval) {
                    clearInterval(autoRefreshInterval);
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (15 –º–∏–Ω—É—Ç = 900000 –º—Å)
                autoRefreshInterval = setInterval(async () => {
                    console.log('‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç');
                    
                    try {
                        const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ —Å–≤–µ—Ä–Ω—É–ª –≤–∫–ª–∞–¥–∫—É)
                        if (!document.hidden) {
                            console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏:', activeFilter);
                            
                            if (activeFilter === 'jobs') {
                                await window.loadJobsWithFilters(true);
                            } else if (activeFilter === 'all') {
                                await loadAllContent();
                            } else if (activeFilter === 'vk-news') {
                                await loadVKPosts();
                            } else if (activeFilter === 'news') {
                                await loadInitialContent(true);
                            }
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                            if (typeof window.showToast === 'function') {
                                window.showToast('üîÑ –ö–æ–Ω—Ç–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω', 'info');
                            }
                        } else {
                            console.log('‚è∏Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ');
                        }
                    } catch (error) {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', error);
                    }
                }, 15 * 60 * 1000); // 15 –º–∏–Ω—É—Ç
                
                console.log('‚è∞ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)');
            }
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            startAutoRefresh();
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('beforeunload', () => {
                if (autoRefreshInterval) {
                    clearInterval(autoRefreshInterval);
                }
            });
            
            // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
            window.updateTabIndicator = function() {
                const activeTab = document.querySelector('.tab-button-modern.active');
                const indicator = document.getElementById('tabIndicator');
                
                if (activeTab && indicator) {
                    const rect = activeTab.getBoundingClientRect();
                    const containerRect = activeTab.parentElement.getBoundingClientRect();
                    const left = rect.left - containerRect.left;
                    const width = rect.width;
                    
                    indicator.style.left = `${left}px`;
                    indicator.style.width = `${width}px`;
                }
            };

            // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—á–µ—Ç—á–∏–∫–æ–≤
            window.initializeTabCounters = function() {
                window.updateTabCounter('all', 0);
                window.updateTabCounter('news', 0);
                window.updateTabCounter('vk-news', 0);
                window.updateTabCounter('jobs', 0);
            };

            // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –≤–∫–ª–∞–¥–∫–∏
            window.updateTabCounter = function(tabName, count) {
                const counter = document.getElementById(`counter-${tabName}`);
                if (counter) {
                    counter.textContent = count;
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞
                    counter.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        counter.style.transform = 'scale(1)';
                    }, 200);
                }
            };

            // –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª–∞–¥–æ–∫
            const modernTabs = document.querySelectorAll('.tab-button-modern');
            modernTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö
                    modernTabs.forEach(t => t.classList.remove('active'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–º—É
                    this.classList.add('active');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
                    window.updateTabIndicator();
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä
                    const filter = this.dataset.filter;
                    console.log('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', filter);
                    applyQuickFilter(filter);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
            setTimeout(() => {
                window.updateTabIndicator();
                window.initializeTabCounters();
            }, 100);

            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    console.log('üé® –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã');
                    if (typeof toggleTheme === 'function') {
                        toggleTheme();
                    } else {
                        console.error('‚ùå –§—É–Ω–∫—Ü–∏—è toggleTheme –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    }
                });
            }
            
            // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç–µ–º—ã
            function loadSavedTheme() {
                const savedTheme = localStorage.getItem('theme');
                const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                
                const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
                
                document.documentElement.setAttribute('data-theme', theme);
                console.log(`üé® –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Ç–µ–º–∞: ${theme}`);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
            loadSavedTheme();
            document.addEventListener('click', function(e) {
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
                if (e.target.classList.contains('modal-backdrop') || e.target.classList.contains('modal-close')) {
                    const modal = e.target.closest('.modal');
                    if (modal) {
                        console.log(' –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:', modal.id);
                        modal.classList.add('hidden');
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–∫-–±–∞—Ä –æ–±—Ä–∞—Ç–Ω–æ
                        document.body.classList.remove('modal-open');
                    }
                }
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ data-modal –∞—Ç—Ä–∏–±—É—Ç—É
                if (e.target.hasAttribute('data-modal')) {
                    const modalId = e.target.getAttribute('data-modal');
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        console.log('üîí –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ data-modal:', modalId);
                        modal.classList.add('hidden');
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–∫-–±–∞—Ä –æ–±—Ä–∞—Ç–Ω–æ
                        document.body.classList.remove('modal-open');
                    }
                }
            });
            
            // –°–∫—Ä—ã—Ç–∏–µ –¥–æ–∫-–±–∞—Ä–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const modal = mutation.target;
                        if (modal.classList.contains('modal')) {
                            if (!modal.classList.contains('hidden')) {
                                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ - —Å–∫—Ä—ã–≤–∞–µ–º –¥–æ–∫-–±–∞—Ä
                                document.body.classList.add('modal-open');
                            } else {
                                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                                const openModals = document.querySelectorAll('.modal:not(.hidden)');
                                if (openModals.length === 0) {
                                    // –í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–∫-–±–∞—Ä
                                    document.body.classList.remove('modal-open');
                                }
                            }
                        }
                    }
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à–∏ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const openModal = document.querySelector('.modal:not(.hidden)');
                    if (openModal) {
                        console.log('üîê –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ Escape:', openModal.id);
                        openModal.classList.add('hidden');
                        document.body.classList.remove('modal-open');
                    }
                }
            });
            
            // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –≤—Å–µ–º–∏ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
            document.querySelectorAll('.modal').forEach(modal => {
                observer.observe(modal, { attributes: true, attributeFilter: ['class'] });
            });
            
            document.addEventListener('click', function(e) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "—á–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é"
                if (e.target.closest('.read-more-btn')) {
                    const btn = e.target.closest('.read-more-btn');
                    const articleId = btn.getAttribute('data-article-id');
                    if (articleId) {
                        openArticleModal(articleId);
                    }
                }
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –Ω–æ–≤–æ—Å—Ç–∏ (—Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ newsCardRenderer)
                // –≠—Ç–æ—Ç –∫–æ–¥ –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
            });
        }
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
        window.cachedNewsHTML = '';
        
        // –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
        window.loadingState = {
            rss: false,
            vk: false,
            jobs: false,
            
            setLoading(type, isLoading) {
                this[type] = isLoading;
                this.updateUI();
            },
            
            isAnyLoading() {
                return this.rss || this.vk || this.jobs;
            },
            
            updateUI() {
                const feedContainer = document.getElementById('feedContainer');
                if (!feedContainer) return;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
                if (this.isAnyLoading()) {
                    const loadingTypes = [];
                    if (this.rss) loadingTypes.push('RSS –Ω–æ–≤–æ—Å—Ç–∏');
                    if (this.vk) loadingTypes.push('VK –ø–æ—Å—Ç—ã');
                    if (this.jobs) loadingTypes.push('–í–∞–∫–∞–Ω—Å–∏–∏');
                    
                    const loadingText = loadingTypes.join(' + ');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –ø—É—Å—Ç–æ–π –∏–ª–∏ —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞
                    if (feedContainer.innerHTML.includes('spinner') || feedContainer.children.length === 0) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <div class="spinner"></div>
                                <h3>–ó–∞–≥—Ä—É–∂–∞–µ–º ${loadingText}...</h3>
                                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
                            </div>
                        `;
                    }
                } else {
                    // –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, –æ—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                    feedContainer.innerHTML = '';
                }
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
        window.toggleTheme = function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            console.log(`üé® –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç–µ–º—É —Å ${currentTheme || 'light'} –Ω–∞ ${newTheme}`);
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏
            const lightIcon = document.querySelector('.theme-icon-light');
            const darkIcon = document.querySelector('.theme-icon-dark');
            
            if (newTheme === 'dark') {
                if (lightIcon) lightIcon.style.display = 'none';
                if (darkIcon) darkIcon.style.display = 'block';
            } else {
                if (lightIcon) lightIcon.style.display = 'block';
                if (darkIcon) darkIcon.style.display = 'none';
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            if (typeof window.showToast === 'function') {
                const themeText = newTheme === 'dark' ? '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
                window.showToast(`üé® ${themeText} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞`, 'success');
            }
        };

        
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –∫–µ—à–∞
        function displayMixedContentFromCache() {
            const feedContainer = document.getElementById('feedContainer');
            
            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞
            const allItems = [];
            
            // –î–æ–±–∞–≤–ª—è–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏
            if (window.cachedRSSNews && window.cachedRSSNews.length > 0) {
                allItems.push(...window.cachedRSSNews);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º VK –ø–æ—Å—Ç—ã
            if (window.cachedVKPosts && window.cachedVKPosts.length > 0) {
                allItems.push(...window.cachedVKPosts);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏
            if (window.currentJobs && window.currentJobs.length > 0) {
                allItems.push(...window.currentJobs);
            }
            
            if (allItems.length === 0) {
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>üì≠ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –∫–µ—à–µ</h3>
                        <p>–ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ–∂–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</p>
                    </div>
                `;
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
            allItems.sort((a, b) => {
                const dateA = new Date(a.publishedAt || a.published_at || a.date || Date.now());
                const dateB = new Date(b.publishedAt || b.published_at || b.date || Date.now());
                return dateB - dateA;
            });
            
            console.log('üì¶ –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –∫–µ—à–∞:', allItems.length, '—ç–ª–µ–º–µ–Ω—Ç–æ–≤');
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            displayMixedContent(allItems);
        }
        
        // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function applyQuickFilter(filter) {
            const feedContainer = document.getElementById('feedContainer');
            
            console.log('üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞:', filter);
            
            // –í–ê–ñ–ù–û: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
            console.log('üßπ –û—á–∏—â–∞–µ–º feedContainer –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞:', filter);
            window.clearFeedContainer();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
            const currentActiveFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
            if (currentActiveFilter && currentActiveFilter !== filter) {
                saveCurrentTabState(currentActiveFilter, feedContainer);
            }
            
            // –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let hasDisplayedContent = false;
            
            // –î–ª—è "–í—Å—ë" - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –∫–µ—à–∞
            if (filter === 'all') {
                if (window.cachedRSSNews?.length > 0 || window.cachedVKPosts?.length > 0 || window.currentJobs?.length > 0) {
                    console.log('üìã –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç');
                    displayMixedContentFromCache();
                    hasDisplayedContent = true;
                }
            }
            
            // –î–ª—è RSS –Ω–æ–≤–æ—Å—Ç–µ–π
            else if (filter === 'news') {
                if (window.cachedRSSNews && window.cachedRSSNews.length > 0) {
                    console.log('üì∞ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ RSS –Ω–æ–≤–æ—Å—Ç–∏:', window.cachedRSSNews.length);
                    
                    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º RSS –Ω–æ–≤–æ—Å—Ç–µ–π
                    feedContainer.innerHTML = '';
                    feedContainer.style.display = 'block';
                    feedContainer.style.visibility = 'visible';
                    
                    displayRSSNews(window.cachedRSSNews, feedContainer);
                    hasDisplayedContent = true;
                } else {
                    // –ï—Å–ª–∏ –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Ö
                    console.log('üì∞ –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö RSS –Ω–æ–≤–æ—Å—Ç–µ–π, –∑–∞–≥—Ä—É–∂–∞–µ–º...');
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üì∞ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏...</h3>
                            <div class="spinner"></div>
                        </div>
                    `;
                    if (typeof loadInitialContent === 'function') {
                        loadInitialContent(false);
                    }
                    hasDisplayedContent = true; // –ü–æ–∫–∞–∑–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É
                }
            }
            
            // –î–ª—è VK –Ω–æ–≤–æ—Å—Ç–µ–π
            else if (filter === 'vk-news') {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
                const savedFilters = JSON.parse(localStorage.getItem('job_filters') || '{}');
                const jobType = savedFilters.jobType;
                
                if (window.cachedVKPosts && window.cachedVKPosts.length > 0) {
                    console.log('üì± –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ VK –ø–æ—Å—Ç—ã:', window.cachedVKPosts.length);
                    
                    // –í–ê–ñ–ù–û: –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º VK –ø–æ—Å—Ç–æ–≤
                    feedContainer.innerHTML = '';
                    feedContainer.style.display = 'block';
                    feedContainer.style.visibility = 'visible';
                    
                    window.displayVKPosts(window.cachedVKPosts, feedContainer);
                    hasDisplayedContent = true;
                } else {
                    // –ï—Å–ª–∏ –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Ö
                    console.log('üì± –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö VK –ø–æ—Å—Ç–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º...');
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã...</h3>
                            <div class="spinner"></div>
                        </div>
                    `;
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
                    if (jobType && typeof window.loadVKPostsForSelectedJobType === 'function') {
                        console.log('üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –¥–ª—è —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏:', jobType);
                        window.loadVKPostsForSelectedJobType(jobType);
                    } else if (typeof window.loadVKPosts === 'function') {
                        console.log('üì± –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—â–∏–µ VK –ø–æ—Å—Ç—ã');
                        window.loadVKPosts();
                    }
                    hasDisplayedContent = true; // –ü–æ–∫–∞–∑–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É
                }
            }
            
            // –î–ª—è –≤–∞–∫–∞–Ω—Å–∏–π
            else if (filter === 'jobs') {
                if (window.currentJobs && window.currentJobs.length > 0) {
                    console.log('üíº –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏:', window.currentJobs.length);
                    
                    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∞–∫–∞–Ω—Å–∏–π
                    feedContainer.innerHTML = '';
                    feedContainer.style.display = 'block';
                    feedContainer.style.visibility = 'visible';
                    
                    window.displayJobs(window.currentJobs, false);
                    hasDisplayedContent = true;
                } else {
                    // –ï—Å–ª–∏ –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                    console.log('üíº –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É...');
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üíº –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏...</h3>
                            <div class="spinner"></div>
                        </div>
                    `;
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
                    if (typeof window.loadJobsWithFilters === 'function') {
                        setTimeout(() => {
                            console.log('üíº –ó–∞–ø—É—Å–∫–∞–µ–º loadJobsWithFilters –∏–∑ applyQuickFilter');
                            window.loadJobsWithFilters(false);
                            
                            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                            setTimeout(() => {
                                const container = document.getElementById('feedContainer');
                                if (container && container.innerHTML.includes('–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏')) {
                                    console.log('üíº –í–∞–∫–∞–Ω—Å–∏–∏ –≤—Å–µ –µ—â–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º...');
                                    if (window.currentJobs && window.currentJobs.length > 0) {
                                        console.log('üíº –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ fallback');
                                        window.displayJobsSimple(window.currentJobs);
                                    }
                                }
                            }, 1000);
                        }, 100);
                    }
                    hasDisplayedContent = true; // –ü–æ–∫–∞–∑–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É
                }
            }
            
            // –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –∏–∑ –∫–µ—à–∞, –≤—ã—Ö–æ–¥–∏–º (–Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏)
            if (hasDisplayedContent) {
                console.log('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –∏–∑ –∫–µ—à–∞ –∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è');
                return;
            }
            
            // –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ï—Å–ª–∏ –Ω–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–µ
            console.log(`üîÑ –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∫–ª–∞–¥–∫–∏: ${filter}, –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–µ`);
            
            // –î–ª—è "–ù–æ–≤–æ—Å—Ç–∏" - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ RSS –Ω–æ–≤–æ—Å—Ç–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
            if (filter === 'news') {
                if (window.cachedRSSNews && window.cachedRSSNews.length > 0) {
                    console.log('üì∞ –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ RSS –Ω–æ–≤–æ—Å—Ç–∏:', window.cachedRSSNews.length);
                    displayRSSNews(window.cachedRSSNews, feedContainer);
                } else if (window.cachedNewsHTML) {
                    feedContainer.innerHTML = window.cachedNewsHTML;
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ RSS –Ω–æ–≤–æ—Å—Ç–∏ (–Ω–µ VK)
                    const articles = feedContainer.querySelectorAll('.news-card');
                    articles.forEach(article => {
                        const sourceType = article.dataset.sourceType;
                        if (sourceType !== 'vk' && !article.classList.contains('job-card')) {
                            article.style.display = 'block';
                            article.style.animation = 'fadeInUp 0.3s ease';
                        } else {
                            article.style.display = 'none';
                        }
                    });
                } else {
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üì∞ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏...</h3>
                            <div class="spinner"></div>
                        </div>
                    `;
                }
                return;
            }
            
            // –î–ª—è "–ù–æ–≤–æ—Å—Ç–∏ –∏–∑ –í–ö" - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ VK –ø–æ—Å—Ç—ã
            if (filter === 'vk-news') {
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ VK –ø–æ—Å—Ç—ã
                if (window.cachedVKPosts && window.cachedVKPosts.length > 0) {
                    console.log('üì± –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ VK –ø–æ—Å—Ç—ã:', window.cachedVKPosts.length);
                    if (typeof window.displayVKPosts === 'function') {
                        window.displayVKPosts(window.cachedVKPosts, feedContainer);
                    } else {
                        console.error('‚ùå window.displayVKPosts –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞');
                    }
                    return;
                } else {
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã...</h3>
                            <div class="spinner"></div>
                        </div>
                    `;
                    // –ü–æ–ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å VK –ø–æ—Å—Ç—ã
                    if (typeof window.loadVKPosts === 'function') {
                        window.loadVKPosts();
                    }
                }
                return;
            }
            
            // –î–ª—è "–í—Å—ë" - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            if (filter === 'all') {
                console.log('üåü –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç...');
                console.log('üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', {
                    rssNews: window.cachedRSSNews?.length || 0,
                    vkPosts: window.cachedVKPosts?.length || 0,
                    jobs: window.currentJobs?.length || 0
                });
                
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                const allItems = [];
                
                // –î–æ–±–∞–≤–ª—è–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏
                if (window.cachedRSSNews && window.cachedRSSNews.length > 0) {
                    window.cachedRSSNews.forEach(item => {
                        allItems.push({...item, type: 'news', sourceType: 'rss'});
                    });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º VK –ø–æ—Å—Ç—ã
                if (window.cachedVKPosts && window.cachedVKPosts.length > 0) {
                    window.cachedVKPosts.forEach(item => {
                        allItems.push({...item, type: 'news', sourceType: 'vk', isVKPost: true});
                    });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏
                if (window.currentJobs && window.currentJobs.length > 0) {
                    window.currentJobs.forEach(item => {
                        allItems.push({...item, type: 'job'});
                    });
                }
                
                console.log('üì¶ –°–æ–±—Ä–∞–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:', allItems.length);
                
                if (allItems.length > 0) {
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
                    displayMixedContent(allItems);
                } else {
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üåü –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç...</h3>
                            <div class="spinner"></div>
                            <p style="color: #6c757d; margin-top: 1rem;">
                                –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </p>
                        </div>
                    `;
                }
                return;
            }
            
            // –ï—Å–ª–∏ –Ω–µ –ø–æ–ø–∞–ª–∏ –Ω–∏ –≤ –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
            console.log('üì∞ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é...');
            if (window.cachedRSSNews && window.cachedRSSNews.length > 0) {
                displayRSSNews(window.cachedRSSNews, feedContainer);
            } else {
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>üì∞ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏...</h3>
                        <div class="spinner"></div>
                    </div>
                `;
            }
        }
        
        // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        async function loadAllContent() {
            const feedContainer = document.getElementById('feedContainer');
            const savedFilters = JSON.parse(localStorage.getItem('job_filters') || '{}');
            const jobType = savedFilters.jobType;
            
            let allContent = [];
            let hasRSS = false, hasVK = false, hasJobs = false;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å
            if (window.rssAggregator) hasRSS = true;
            if (jobType && window.rssAggregator) hasVK = true;
            if (window.hhApi) hasJobs = true;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
            window.loadingState.setLoading('rss', hasRSS);
            window.loadingState.setLoading('vk', hasVK);
            window.loadingState.setLoading('jobs', hasJobs);
            
            try {
                // 1. –ó–∞–≥—Ä—É–∂–∞–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏
                if (hasRSS) {
                    console.log('üì∞ –ó–∞–≥—Ä—É–∂–∞–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏...');
                    const rssNews = await window.rssAggregator.aggregateNews();
                    allContent = [...allContent, ...rssNews];
                    
                    // –ö–µ—à–∏—Ä—É–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                    window.cachedRSSNews = rssNews;
                    
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${rssNews.length} RSS –Ω–æ–≤–æ—Å—Ç–µ–π`);
                    window.loadingState.setLoading('rss', false);
                }
                
                // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã
                if (hasVK) {
                    console.log(`üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –¥–ª—è —Ç–∏–ø–∞: ${jobType}`);
                    const vkPosts = await window.rssAggregator.loadVKPostsForJobType(jobType);
                    allContent = [...allContent, ...vkPosts];
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vkPosts.length} VK –ø–æ—Å—Ç–æ–≤`);
                    window.loadingState.setLoading('vk', false);
                }
                
                // 3. –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏
                if (hasJobs) {
                    console.log('üíº –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏...');
                    const jobsData = await window.hhApi.searchVacancies({
                        text: jobType ? window.CONFIG.jobTypes.find(j => j.id === jobType)?.name || '' : '',
                        area: savedFilters.city || '1',
                        per_page: 20
                    });
                    const jobs = window.hhApi.transformVacancies(jobsData.items || []);
                    allContent = [...allContent, ...jobs];
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${jobs.length} –≤–∞–∫–∞–Ω—Å–∏–π`);
                    window.loadingState.setLoading('jobs', false);
                }
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
                if (allContent.length > 0) {
                    displayMixedContent(allContent);
                    console.log(`üéâ –í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${allContent.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤`);
                } else {
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>üòî –ù–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                            <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                            <button class="btn btn--primary" onclick="loadAllContent()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:', error);
                window.loadingState.setLoading('rss', false);
                window.loadingState.setLoading('vk', false);
                window.loadingState.setLoading('jobs', false);
                
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑</p>
                        <button class="btn btn--primary" onclick="loadAllContent()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
                    </div>
                `;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        function displayMixedContent(items) {
            const feedContainer = document.getElementById('feedContainer');
            if (!feedContainer || !items.length) return;
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞)
            const sortedItems = items.sort((a, b) => {
                const dateA = new Date(a.publishedAt || a.published_at || 0);
                const dateB = new Date(b.publishedAt || b.published_at || 0);
                return dateB - dateA;
            });
            
            const html = sortedItems.map(item => {
                if (item.type === 'job') {
                    return createJobCard(item);
                } else {
                    return createNewsCard(item);
                }
            }).join('');
            
            // –î–ª—è —Å–º–µ—à–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—É—é —Å–µ—Ç–∫—É
            feedContainer.innerHTML = `<div class="mixed-content-grid">${html}</div>`;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            const cards = feedContainer.querySelectorAll('.news-card, .job-card-compact');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.3s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 50);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–í—Å—ë"
            window.updateTabCounter('all', items.length);
        }
        
        // –î–µ–º–æ-–≤–∞–∫–∞–Ω—Å–∏–∏ –∏ —Å—Ç–∞—Ä—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —É–¥–∞–ª–µ–Ω—ã - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–π HH.ru API —Å —Å–µ—Ç–∫–æ–π
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å—Ç–∞—Ç—å–∏
        window.openArticleModal = function(articleId) {
            console.log('üîç –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å—Ç–∞—Ç—å–∏:', articleId);
            const modal = document.getElementById('articleModal');
            const article = window.findArticleById(articleId);
            
            console.log('üìÑ –ù–∞–π–¥–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è:', article);
            
            if (!article) {
                console.error('‚ùå –°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:', articleId);
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç—å–∏
            modal.dataset.currentArticleId = articleId;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã–º–∏
            document.getElementById('articleModalTitle').textContent = article.title || article.name;
            
            // –î–ª—è –≤–∞–∫–∞–Ω—Å–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
            if (article.type === 'job' || article.id?.startsWith('hh_')) {
                document.getElementById('articleModalIcon').textContent = 'üíº';
                document.getElementById('articleModalSource').textContent = article.employer?.name || 'HeadHunter';
                document.getElementById('articleModalTime').textContent = formatTimeAgo(article.published_at || article.publishedAt);
                document.getElementById('articleModalContent').innerHTML = `
                    <p><strong>–ö–æ–º–ø–∞–Ω–∏—è:</strong> ${article.employer?.name || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</p>
                    <p><strong>–ó–∞—Ä–ø–ª–∞—Ç–∞:</strong> ${article.salary?.from ? `–æ—Ç ${article.salary.from}` : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'} ${article.salary?.currency || ''}</p>
                    <p><strong>–û–ø—ã—Ç:</strong> ${article.experience?.name || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    <p><strong>–ó–∞–Ω—è—Ç–æ—Å—Ç—å:</strong> ${article.employment?.name || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</p>
                    <p><strong>–ì—Ä–∞—Ñ–∏–∫:</strong> ${article.schedule?.name || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                    ${article.snippet?.requirement ? `<p><strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> ${article.snippet.requirement}</p>` : ''}
                    ${article.snippet?.responsibility ? `<p><strong>–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:</strong> ${article.snippet.responsibility}</p>` : ''}
                `;
                document.getElementById('articleModalLink').href = article.alternate_url || article.link;
            } else {
                // –î–ª—è —Å—Ç–∞—Ç–µ–π –∏ –ø–æ—Å—Ç–æ–≤
                document.getElementById('articleModalIcon').textContent = getSourceIcon(article.source?.category || article.category);
                document.getElementById('articleModalSource').textContent = article.source?.name || article.source || article.groupName || '–ò—Å—Ç–æ—á–Ω–∏–∫';
                document.getElementById('articleModalTime').textContent = formatTimeAgo(article.publishedAt || article.publishedDate || article.date);
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
                let contentHTML = '';
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
                const imageUrl = article.image || article.photo || article.thumbnail;
                if (imageUrl && typeof imageUrl === 'string' && imageUrl.startsWith('http')) {
                    contentHTML += `
                        <div class="article-modal-image">
                            <img src="${imageUrl}" alt="${article.title}" 
                                 style="width: 100%; max-height: 500px; object-fit: contain; border-radius: 12px; margin-bottom: 1.5rem;"
                                 onerror="this.style.display='none'">
                        </div>
                    `;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Å—Å–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –µ—Å–ª–∏ –µ—Å—Ç—å (–¥–ª—è VK –ø–æ—Å—Ç–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–æ—Ç–æ)
                if (article.images && Array.isArray(article.images) && article.images.length > 0) {
                    contentHTML += '<div class="article-modal-images" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-bottom: 1.5rem;">';
                    article.images.forEach((img, index) => {
                        if (img && typeof img === 'string' && img.startsWith('http')) {
                            contentHTML += `
                                <img src="${img}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}" 
                                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; cursor: pointer;"
                                     onclick="window.open('${img}', '_blank')"
                                     onerror="this.style.display='none'">
                            `;
                        }
                    });
                    contentHTML += '</div>';
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
                const description = article.description || article.text || '–ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç—å–∏ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —Å —Å–∞–π—Ç–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.';
                contentHTML += `<div class="article-text"><p>${description}</p></div>`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                if (article.category || article.readingTime || article.likes || article.views) {
                    contentHTML += '<div class="article-meta-info" style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-light);">';
                    
                    if (article.category) {
                        contentHTML += `<p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> ${article.category}</p>`;
                    }
                    if (article.readingTime) {
                        contentHTML += `<p><strong>–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è:</strong> ${article.readingTime} –º–∏–Ω</p>`;
                    }
                    if (article.likes || article.views) {
                        contentHTML += `<p><strong>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> `;
                        if (article.likes) contentHTML += `‚ù§Ô∏è ${article.likes} `;
                        if (article.views) contentHTML += `üëÅÔ∏è ${article.views}`;
                        contentHTML += `</p>`;
                    }
                    
                    contentHTML += '</div>';
                }
                
                document.getElementById('articleModalContent').innerHTML = contentHTML;
                document.getElementById('articleModalLink').href = article.link || article.url;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            const likeBtn = document.getElementById('articleModalLike');
            const saveBtn = document.getElementById('articleModalSave');
            
            likeBtn.querySelector('.like-count').textContent = article.likes || 0;
            likeBtn.onclick = () => toggleLike(articleId);
            saveBtn.onclick = () => window.toggleSaveArticle(articleId, saveBtn);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            loadComments(articleId);
            
            modal.classList.remove('hidden');
            document.body.classList.add('modal-open');
        };
        
        window.closeArticleModal = function() {
            document.getElementById('articleModal').classList.add('hidden');
            document.body.classList.remove('modal-open');
        };
        
        window.findArticleById = function(articleId) {
            console.log('üîç –ò—â–µ–º —Å—Ç–∞—Ç—å—é —Å ID:', articleId);
            console.log('üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', {
                rssAggregator: !!window.rssAggregator?.articles?.length,
                cachedRSSNews: !!window.cachedRSSNews?.length,
                cachedVKPosts: !!window.cachedVKPosts?.length,
                currentJobs: !!window.currentJobs?.length,
                savedArticles: JSON.parse(localStorage.getItem('saved_articles') || '[]').length
            });
            
            // –ò—â–µ–º —Å—Ç–∞—Ç—å—é –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            if (window.rssAggregator && window.rssAggregator.articles) {
                const found = window.rssAggregator.articles.find(article => article.id === articleId);
                if (found) {
                    console.log('‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ rssAggregator.articles');
                    return found;
                }
            }
            
            // –ò—â–µ–º –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö RSS –Ω–æ–≤–æ—Å—Ç—è—Ö
            if (window.cachedRSSNews) {
                const found = window.cachedRSSNews.find(article => article.id === articleId);
                if (found) {
                    console.log('‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ cachedRSSNews');
                    return found;
                }
            }
            
            // –ò—â–µ–º –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö VK –ø–æ—Å—Ç–∞—Ö
            if (window.cachedVKPosts) {
                console.log('üîç –ò—â–µ–º –≤ VK –ø–æ—Å—Ç–∞—Ö:', window.cachedVKPosts.map(p => p.id));
                const found = window.cachedVKPosts.find(article => article.id === articleId);
                if (found) {
                    console.log('‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ cachedVKPosts');
                    return found;
                }
            }
            
            // –ò—â–µ–º –≤ –≤–∞–∫–∞–Ω—Å–∏—è—Ö HH
            if (window.currentJobs) {
                console.log('üîç –ò—â–µ–º –≤ HH –≤–∞–∫–∞–Ω—Å–∏—è—Ö:', window.currentJobs.map(j => j.id));
                const found = window.currentJobs.find(job => job.id === articleId);
                if (found) {
                    console.log('‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ currentJobs');
                    return found;
                }
            }
            
            // –ò—â–µ–º –≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—å—è—Ö
            const savedArticles = JSON.parse(localStorage.getItem('saved_articles') || '[]');
            const found = savedArticles.find(article => article.id === articleId);
            if (found) {
                console.log('‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ savedArticles');
                return found;
            }
            
            console.log('‚ùå –°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∏–≥–¥–µ');
            return null;
        };
        
        window.toggleLike = function(articleId) {
            const article = window.findArticleById(articleId);
            if (!article) return;
            
            // –ü–æ–ª—É—á–∞–µ–º –ª–∞–π–∫–∏ –∏–∑ localStorage
            const likes = JSON.parse(localStorage.getItem('article_likes') || '{}');
            const isLiked = likes[articleId];
            
            if (isLiked) {
                delete likes[articleId];
                article.likes = Math.max(0, (article.likes || 0) - 1);
            } else {
                likes[articleId] = true;
                article.likes = (article.likes || 0) + 1;
            }
            
            localStorage.setItem('article_likes', JSON.stringify(likes));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            updateLikeButtons(articleId, article.likes, !isLiked);
        }
        
        function updateLikeButtons(articleId, likesCount, isLiked) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –ª–∞–π–∫ –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏
            const likeButtons = document.querySelectorAll(`[data-article-id="${articleId}"] .like-btn, #articleModalLike`);
            
            likeButtons.forEach(btn => {
                const countSpan = btn.querySelector('.like-count');
                if (countSpan) {
                    countSpan.textContent = likesCount;
                }
                
                if (isLiked) {
                    btn.classList.add('liked');
                } else {
                    btn.classList.remove('liked');
                }
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showToast(message, type = 'info') {
            console.log(`üîî ${type.toUpperCase()}: ${message}`);
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç toast
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--card-bg);
                color: var(--text-primary);
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
                border-left: 4px solid ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
            `;
            
            document.body.appendChild(toast);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.transform = 'translateX(0)';
            }, 10);
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // –°—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è toggleSave —É–¥–∞–ª–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ toggleSaveArticle
        
        function loadComments(articleId) {
            const commentsList = document.getElementById('commentsList');
            const comments = JSON.parse(localStorage.getItem(`comments_${articleId}`) || '[]');
            
            if (comments.length === 0) {
                commentsList.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 2rem;">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>';
                return;
            }
            
            commentsList.innerHTML = comments.map(comment => `
                <div class="comment-item">
                    <div class="comment-author">${comment.author}</div>
                    <div class="comment-text">${comment.text}</div>
                    <div class="comment-time">${formatTimeAgo(new Date(comment.timestamp))}</div>
                </div>
            `).join('');
        }
        
        function addComment() {
            const commentText = document.getElementById('commentText');
            const text = commentText.value.trim();
            
            if (!text) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è');
                return;
            }
            
            const articleId = getCurrentArticleId();
            if (!articleId) return;
            
            const comments = JSON.parse(localStorage.getItem(`comments_${articleId}`) || '[]');
            const newComment = {
                id: Date.now(),
                author: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                text: text,
                timestamp: new Date().toISOString()
            };
            
            comments.unshift(newComment);
            localStorage.setItem(`comments_${articleId}`, JSON.stringify(comments));
            
            commentText.value = '';
            loadComments(articleId);
        }
        
        function getCurrentArticleId() {
            const modal = document.getElementById('articleModal');
            return modal.dataset.currentArticleId;
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getSourceIcon(category) {
            const icons = {
                'technology': 'üíª',
                'business': 'üí∞', 
                'general': 'üì∞',
                'science': 'üî¨',
                'health': 'üè•'
            };
            return icons[category] || 'üì∞';
        }
        
        function formatTimeAgo(date) {
            const now = new Date();
            const diff = now - new Date(date);
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (hours < 24) return `${hours} —á –Ω–∞–∑–∞–¥`;
            return `${days} –¥–Ω –Ω–∞–∑–∞–¥`;
        }
    </script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
                                showUpdateNotification();
                            }
                        });
                    });
                } catch (error) {
                    // –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker
                }
            });
        }
        
        function showUpdateNotification() {
            const notification = document.createElement('div');
            notification.className = 'update-notification';
            notification.innerHTML = `
                <div class="update-content">
                    <span>üöÄ –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
                    <button onclick="updateApp()" class="btn btn--primary btn--sm">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button onclick="dismissUpdate()" class="btn btn--ghost btn--sm">–ü–æ–∑–∂–µ</button>
                </div>
            `;
            document.body.appendChild(notification);
        }
        
        function updateApp() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistration().then(registration => {
                    if (registration && registration.waiting) {
                        registration.waiting.postMessage({ type: 'SKIP_WAITING' });
                        window.location.reload();
                    }
                });
            }
        }
        
        function dismissUpdate() {
            const notification = document.querySelector('.update-notification');
            if (notification) {
                notification.remove();
            }
        }
    </script>

    <!-- API Integration Script -->
    <script type="module">
        import HHApiClient from './js/hhApi.js';
        import VKApiClient from './js/vkApi.js';
        import CONFIG from './js/config.js';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–æ–≤
        window.hhApi = new HHApiClient();
        window.vkApi = new VKApiClient();
        window.apiReady = true;
        window.CONFIG = CONFIG; // –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ñ–∏–≥—É –≥–ª–æ–±–∞–ª—å–Ω–æ

        console.log('‚úÖ HH.ru API initialized');
        console.log('‚úÖ VK API initialized');
        console.log('‚úÖ API Ready flag set');
        
        // VK —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ service token, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
        console.log('üì± VK API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç service token –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤');

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤–∞–∫–∞–Ω—Å–∏–π
        function setupJobFilters() {
            const applyBtn = document.getElementById('applyFiltersBtn');
            const resetBtn = document.getElementById('resetFiltersBtn');
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—É—Ç–µ–º –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            if (resetBtn) {
                const newResetBtn = resetBtn.cloneNode(true);
                resetBtn.parentNode.replaceChild(newResetBtn, resetBtn);
                
                newResetBtn.addEventListener('click', function() {
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
                    localStorage.removeItem('job_filters');
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
                    document.getElementById('filtersModal')?.classList.add('hidden');
                    
                    // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
                    initializeFiltersButton();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º VK –ø–æ—Å—Ç—ã –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    if (activeFilter === 'vk-news') {
                        console.log('üîÑ –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤: –∑–∞–≥—Ä—É–∂–∞–µ–º –æ–±—â–∏–µ VK –ø–æ—Å—Ç—ã');
                        
                        // –û—á–∏—â–∞–µ–º –∫–µ—à VK –ø–æ—Å—Ç–æ–≤
                        window.cachedVKPosts = null;
                        
                        window.loadVKPosts();
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    if (typeof window.showToast === 'function') {
                        window.showToast('–§–∏–ª—å—Ç—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã', 'info');
                    }
                });
            }
            
            if (applyBtn) {
                const newApplyBtn = applyBtn.cloneNode(true);
                applyBtn.parentNode.replaceChild(newApplyBtn, applyBtn);
                
                newApplyBtn.addEventListener('click', async function() {
                    const jobType = document.getElementById('jobType')?.value || '';
                    const city = document.getElementById('jobCity')?.value || '1';
                    const experience = document.getElementById('jobExperience')?.value || '';
                    const schedule = document.getElementById('jobSchedule')?.value || '';
                    const employment = document.getElementById('jobEmployment')?.value || '';
                    const salary = document.getElementById('jobSalary')?.value || '';
                    const onlyWithSalary = document.getElementById('jobOnlyWithSalary')?.checked;

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
                    localStorage.setItem('job_filters', JSON.stringify({
                        jobType,
                        city,
                        experience,
                        schedule,
                        employment,
                        salary,
                        onlyWithSalary
                    }));

                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
                    document.getElementById('filtersModal')?.classList.add('hidden');

                    // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
                    initializeFiltersButton();

                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
                    if (activeFilter === 'jobs') {
                        // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã –≤–∞–∫–∞–Ω—Å–∏–∏ - –æ–±–Ω–æ–≤–ª—è–µ–º –∏—Ö —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
                        console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏');
                        loadJobsWithFilters(true);
                    } else if (activeFilter === 'vk-news') {
                        // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã VK –Ω–æ–≤–æ—Å—Ç–∏ - –æ–±–Ω–æ–≤–ª—è–µ–º –∏—Ö —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
                        console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º VK –Ω–æ–≤–æ—Å—Ç–∏ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Ç–∏–ø—É –≤–∞–∫–∞–Ω—Å–∏–∏:', jobType);
                        
                        // –û—á–∏—â–∞–µ–º –∫–µ—à VK –ø–æ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                        window.cachedVKPosts = null;
                        
                        if (jobType) {
                            // –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
                            window.loadVKPostsForSelectedJobType(jobType);
                        } else {
                            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ VK –ø–æ—Å—Ç—ã
                            loadVKPosts();
                        }
                    } else if (activeFilter === 'all') {
                        // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–í—Å–µ" - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
                        console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏');
                        loadAllContent();
                    }
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –æ–±–Ω–æ–≤–ª—è–µ–º VK –ø–æ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏
                    if (!jobType) {
                        console.log('üì± –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—â–∏–µ VK –ø–æ—Å—Ç—ã (—Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω)');
                        loadVKPosts();
                    } else {
                        console.log('üì± –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –æ–±—â–∏—Ö VK –ø–æ—Å—Ç–æ–≤ (–≤—ã–±—Ä–∞–Ω —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏:', jobType, ')');
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    if (typeof window.showToast === 'function') {
                        window.showToast('–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã! –ö–æ–Ω—Ç–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è...', 'success');
                    }
                });
            }
        }
        

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
        window.createNewsCard = function(item) {
            if (!item) {
                console.warn('‚ö†Ô∏è createNewsCard: –ø—É—Å—Ç–æ–π —ç–ª–µ–º–µ–Ω—Ç');
                return '';
            }
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞—Ç—ã
            let publishedDate;
            try {
                publishedDate = new Date(item.publishedAt || item.published_at || Date.now());
                if (isNaN(publishedDate.getTime())) {
                    publishedDate = new Date();
                }
            } catch (e) {
                publishedDate = new Date();
            }
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –≤—Ä–µ–º–µ–Ω–∏: –¥–ª—è VK –ø–æ—Å—Ç–æ–≤ –±–æ–ª–µ–µ –º—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä
            const now = new Date();
            const daysDiff = (now - publishedDate) / (1000 * 60 * 60 * 24);
            const isVKPost = item.isVKPost || item.sourceType === 'vk';
            const maxDays = isVKPost ? 30 : 7; // VK –ø–æ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ 30 –¥–Ω–µ–π
            
            if (daysDiff > maxDays) {
                console.log(`‚è∞ –ü–æ—Å—Ç —Å—Ç–∞—Ä—à–µ ${maxDays} –¥–Ω–µ–π, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º:`, item.title || '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞');
                return '';
            }
            
            const timeAgo = getTimeAgo(publishedDate);
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
            let sourceName = '–ù–æ–≤–æ—Å—Ç–∏';
            if (isVKPost) {
                // –î–ª—è VK –ø–æ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º groupName –∏–ª–∏ source
                sourceName = item.groupName || item.source || 'VK';
            } else if (item.source) {
                if (typeof item.source === 'string') {
                    sourceName = item.source;
                } else if (typeof item.source === 'object') {
                    sourceName = item.source.name || item.source.title || '–ù–æ–≤–æ—Å—Ç–∏';
                }
            }
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
            let description = '';
            if (isVKPost) {
                // –î–ª—è VK –ø–æ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º text –∏–ª–∏ description
                description = item.text || item.description || '';
            } else if (item.description) {
                description = typeof item.description === 'string' ? item.description : String(item.description);
            } else if (item.summary) {
                description = typeof item.summary === 'string' ? item.summary : String(item.summary);
            } else if (item.content) {
                description = typeof item.content === 'string' ? item.content : String(item.content);
            }
            
            // –û–±—Ä–µ–∑–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ
            if (description.length > 300) {
                description = description.substring(0, 300) + '...';
            }
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            let title = '';
            if (item.title) {
                title = typeof item.title === 'string' ? item.title : String(item.title);
                title = title.trim();
                
                // –ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—É—Å—Ç–æ–π, –±–µ—Ä–µ–º –Ω–∞—á–∞–ª–æ –æ–ø–∏—Å–∞–Ω–∏—è
                if (!title) {
                    title = description.substring(0, 50) + (description.length > 50 ? '...' : '');
                }
            }
            
            // –§–∏–ª—å—Ç—Ä –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É: –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ—Å—Ç—ã –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ —Å "–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞"
            if (!title || title === '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞' || title.toLowerCase().includes('–±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞')) {
                console.log('üìù –ü–æ—Å—Ç –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º:', title || '–ø—É—Å—Ç–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫');
                return '';
            }
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
            const link = item.link || item.url || '#';
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π VK –ø–æ—Å—Ç–æ–≤
            let imageUrl = null;
            try {
                if (isVKPost) {
                    // –î–ª—è VK –ø–æ—Å—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                    imageUrl = item.image || item.photo || item.thumbnail || null;
                    console.log(`üñºÔ∏è VK –ø–æ—Å—Ç "${title?.substring(0, 30)}...": –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = ${imageUrl ? imageUrl.substring(0, 50) + '...' : '–ù–ï–¢'}`);
                } else {
                    // –î–ª—è RSS –ø–æ—Å—Ç–æ–≤
                    imageUrl = item.image || item.thumbnail || item.enclosure?.url || null;
                    console.log(`üñºÔ∏è RSS –ø–æ—Å—Ç "${title?.substring(0, 30)}...": –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = ${imageUrl ? imageUrl.substring(0, 50) + '...' : '–ù–ï–¢'}`);
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                if (imageUrl && typeof imageUrl === 'string' && imageUrl.startsWith('http')) {
                    console.log(`‚úÖ –í–∞–ª–∏–¥–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${imageUrl.substring(0, 50)}...`);
                } else {
                    if (imageUrl) {
                        console.warn(`‚ö†Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${imageUrl}`);
                    }
                    imageUrl = null;
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', error);
                imageUrl = null;
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞
            const sourceType = item.isVKPost || item.sourceType === 'vk' ? 'vk' : (item.sourceType || 'rss');
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            const articleId = item.id || `${sourceType}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –≤ –æ–±—ä–µ–∫—Ç–µ —Å—Ç–∞—Ç—å–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            if (!item.id) {
                item.id = articleId;
            }
            
            // –î–ª—è VK –ø–æ—Å—Ç–æ–≤ –í–°–ï–ì–î–ê —Å–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º newsRenderer)
            if (sourceType === 'vk') {
                console.log('üé® –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤—É—é VK –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è:', title?.substring(0, 30));
                
                const isPriority = item.isHighPriority || false;
                const priorityBadge = isPriority ? '<span class="priority-badge">üî• –¢–æ–ø</span>' : '';
                const groupName = item.groupName || item.source || 'VK';
                const link = item.link || item.url || '#';
                
                return `
                    <div class="news-card ${isPriority ? 'priority-post' : ''}" data-source-type="vk" data-article-id="${articleId}">
                        <div class="news-card-header">
                            <span class="news-source">üì± ${groupName}</span>
                            ${priorityBadge}
                            <span class="news-date">${new Date(publishedDate).toLocaleDateString('ru-RU')}</span>
                        </div>
                        
                        <div class="news-card-content" data-article-url="${link}">
                            <div class="news-card-clickable" role="button" tabindex="0" onclick="openArticleModal('${articleId}')">
                                <h3 class="news-title">${title}</h3>
                                ${description ? `<p class="news-description">${description.substring(0, 200)}${description.length > 200 ? '...' : ''}</p>` : ''}
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="news-image" loading="lazy" onerror="this.style.display='none'; console.warn('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', this.src);">` : ''}
                            </div>
                            
                            <div class="news-card-actions">
                                <button class="btn btn--secondary btn--small" onclick="window.open('${link}', '_blank')">
                                    üîó –û—Ç–∫—Ä—ã—Ç—å –≤ VK
                                </button>
                                <button class="btn btn--secondary btn--small save-btn" onclick="toggleSaveArticle('${articleId}', this)">
                                    ‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // –î–ª—è RSS –Ω–æ–≤–æ—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä
            if (window.newsRenderer && sourceType !== 'vk') {
                // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –æ–∂–∏–¥–∞–µ–º–æ–º newsRenderer
                const normalizedItem = {
                    id: articleId,
                    title: title,
                    description: description,
                    link: link,
                    publishedAt: publishedDate, // –ü–µ—Ä–µ–¥–∞–µ–º –æ–±—ä–µ–∫—Ç Date, –∞ –Ω–µ —Å—Ç—Ä–æ–∫—É
                    source: {
                        name: sourceName,
                        type: sourceType,
                        category: item.category || (sourceType === 'vk' ? 'social' : 'tech')
                    },
                    category: item.category || (sourceType === 'vk' ? 'social' : 'tech'),
                    likes: item.likes || 0,
                    views: item.views || 0,
                    image: imageUrl,
                    isVKPost: sourceType === 'vk',
                    isHighPriority: item.isHighPriority || false,
                    groupPriority: item.groupPriority || 999,
                    readingTime: Math.ceil((description.length || 0) / 200) || 1
                };
                
                return window.newsRenderer.renderCard(normalizedItem);
            }
            
            // Fallback: —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É –µ—Å–ª–∏ newsRenderer –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
            const sourceIcon = sourceType === 'vk' ? 'üì±' : 
                              (item.category === 'tech' ? 'üíª' : 
                               item.category === 'business' ? 'üíº' : 'üì∞');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∫–ª–∞—Å—Å –∏ –±–µ–π–¥–∂ –¥–ª—è VK –ø–æ—Å—Ç–æ–≤
            const priorityClass = item.isHighPriority ? ' priority-post' : '';
            const priorityBadge = item.isHighPriority ? '<span class="priority-badge">üî• –¢–æ–ø</span>' : '';
            
            return `
                <article class="news-card${priorityClass}" data-article-id="${articleId}" data-source-type="${sourceType}">
                    <div class="news-card-header">
                        <div class="source-info">
                            <div class="source-avatar">
                                <span class="source-icon">${sourceIcon}</span>
                            </div>
                            <div class="source-details">
                                <span class="source-name">${sourceName}</span>
                                ${priorityBadge}
                                <span class="publish-time">${timeAgo}</span>
                            </div>
                        </div>
                        <div class="article-actions">
                            <button class="action-btn like-btn" title="–õ–∞–π–∫" data-article-id="${articleId}" data-likes="${item.likes || 0}">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                                <span class="like-count">${item.likes || 0}</span>
                            </button>
                            <button class="action-btn save-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"></path>
                                </svg>
                            </button>
                            <button class="action-btn share-btn" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="news-card-content" data-article-url="${link}">
                        <div class="news-card-clickable" role="button" tabindex="0" onclick="openArticleModal('${articleId}')">
                            <h3 class="news-title">${title}</h3>
                            ${description ? `<p class="news-description">${description}</p>` : ''}
                            ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="news-image" loading="lazy" onerror="this.style.display='none'; console.warn('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', this.src);">` : ''}
                        </div>
                    </div>
                    
                    <div class="news-card-footer">
                        <div class="article-meta">
                            <span class="category-tag ${item.category || 'general'}">${item.category || (sourceType === 'vk' ? 'VK' : 'RSS')}</span>
                            <span class="reading-time">${Math.ceil((description.length || 0) / 200) || 1} –º–∏–Ω —á—Ç–µ–Ω–∏—è</span>
                        </div>
                        <a href="${link}" target="_blank" rel="noopener" class="news-card-link">
                            <button class="btn btn--primary btn--small">
                                –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"></path>
                                </svg>
                            </button>
                        </a>
                    </div>
                </article>
            `;
        };

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–∏ —Å –∫—Ä–∞—Å–Ω–æ–π —Ä–∞–º–∫–æ–π HH
        window.createJobCard = function(job) {
            return `
                <div class="job-card-compact" data-job-id="${job.id}" data-source="hh" onclick="window.openJobDetails('${job.id}')">
                    <div class="job-header">
                        ${job.companyLogo ? 
                            `<img src="${job.companyLogo}" alt="${job.company}" class="job-logo">` 
                            : '<div class="job-logo-placeholder">üíº</div>'}
                        <div class="job-info">
                            <h4 class="job-title">${job.title}</h4>
                            <p class="job-company">${job.company}</p>
                        </div>
                        <div class="job-source-badge">
                            <span class="hh-badge">HH.ru</span>
                        </div>
                    </div>
                    <div class="job-details">
                        <div class="job-salary">${job.salary}</div>
                        <div class="job-location">üìç ${job.location}</div>
                        <div class="job-experience">${job.experience}</div>
                        ${job.schedule === 'remote' ? '<div class="job-remote">üè† –£–¥–∞–ª–µ–Ω–∫–∞</div>' : ''}
                    </div>
                    <div class="job-footer">
                        <div class="job-meta">
                            <span class="job-type">${job.type || '–í–∞–∫–∞–Ω—Å–∏—è'}</span>
                            <time class="job-published">${getTimeAgo(new Date(job.published_at || Date.now()))}</time>
                        </div>
                        <div class="job-actions">
                            <button class="action-btn save-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" onclick="event.stopPropagation(); toggleSave('${job.id}')">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        };

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        window.getTimeAgo = function(date) {
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} —á –Ω–∞–∑–∞–¥`;
            if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)} –¥–Ω –Ω–∞–∑–∞–¥`;
            
            return date.toLocaleDateString('ru-RU');
        };

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–∫–∞–∫ RSS)
        window.loadVKPosts = async function loadVKPosts() {
            console.log('üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ VK
            if (window.loadingState) {
                window.loadingState.setLoading('vk', true);
            }
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API
                let vkPosts = [];
                
                if (window.rssAggregator && typeof window.rssAggregator.loadVKPosts === 'function') {
                    vkPosts = await window.rssAggregator.loadVKPosts();
                }
                
                // –ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤
                if (!vkPosts || vkPosts.length === 0) {
                    console.log('üì± VK API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤');
                    return; // –í—ã—Ö–æ–¥–∏–º, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                }
                
                if (vkPosts && vkPosts.length > 0) {
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vkPosts.length} VK –ø–æ—Å—Ç–æ–≤`);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º VK –ø–æ—Å—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                    window.cachedVKPosts = vkPosts;
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    const feedContainer = document.getElementById('feedContainer');
                    
                    if (activeFilter === 'vk-news' && feedContainer) {
                        console.log('üì± –ê–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ VK –Ω–æ–≤–æ—Å—Ç–µ–π, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ—Å—Ç—ã');
                        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º VK –ø–æ—Å—Ç—ã —Å –∫—Ä–∞—Å–∏–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
                        window.displayVKPosts(vkPosts, feedContainer);
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
                        if (typeof window.showToast === 'function') {
                            window.showToast(`üì± –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vkPosts.length} VK –ø–æ—Å—Ç–æ–≤`, 'success');
                        }
                    } else if (activeFilter === 'all') {
                        // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–í—Å—ë", –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
                        console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å –Ω–æ–≤—ã–º–∏ VK –ø–æ—Å—Ç–∞–º–∏');
                        loadAllContent();
                    } else {
                        console.log('üì± VK –ø–æ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ –∞–∫—Ç–∏–≤–Ω–∞ –¥—Ä—É–≥–∞—è –≤–∫–ª–∞–¥–∫–∞:', activeFilter);
                    }
                    
                } else {
                    console.log('‚ÑπÔ∏è –ù–µ—Ç VK –ø–æ—Å—Ç–æ–≤');
                    
                    // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ VK –Ω–æ–≤–æ—Å—Ç–µ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    if (activeFilter === 'vk-news') {
                        const feedContainer = document.getElementById('feedContainer');
                        if (feedContainer) {
                            feedContainer.innerHTML = `
                                <div style="text-align: center; padding: 3rem;">
                                    <h3>üì± VK –ù–æ–≤–æ—Å—Ç–∏</h3>
                                    <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏–∑ VK</p>
                                    <button class="btn btn--primary" onclick="loadVKPosts()">
                                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                                    </button>
                                </div>
                            `;
                        }
                    }
                }
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                if (activeFilter === 'vk-news') {
                    const feedContainer = document.getElementById('feedContainer');
                    if (feedContainer) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <h3>‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                                <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å VK –ø–æ—Å—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
                                <button class="btn btn--primary" onclick="loadVKPosts()">
                                    üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
                                </button>
                            </div>
                        `;
                    }
                }
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤', 'error');
                }
            } finally {
                // –£–±–∏—Ä–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
                if (window.loadingState) {
                    window.loadingState.setLoading('vk', false);
                }
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        window.loadVKPostsForSelectedJobType = async function loadVKPostsForSelectedJobType(jobType) {
            if (!window.rssAggregator || !jobType) {
                console.warn('‚ö†Ô∏è RSS Aggregator –Ω–µ –≥–æ—Ç–æ–≤ –∏–ª–∏ —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–µ —É–∫–∞–∑–∞–Ω');
                return;
            }
            
            console.log(`üì± –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞: ${jobType}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CONFIG –∏ VK –≥—Ä—É–ø–ø
            if (window.CONFIG?.vkGroups) {
                const relevantGroups = window.CONFIG.vkGroups.filter(group => 
                    group.relatedJobs && group.relatedJobs.includes(jobType)
                );
                console.log(`üéØ –ù–∞–π–¥–µ–Ω–æ ${relevantGroups.length} —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö VK –≥—Ä—É–ø–ø –¥–ª—è —Ç–∏–ø–∞ "${jobType}":`, 
                    relevantGroups.map(g => g.name));
            } else {
                console.warn('‚ö†Ô∏è CONFIG.vkGroups –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ VK
            if (window.loadingState) {
                window.loadingState.setLoading('vk', true);
            }
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ API
                let vkPosts = [];
                
                if (window.rssAggregator && typeof window.rssAggregator.loadVKPostsForJobType === 'function') {
                    console.log('üì± –í—ã–∑—ã–≤–∞–µ–º rssAggregator.loadVKPostsForJobType...');
                    vkPosts = await window.rssAggregator.loadVKPostsForJobType(jobType);
                    console.log(`üì± –ü–æ–ª—É—á–µ–Ω–æ ${vkPosts.length} –ø–æ—Å—Ç–æ–≤ –æ—Ç API`);
                }
                
                // –ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
                if (!vkPosts || vkPosts.length === 0) {
                    console.log(`üì± VK API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤ –¥–ª—è —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏: ${jobType}`);
                    return; // –í—ã—Ö–æ–¥–∏–º, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                }
                
                if (vkPosts && vkPosts.length > 0) {
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vkPosts.length} VK –ø–æ—Å—Ç–æ–≤ –¥–ª—è ${jobType}`);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º VK –ø–æ—Å—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                    window.cachedVKPosts = vkPosts;
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    const feedContainer = document.getElementById('feedContainer');
                    
                    if (activeFilter === 'vk-news' && feedContainer) {
                        console.log('üì± –ê–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ VK –Ω–æ–≤–æ—Å—Ç–µ–π, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ—Å—Ç—ã');
                        
                        // –ü—Ä–æ–±—É–µ–º –ø—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∑–∞—Ç–µ–º –æ–±—ã—á–Ω–æ–µ
                        try {
                            window.displayVKPostsSimple(vkPosts, feedContainer);
                        } catch (e) {
                            console.warn('üì± –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω–æ–µ');
                            window.displayVKPosts(vkPosts, feedContainer);
                        }
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
                        if (typeof window.showToast === 'function') {
                            const jobTypeName = window.CONFIG?.jobTypes?.find(j => j.id === jobType)?.name || jobType;
                            window.showToast(`üì± –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${vkPosts.length} –ø–æ—Å—Ç–æ–≤ –¥–ª—è ${jobTypeName}`, 'success');
                        }
                    } else if (activeFilter === 'all') {
                        // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–í—Å—ë", –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
                        console.log('üîÑ –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å –Ω–æ–≤—ã–º–∏ VK –ø–æ—Å—Ç–∞–º–∏');
                        loadAllContent();
                    } else {
                        console.log('üì± VK –ø–æ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ –∞–∫—Ç–∏–≤–Ω–∞ –¥—Ä—É–≥–∞—è –≤–∫–ª–∞–¥–∫–∞:', activeFilter);
                    }
                    
                } else {
                    console.log(`‚ÑπÔ∏è –ù–µ—Ç VK –ø–æ—Å—Ç–æ–≤ –¥–ª—è —Ç–∏–ø–∞ ${jobType}`);
                    
                    // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ VK –Ω–æ–≤–æ—Å—Ç–µ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                    if (activeFilter === 'vk-news') {
                        const feedContainer = document.getElementById('feedContainer');
                        if (feedContainer) {
                            const jobTypeName = window.CONFIG?.jobTypes?.find(j => j.id === jobType)?.name || jobType;
                            feedContainer.innerHTML = `
                                <div style="text-align: center; padding: 3rem;">
                                    <h3>üì± –ü–æ—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                                    <p>–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ VK –ø–æ—Å—Ç—ã –¥–ª—è —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏: <strong>${jobTypeName}</strong></p>
                                    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ</p>
                                    <button class="btn btn--primary" onclick="document.getElementById('filtersToggle').click()">
                                        üîß –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
                                    </button>
                                </div>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                if (activeFilter === 'vk-news') {
                    const feedContainer = document.getElementById('feedContainer');
                    if (feedContainer) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <h3>‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                                <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å VK –ø–æ—Å—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
                                <button class="btn btn--primary" onclick="loadVKPostsForSelectedJobType('${jobType}')">
                                    üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
                                </button>
                            </div>
                        `;
                    }
                }
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ VK –ø–æ—Å—Ç–æ–≤', 'error');
                }
            } finally {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ VK
                if (window.loadingState) {
                    window.loadingState.setLoading('vk', false);
                }
            }
        };

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–∏
        window.tabCache = {
            'all': { data: null, html: null, pagination: null },
            'news': { data: null, html: null, pagination: null },
            'vk-news': { data: null, html: null, pagination: null },
            'jobs': { data: null, html: null, pagination: null }
        };

        // –°–∏—Å—Ç–µ–º–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        window.contentPagination = {
            currentPage: 1,
            itemsPerPage: 10,
            totalItems: 0,
            allItems: [],
            isLoading: false,
            
            init: function(items) {
                this.allItems = items || [];
                this.totalItems = this.allItems.length;
                this.currentPage = 1;
                this.isLoading = false;
                console.log('üìÑ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞:', {
                    totalItems: this.totalItems,
                    itemsPerPage: this.itemsPerPage
                });
            },
            
            getCurrentItems: function() {
                const startIndex = 0;
                const endIndex = this.currentPage * this.itemsPerPage;
                return this.allItems.slice(startIndex, endIndex);
            },
            
            hasMoreItems: function() {
                return (this.currentPage * this.itemsPerPage) < this.totalItems;
            },
            
            loadMore: function() {
                if (this.hasMoreItems() && !this.isLoading) {
                    this.currentPage++;
                    return this.getCurrentItems();
                }
                return null;
            },

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            saveState: function(tabName) {
                window.tabCache[tabName].pagination = {
                    currentPage: this.currentPage,
                    itemsPerPage: this.itemsPerPage,
                    totalItems: this.totalItems,
                    allItems: [...this.allItems]
                };
            },

            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            restoreState: function(tabName) {
                const state = window.tabCache[tabName].pagination;
                if (state) {
                    this.currentPage = state.currentPage;
                    this.itemsPerPage = state.itemsPerPage;
                    this.totalItems = state.totalItems;
                    this.allItems = [...state.allItems];
                    return true;
                }
                return false;
            }
        };

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è VK –ø–æ—Å—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
        window.displayVKPosts = function(vkPosts, feedContainer, append = false) {
            if (!vkPosts || !feedContainer) {
                console.warn('‚ö†Ô∏è displayVKPosts: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ', {
                    vkPosts: !!vkPosts,
                    postsCount: vkPosts?.length,
                    feedContainer: !!feedContainer
                });
                return;
            }
            
            console.log('üì± –û—Ç–æ–±—Ä–∞–∂–∞–µ–º VK –ø–æ—Å—Ç—ã:', vkPosts.length, append ? '(–¥–æ–±–∞–≤–ª—è–µ–º)' : '(–∑–∞–º–µ–Ω—è–µ–º)');
            console.log('üì± feedContainer —Å–æ—Å—Ç–æ—è–Ω–∏–µ:', {
                id: feedContainer.id,
                display: feedContainer.style.display,
                visibility: feedContainer.style.visibility,
                offsetHeight: feedContainer.offsetHeight,
                offsetWidth: feedContainer.offsetWidth
            });
            
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
                if (!append) {
                    console.log('üì± –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è', vkPosts.length, 'VK –ø–æ—Å—Ç–æ–≤');
                    window.contentPagination.init(vkPosts);
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const itemsToShow = append ? 
                    window.contentPagination.loadMore() : 
                    window.contentPagination.getCurrentItems();
                
                console.log('üì± –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:', itemsToShow ? itemsToShow.length : 0);
                
                if (!itemsToShow || itemsToShow.length === 0) {
                    if (!append) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <h3>üì± –ù–µ—Ç –ø–æ—Å—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
                                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                            </div>
                        `;
                    }
                    return;
                }
                
                const vkHTML = itemsToShow.map((post, index) => {
                    try {
                        console.log(`üî® –°–æ–∑–¥–∞–µ–º VK –∫–∞—Ä—Ç–æ—á–∫—É ${index + 1}/${itemsToShow.length}:`, {
                            title: post.title?.substring(0, 50),
                            source: post.groupName || post.source,
                            isHighPriority: post.isHighPriority,
                            hasImage: !!(post.image || post.photo)
                        });
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                        if (!post || !post.title) {
                            console.warn(`‚ö†Ô∏è –ü–æ—Å—Ç ${index + 1} –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º`);
                            return '';
                        }
                        
                        // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤—É—é VK –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞–ø—Ä—è–º—É—é (–ë–ï–ó newsRenderer!)
                        const articleId = post.id || `vk_${Date.now()}_${index}`;
                        const title = post.title || 'VK –ø–æ—Å—Ç';
                        const description = post.description || post.text || '';
                        const imageUrl = post.image || post.photo || '';
                        const link = post.link || post.url || '#';
                        const publishedDate = post.publishedDate || post.publishedAt || new Date().toISOString();
                        const isPriority = post.isHighPriority || false;
                        const priorityBadge = isPriority ? '<span class="priority-badge">üî• –¢–æ–ø</span>' : '';
                        const groupName = post.groupName || post.source || 'VK';
                        
                        const cardHTML = `
                            <div class="news-card ${isPriority ? 'priority-post' : ''}" data-source-type="vk" data-article-id="${articleId}">
                                <div class="news-card-header">
                                    <span class="news-source">üì± ${groupName}</span>
                                    ${priorityBadge}
                                    <span class="news-date">${new Date(publishedDate).toLocaleDateString('ru-RU')}</span>
                                </div>
                                
                                <div class="news-card-content" data-article-url="${link}">
                                    <div class="news-card-clickable" role="button" tabindex="0" onclick="openArticleModal('${articleId}')">
                                        <h3 class="news-title">${title}</h3>
                                        ${description ? `<p class="news-description">${description.substring(0, 200)}${description.length > 200 ? '...' : ''}</p>` : ''}
                                        ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="news-image" loading="lazy" onerror="this.style.display='none'; console.warn('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', this.src);">` : ''}
                                    </div>
                                    
                                    <div class="news-card-actions">
                                        <button class="btn btn--secondary btn--small" onclick="window.open('${link}', '_blank')">
                                            üîó –û—Ç–∫—Ä—ã—Ç—å –≤ VK
                                        </button>
                                        <button class="btn btn--secondary btn--small save-btn" onclick="toggleSaveArticle('${articleId}', this)">
                                            ‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        console.log(`‚úÖ VK –∫–∞—Ä—Ç–æ—á–∫–∞ ${index + 1} —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ, ${imageUrl ? '—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º' : '–±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è'}`);
                        return cardHTML;
                    } catch (error) {
                        console.error(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ ${index + 1}:`, error, post);
                        return '';
                    }
                }).filter(html => html && html.trim() !== '').join('');
                
                if (!vkHTML || vkHTML.trim() === '') {
                    console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å HTML –¥–ª—è VK –ø–æ—Å—Ç–æ–≤');
                    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:', {
                        '–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤': itemsToShow.length,
                        '–£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ': itemsToShow.filter(post => {
                            try {
                                return window.createNewsCard(post) && post.title;
                            } catch {
                                return false;
                            }
                        }).length,
                        '–ü–µ—Ä–≤—ã–π –ø–æ—Å—Ç': itemsToShow[0] ? {
                            title: itemsToShow[0].title?.substring(0, 50),
                            hasTitle: !!itemsToShow[0].title,
                            hasImage: !!itemsToShow[0].image,
                            isVKPost: itemsToShow[0].isVKPost
                        } : '–Ω–µ—Ç'
                    });
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    if (!append) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <h3>üì± –û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è VK –ø–æ—Å—Ç–æ–≤</h3>
                                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏</p>
                                <button onclick="window.forceRefreshVKPosts()" class="btn btn--primary">
                                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å VK –ø–æ—Å—Ç—ã
                                </button>
                            </div>
                        `;
                    }
                    return;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–ª–∏ –∑–∞–º–µ–Ω—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                if (append) {
                    // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
                    const loadingIndicator = feedContainer.querySelector('.loading-more');
                    if (loadingIndicator) {
                        loadingIndicator.remove();
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Ç–∫—É
                    const postsGrid = feedContainer.querySelector('.posts-grid');
                    if (postsGrid) {
                        postsGrid.insertAdjacentHTML('beforeend', vkHTML);
                    } else {
                        feedContainer.insertAdjacentHTML('beforeend', vkHTML);
                    }
                } else {
                    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Å–µ—Ç–∫—É –¥–ª—è VK –ø–æ—Å—Ç–æ–≤
                    feedContainer.innerHTML = `<div class="posts-grid">${vkHTML}</div>`;
                    
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏–º—ã–º
                    feedContainer.style.display = 'block';
                    feedContainer.style.visibility = 'visible';
                    feedContainer.style.opacity = '1';
                    feedContainer.style.height = 'auto';
                    feedContainer.style.overflow = 'visible';
                    feedContainer.classList.remove('hidden');
                    
                    // –¢–∞–∫–∂–µ –¥–µ–ª–∞–µ–º –≤–∏–¥–∏–º—ã–º–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—Å—Ç–æ–≤
                    const postCards = feedContainer.querySelectorAll('.news-card');
                    postCards.forEach(card => {
                        card.style.display = 'block';
                        card.style.visibility = 'visible';
                        card.style.opacity = '1';
                    });
                    
                    console.log('üì± –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞–ª–∏', postCards.length, '–∫–∞—Ä—Ç–æ—á–µ–∫ VK –ø–æ—Å—Ç–æ–≤');
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ" –µ—Å–ª–∏ –µ—Å—Ç—å –µ—â–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                if (window.contentPagination.hasMoreItems()) {
                    addLoadMoreIndicator(feedContainer);
                }
                
                console.log('‚úÖ VK –ø–æ—Å—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã, HTML –¥–ª–∏–Ω–∞:', vkHTML.length);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à –¥–ª—è VK –≤–∫–ª–∞–¥–∫–∏
                if (!append) {
                    updateTabCache('vk-news', vkPosts, feedContainer.innerHTML);
                    window.updateTabCounter('vk-news', vkPosts.length);
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä–∞—Å–∏–≤—É—é –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
                const newCards = append ? 
                    Array.from(feedContainer.querySelectorAll('.news-card')).slice(-itemsToShow.length) :
                    feedContainer.querySelectorAll('.news-card');
                
                console.log('üé® –ê–Ω–∏–º–∏—Ä—É–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏:', newCards.length);
                
                newCards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(30px)';
                    card.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ displayVKPosts:', error);
                if (!append) {
                    feedContainer.innerHTML = `
                        <div style="text-align: center; padding: 3rem;">
                            <h3>‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
                            <p>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ VK –ø–æ—Å—Ç–æ–≤</p>
                            <button class="btn btn--primary" onclick="location.reload()">
                                üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </button>
                        </div>
                    `;
                }
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ "–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ"
        function addLoadMoreIndicator(container) {
            const loadMoreHTML = `
                <div class="loading-more" style="text-align: center; padding: 2rem; border-top: 1px solid #e9ecef; margin-top: 2rem;">
                    <div class="load-more-content">
                        <p style="color: #6c757d; margin-bottom: 1rem;">
                            –ü–æ–∫–∞–∑–∞–Ω–æ ${window.contentPagination.currentPage * window.contentPagination.itemsPerPage} –∏–∑ ${window.contentPagination.totalItems} –ø–æ—Å—Ç–æ–≤
                        </p>
                        <button class="btn btn--secondary" onclick="loadMoreContent()" id="loadMoreBtn">
                            üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ ${Math.min(window.contentPagination.itemsPerPage, window.contentPagination.totalItems - window.contentPagination.currentPage * window.contentPagination.itemsPerPage)} –ø–æ—Å—Ç–æ–≤
                        </button>
                    </div>
                    <div class="loading-spinner" style="display: none;">
                        <div class="spinner"></div>
                        <p style="color: #6c757d; margin-top: 1rem;">–ó–∞–≥—Ä—É–∂–∞–µ–º –µ—â–µ –ø–æ—Å—Ç—ã...</p>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', loadMoreHTML);
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        window.loadMoreContent = function() {
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const loadMoreContent = document.querySelector('.load-more-content');
            const loadingSpinner = document.querySelector('.loading-spinner');
            
            if (loadMoreBtn) {
                loadMoreBtn.disabled = true;
                loadMoreContent.style.display = 'none';
                loadingSpinner.style.display = 'block';
            }
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è UX
            setTimeout(() => {
                const feedContainer = document.getElementById('feedContainer');
                const activeFilter = document.querySelector('.tab-button-modern.active')?.dataset.filter;
                
                if (activeFilter === 'vk-news' && window.cachedVKPosts) {
                    window.displayVKPosts(window.cachedVKPosts, feedContainer, true);
                } else if (activeFilter === 'news' && window.cachedRSSNews) {
                    displayRSSNews(window.cachedRSSNews, feedContainer, true);
                } else if (activeFilter === 'jobs' && window.currentJobs) {
                    displayMoreJobs(window.currentJobs, feedContainer);
                }
                
                if (loadMoreBtn) {
                    loadMoreBtn.disabled = false;
                    loadMoreContent.style.display = 'block';
                    loadingSpinner.style.display = 'none';
                }
            }, 800);
        };

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏
        function saveCurrentTabState(tabName, feedContainer) {
            if (!tabName || !feedContainer) return;
            
            console.log(`üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏: ${tabName}`);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º HTML –∫–æ–Ω—Ç–µ–Ω—Ç
            window.tabCache[tabName].html = feedContainer.innerHTML;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
            window.contentPagination.saveState(tabName);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤–∫–ª–∞–¥–∫–∏
            if (tabName === 'vk-news' && window.cachedVKPosts) {
                window.tabCache[tabName].data = [...window.cachedVKPosts];
            } else if (tabName === 'news' && window.cachedRSSNews) {
                window.tabCache[tabName].data = [...window.cachedRSSNews];
            } else if (tabName === 'jobs' && window.currentJobs) {
                window.tabCache[tabName].data = [...window.currentJobs];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
        function restoreCardAnimations(feedContainer, tabType) {
            const selector = tabType === 'jobs' ? '.job-card-compact' : '.news-card';
            
            const cards = feedContainer.querySelectorAll(selector);
            
            cards.forEach((card, index) => {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
                card.style.transition = 'all 0.3s ease';
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function updateTabCache(tabName, data, html) {
            if (!window.tabCache[tabName]) {
                window.tabCache[tabName] = { data: null, html: null, pagination: null };
            }
            
            window.tabCache[tabName].data = data ? [...data] : null;
            window.tabCache[tabName].html = html || null;
            
            console.log(`‚úÖ –ö–µ—à –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –≤–∫–ª–∞–¥–∫–∏: ${tabName}`, {
                dataLength: data?.length || 0,
                hasHtml: !!html
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤—ã—à–µ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        window.addEventListener('resize', () => {
            setTimeout(window.updateTabIndicator, 100);
        });

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–º–æ–π
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
            document.body.classList.add('theme-switching');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é —Ç–µ–º—É
            document.documentElement.setAttribute('data-theme', newTheme);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('theme', newTheme);
            
            // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
            setTimeout(() => {
                document.body.classList.remove('theme-switching');
            }, 500);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.style.transform = 'rotate(180deg)';
                setTimeout(() => {
                    themeToggle.style.transform = 'rotate(0deg)';
                }, 300);
            }
            
            console.log(`üé® –¢–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –Ω–∞: ${newTheme}`);
        }


        // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                const theme = e.matches ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', theme);
                console.log(`üé® –°–∏—Å—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞: ${theme}`);
            }
        });

        // showToast –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –Ω–∏–∂–µ

        // –§—É–Ω–∫—Ü–∏—è hideLoadingSpinner —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤—ã—à–µ –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–∞—è

        if (typeof window.initializeFiltersButton !== 'function') {
            window.initializeFiltersButton = function() {
                console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤');
                // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            };
        }
        
        // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
        window.loadJobsWithFilters = async function(forceRefresh = false) {
            console.log('üöÄ loadJobsWithFilters –≤—ã–∑–≤–∞–Ω–∞');
            window.jobsApiReady = true;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
            window.loadingState.setLoading('jobs', true);
            
            const filters = JSON.parse(localStorage.getItem('job_filters') || '{}');
            
            // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –∫–µ—à–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const cacheKey = `jobs_cache_${filters.jobType || 'all'}_${filters.city || '1'}`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            if (!forceRefresh) {
                const cachedJobs = getCachedData(cacheKey);
                if (cachedJobs && cachedJobs.length > 0) {
                    window.displayJobs(cachedJobs);
                    showToast('üíº –í–∞–∫–∞–Ω—Å–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –∫–µ—à–∞', 'success');
                    return;
                }
            }
            
            try {
                showLoadingSpinner();
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –ø–æ–∏—Å–∫–∞ –∏–∑ —Ç–∏–ø–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
                let searchText = '';
                if (filters.jobType) {
                    const jobTypeName = window.CONFIG?.jobTypes?.find(j => j.id === filters.jobType)?.name;
                    searchText = jobTypeName || filters.jobType;
                }
                
                const searchParams = {
                    text: searchText, // –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø—É –≤–∞–∫–∞–Ω—Å–∏–∏
                    area: parseInt(filters.city) || 1,
                    per_page: 50  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ 50 –≤–∞–∫–∞–Ω—Å–∏–π
                };

                if (filters.experience) searchParams.experience = filters.experience;
                if (filters.schedule) searchParams.schedule = filters.schedule;
                if (filters.employment) searchParams.employment = filters.employment;

                const results = await window.hhApi.searchVacancies(searchParams);
                console.log('HH API —Ä–µ–∑—É–ª—å—Ç–∞—Ç:', results);
                console.log('–ù–∞–π–¥–µ–Ω–æ –≤–∞–∫–∞–Ω—Å–∏–π:', results.items?.length || 0);
                
                let jobs = window.hhApi.transformVacancies(results.items || []);
                console.log('–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –≤–∞–∫–∞–Ω—Å–∏–π:', jobs.length);

                // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –∑–∞—Ä–ø–ª–∞—Ç–µ
                if (filters.salary) {
                    const minSalary = parseInt(filters.salary);
                    jobs = jobs.filter(job => 
                        job.salaryFrom && job.salaryFrom >= minSalary
                    );
                }

                if (filters.onlyWithSalary) {
                    jobs = jobs.filter(job => job.salaryFrom || job.salaryTo);
                }

                console.log('–ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–æ—Å—å –≤–∞–∫–∞–Ω—Å–∏–π:', jobs.length);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º
                setCachedData(cacheKey, jobs);
                
                console.log('üíº –í—ã–∑—ã–≤–∞–µ–º displayJobs —Å', jobs.length, '–≤–∞–∫–∞–Ω—Å–∏—è–º–∏');
                
                // –ü–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
                try {
                    window.displayJobsSimple(jobs);
                } catch (e) {
                    console.warn('üíº –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω–æ–µ');
                    window.displayJobs(jobs);
                }
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
                setTimeout(() => {
                    const feedContainer = document.getElementById('feedContainer');
                    if (feedContainer) {
                        console.log('üíº –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 500ms - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ feedContainer:', {
                            hasContent: feedContainer.innerHTML.length > 0,
                            display: feedContainer.style.display,
                            visibility: feedContainer.style.visibility
                        });
                        
                        // –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
                        if (feedContainer.innerHTML.length > 0) {
                            feedContainer.style.display = 'block';
                            feedContainer.style.visibility = 'visible';
                            feedContainer.style.opacity = '1';
                        }
                    }
                }, 500);
                
                hideLoadingSpinner();
                window.loadingState.setLoading('jobs', false);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π:', error);
                showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π', 'error');
                hideLoadingSpinner();
                window.loadingState.setLoading('jobs', false);
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è RSS –Ω–æ–≤–æ—Å—Ç–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
        window.displayRSSNews = function(rssNews, feedContainer, append = false) {
            if (!rssNews || !feedContainer) return;
            
            console.log('üì∞ –û—Ç–æ–±—Ä–∞–∂–∞–µ–º RSS –Ω–æ–≤–æ—Å—Ç–∏:', rssNews.length, append ? '(–¥–æ–±–∞–≤–ª—è–µ–º)' : '(–∑–∞–º–µ–Ω—è–µ–º)');
            
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
                if (!append) {
                    window.contentPagination.init(rssNews);
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const itemsToShow = append ? 
                    window.contentPagination.loadMore() : 
                    window.contentPagination.getCurrentItems();
                
                if (!itemsToShow || itemsToShow.length === 0) {
                    if (!append) {
                        feedContainer.innerHTML = `
                            <div style="text-align: center; padding: 3rem;">
                                <h3>üì∞ –ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
                                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
                            </div>
                        `;
                    }
                    return;
                }
                
                const newsHTML = itemsToShow.map(news => createNewsCard(news)).filter(html => html).join('');
                
                if (append) {
                    const loadingIndicator = feedContainer.querySelector('.loading-more');
                    if (loadingIndicator) {
                        loadingIndicator.remove();
                    }
                    feedContainer.insertAdjacentHTML('beforeend', newsHTML);
                } else {
                    feedContainer.innerHTML = newsHTML;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ" –µ—Å–ª–∏ –µ—Å—Ç—å –µ—â–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                if (window.contentPagination.hasMoreItems()) {
                    addLoadMoreIndicator(feedContainer);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à –¥–ª—è RSS –Ω–æ–≤–æ—Å—Ç–µ–π
                if (!append) {
                    updateTabCache('news', rssNews, feedContainer.innerHTML);
                    window.updateTabCounter('news', rssNews.length);
                }
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
                const newCards = append ? 
                    Array.from(feedContainer.querySelectorAll('.news-card')).slice(-itemsToShow.length) :
                    feedContainer.querySelectorAll('.news-card');
                
                newCards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(30px)';
                    card.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ displayRSSNews:', error);
            }
        };

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
        window.displayJobs = function(jobs, append = false) {
            console.log('üìã displayJobs –≤—ã–∑–≤–∞–Ω —Å', jobs.length, '–≤–∞–∫–∞–Ω—Å–∏—è–º–∏', append ? '(–¥–æ–±–∞–≤–ª—è–µ–º)' : '(–∑–∞–º–µ–Ω—è–µ–º)');
            
            const feedContainer = document.getElementById('feedContainer');
            if (!feedContainer) {
                console.error('‚ùå feedContainer –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏–º
            console.log('üìã feedContainer –≤–∏–¥–∏–º–æ—Å—Ç—å:', {
                display: feedContainer.style.display,
                visibility: feedContainer.style.visibility,
                offsetHeight: feedContainer.offsetHeight,
                offsetWidth: feedContainer.offsetWidth
            });

            if (jobs.length === 0 && !append) {
                console.warn('‚ö†Ô∏è –ù–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è');
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>–í–∞–∫–∞–Ω—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                    </div>
                `;
                return;
            }

            try {
                console.log('üíº –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ displayJobs');
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
                if (!append) {
                    console.log('üíº –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è', jobs.length, '–≤–∞–∫–∞–Ω—Å–∏–π');
                    window.contentPagination.init(jobs);
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const itemsToShow = append ? 
                    window.contentPagination.loadMore() : 
                    window.contentPagination.getCurrentItems();
                
                console.log('üíº –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:', itemsToShow ? itemsToShow.length : 0);
                
                if (!itemsToShow || itemsToShow.length === 0) {
                    console.warn('üíº –ù–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤—ã—Ö–æ–¥–∏–º');
                    return;
                }

                // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π
                let html = append ? '' : '<div class="jobs-grid">';
                
                itemsToShow.forEach((job, index) => {
                    html += `
                        <div class="job-card-compact" data-job-id="${job.id}" onclick="window.openJobDetails('${job.id}')">
                            ${job.companyLogo ? 
                                `<img src="${job.companyLogo}" alt="${job.company}" class="job-logo">` 
                                : '<div class="job-logo-placeholder">üíº</div>'}
                            <h4 class="job-title">${job.title}</h4>
                            <p class="job-company">${job.company}</p>
                            <div class="job-salary">${job.salary}</div>
                            <div class="job-location">üìç ${job.location}</div>
                            <div class="job-badge">${job.schedule === 'remote' ? 'üè† –£–¥–∞–ª–µ–Ω–∫–∞' : job.experience}</div>
                        </div>
                    `;
                });
                
                if (append) {
                    // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    const loadingIndicator = feedContainer.querySelector('.loading-more');
                    if (loadingIndicator) {
                        loadingIndicator.remove();
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Ç–∫—É
                    const jobsGrid = feedContainer.querySelector('.jobs-grid');
                    if (jobsGrid) {
                        jobsGrid.insertAdjacentHTML('beforeend', html);
                    }
                } else {
                    html += '</div>';
                    feedContainer.innerHTML = html;
                    
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏–º—ã–º
                    feedContainer.style.display = 'block';
                    feedContainer.style.visibility = 'visible';
                    feedContainer.style.opacity = '1';
                    feedContainer.style.height = 'auto';
                    feedContainer.style.overflow = 'visible';
                    feedContainer.classList.remove('hidden');
                    
                    // –¢–∞–∫–∂–µ –¥–µ–ª–∞–µ–º –≤–∏–¥–∏–º—ã–º–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π
                    const jobCards = feedContainer.querySelectorAll('.job-card-compact');
                    jobCards.forEach(card => {
                        card.style.display = 'block';
                        card.style.visibility = 'visible';
                        card.style.opacity = '1';
                    });
                    
                    console.log('üíº –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞–ª–∏', jobCards.length, '–∫–∞—Ä—Ç–æ—á–µ–∫ –≤–∞–∫–∞–Ω—Å–∏–π');
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ" –µ—Å–ª–∏ –µ—Å—Ç—å –µ—â–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                if (window.contentPagination.hasMoreItems()) {
                    addLoadMoreIndicator(feedContainer);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–µ—à –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π
                if (!append) {
                    updateTabCache('jobs', jobs, feedContainer.innerHTML);
                    window.updateTabCounter('jobs', jobs.length);
                }
                
                console.log('‚úÖ –í–∞–∫–∞–Ω—Å–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã. HTML –¥–ª–∏–Ω–∞:', html.length);
                console.log('‚úÖ feedContainer –ø–æ—Å–ª–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:', {
                    innerHTML: feedContainer.innerHTML.length > 0,
                    display: feedContainer.style.display,
                    visibility: feedContainer.style.visibility,
                    opacity: feedContainer.style.opacity
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –º–æ–¥–∞–ª–∫–∏
                window.currentJobs = jobs;
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ window.displayJobs:', error);
            }
        }

        // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–π –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        window.displayJobsSimple = function(jobs) {
            console.log('üíº displayJobsSimple –≤—ã–∑–≤–∞–Ω —Å', jobs.length, '–≤–∞–∫–∞–Ω—Å–∏—è–º–∏');
            
            const feedContainer = document.getElementById('feedContainer');
            if (!feedContainer) {
                console.error('‚ùå feedContainer –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                return;
            }

            if (jobs.length === 0) {
                console.warn('‚ö†Ô∏è –ù–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è');
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>–í–∞–∫–∞–Ω—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                    </div>
                `;
                return;
            }

            // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –ø–µ—Ä–≤—ã—Ö 10 –≤–∞–∫–∞–Ω—Å–∏–π
            let html = '<div class="jobs-grid">';
            
            jobs.slice(0, 10).forEach((job, index) => {
                html += `
                    <div class="job-card-compact" data-job-id="${job.id}" onclick="window.openJobDetails('${job.id}')">
                        ${job.companyLogo ? 
                            `<img src="${job.companyLogo}" alt="${job.company}" class="job-logo">` 
                            : '<div class="job-logo-placeholder">üíº</div>'}
                        <h4 class="job-title">${job.title}</h4>
                        <p class="job-company">${job.company}</p>
                        <div class="job-salary">${job.salary}</div>
                        <div class="job-location">üìç ${job.location}</div>
                        <div class="job-badge">${job.schedule === 'remote' ? 'üè† –£–¥–∞–ª–µ–Ω–∫–∞' : job.experience}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            feedContainer.innerHTML = html;
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏–º—ã–º
            feedContainer.style.display = 'block';
            feedContainer.style.visibility = 'visible';
            feedContainer.style.opacity = '1';
            feedContainer.style.height = 'auto';
            feedContainer.style.overflow = 'visible';
            feedContainer.classList.remove('hidden');
            
            // –¢–∞–∫–∂–µ –¥–µ–ª–∞–µ–º –≤–∏–¥–∏–º—ã–º–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π
            const jobCards = feedContainer.querySelectorAll('.job-card-compact');
            jobCards.forEach(card => {
                card.style.display = 'block';
                card.style.visibility = 'visible';
                card.style.opacity = '1';
            });
            
            console.log('‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ø–æ–∫–∞–∑–∞–ª–∏', jobCards.length, '–∫–∞—Ä—Ç–æ—á–µ–∫ –≤–∞–∫–∞–Ω—Å–∏–π');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –º–æ–¥–∞–ª–∫–∏
            window.currentJobs = jobs;
        }

        // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è VK –ø–æ—Å—Ç–æ–≤ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        window.displayVKPostsSimple = function(vkPosts, feedContainer) {
            console.log('üì± displayVKPostsSimple –≤—ã–∑–≤–∞–Ω —Å', vkPosts.length, '–ø–æ—Å—Ç–∞–º–∏');
            
            if (!feedContainer) {
                console.error('‚ùå feedContainer –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                return;
            }

            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            feedContainer.innerHTML = '';
            feedContainer.style.display = 'block';
            feedContainer.style.visibility = 'visible';
            feedContainer.style.opacity = '1';
            feedContainer.classList.remove('hidden');
            
            console.log('üßπ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∏—â–µ–Ω –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è VK –ø–æ—Å—Ç–æ–≤');

            if (!vkPosts || vkPosts.length === 0) {
                console.warn('‚ö†Ô∏è –ù–µ—Ç VK –ø–æ—Å—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è');
                feedContainer.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <h3>üì± –ù–µ—Ç –ø–æ—Å—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É</p>
                        <button class="btn btn--primary" onclick="window.forceRefreshVKPosts()">
                            üîÑ –û–±–Ω–æ–≤–∏—Ç—å VK –ø–æ—Å—Ç—ã
                        </button>
                    </div>
                `;
                return;
            }

            // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –ø–µ—Ä–≤—ã—Ö 10 –ø–æ—Å—Ç–æ–≤
            let html = '<div class="posts-grid">';
            
            vkPosts.slice(0, 10).forEach((post, index) => {
                const articleId = `vk_${post.id || index}`;
                const title = post.title || post.text?.substring(0, 100) + '...' || 'VK –ø–æ—Å—Ç';
                const description = post.description || post.text || '';
                const imageUrl = post.image || post.photo || '';
                const link = post.link || `https://vk.com/wall${post.owner_id}_${post.id}`;
                const publishedDate = post.publishedDate || new Date().toISOString();
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
                const isPriority = post.isHighPriority || false;
                const priorityBadge = isPriority ? '<span class="priority-badge">üî• –¢–æ–ø</span>' : '';
                const groupName = post.groupName || post.source || 'VK';
                
                html += `
                    <div class="news-card ${isPriority ? 'priority-post' : ''}" data-source-type="vk" data-article-id="${articleId}">
                        <div class="news-card-header">
                            <span class="news-source">üì± ${groupName}</span>
                            ${priorityBadge}
                            <span class="news-date">${new Date(publishedDate).toLocaleDateString('ru-RU')}</span>
                        </div>
                        
                        <div class="news-card-content" data-article-url="${link}">
                            <div class="news-card-clickable" role="button" tabindex="0" onclick="openArticleModal('${articleId}')">
                                <h3 class="news-title">${title}</h3>
                                ${description ? `<p class="news-description">${description.substring(0, 200)}${description.length > 200 ? '...' : ''}</p>` : ''}
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="news-image" loading="lazy" onerror="this.style.display='none'; console.warn('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', this.src);">` : ''}
                            </div>
                            
                            <div class="news-card-actions">
                                <button class="btn btn--secondary btn--small" onclick="window.open('${link}', '_blank')">
                                    üîó –û—Ç–∫—Ä—ã—Ç—å –≤ VK
                                </button>
                                <button class="btn btn--secondary btn--small save-btn" onclick="toggleSaveArticle('${articleId}', this)">
                                    ‚≠ê –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            feedContainer.innerHTML = html;
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–∏–º—ã–º
            feedContainer.style.display = 'block';
            feedContainer.style.visibility = 'visible';
            feedContainer.style.opacity = '1';
            feedContainer.style.height = 'auto';
            feedContainer.style.overflow = 'visible';
            feedContainer.classList.remove('hidden');
            
            // –¢–∞–∫–∂–µ –¥–µ–ª–∞–µ–º –≤–∏–¥–∏–º—ã–º–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—Å—Ç–æ–≤
            const postCards = feedContainer.querySelectorAll('.news-card');
            postCards.forEach(card => {
                card.style.display = 'block';
                card.style.visibility = 'visible';
                card.style.opacity = '1';
            });
            
            console.log('‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ VK: –ø–æ–∫–∞–∑–∞–ª–∏', postCards.length, '–∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ—Å—Ç–æ–≤');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
            window.cachedVKPosts = vkPosts;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π
        function displayMoreJobs(allJobs, feedContainer) {
            window.displayJobs(allJobs, true);
        }

        // –î–µ–±–∞–≥ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏


        // –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        window.quickDiagnose = function() {
            console.log('üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:', {
                CONFIG: !!window.CONFIG,
                VK_API: !!window.vkApi,
                RSS: !!window.rssAggregator,
                VK_Posts: window.cachedVKPosts?.length || 0,
                AI_Key: !!localStorage.getItem('openai_api_key')
            });
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        window.clearFeedContainer = function() {
            const feedContainer = document.getElementById('feedContainer');
            if (feedContainer) {
                console.log('üßπ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ feedContainer');
                
                // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                feedContainer.innerHTML = '';
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç–∏–ª–∏
                feedContainer.style.display = 'block';
                feedContainer.style.visibility = 'visible';
                feedContainer.style.opacity = '1';
                feedContainer.style.height = 'auto';
                feedContainer.style.overflow = 'visible';
                feedContainer.style.transform = '';
                feedContainer.style.position = '';
                feedContainer.style.zIndex = '';
                
                // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã –∫—Ä–æ–º–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ
                feedContainer.className = 'feed-container';
                
                console.log('‚úÖ feedContainer –æ—á–∏—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –Ω–æ–≤–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É');
            }
        };


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è VK –ø–æ—Å—Ç–æ–≤
        window.forceRefreshVKPosts = async function() {
            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ VK –ø–æ—Å—Ç–æ–≤...');
            
            // –û—á–∏—â–∞–µ–º –∫–µ—à
            window.cachedVKPosts = null;
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏
            const savedFilters = JSON.parse(localStorage.getItem('job_filters') || '{}');
            const jobType = savedFilters.jobType;
            
            if (jobType) {
                console.log(`üéØ –ó–∞–≥—Ä—É–∂–∞–µ–º VK –ø–æ—Å—Ç—ã –¥–ª—è —Ç–∏–ø–∞: ${jobType}`);
                await window.loadVKPostsForSelectedJobType(jobType);
            } else {
                console.log('üì± –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—â–∏–µ VK –ø–æ—Å—Ç—ã');
                await window.loadVKPosts();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            if (typeof window.showVKPersonalizationStats === 'function') {
                window.showVKPersonalizationStats();
            }
        };

        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏


        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏–Ω–Ω–µ—Ä–æ–º
        window.showLoadingSpinner = function() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.remove('hidden');
                console.log('üîÑ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏');
            }
        };

        window.hideLoadingSpinner = function() {
            const spinner = document.getElementById('loadingSpinner');
            if (spinner) {
                spinner.classList.add('hidden');
                console.log('‚úÖ –°–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏');
            }
        };

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        window.showToast = function(message, type = 'info') {
            // –ï—Å–ª–∏ –µ—Å—Ç—å filterSystem, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
            if (window.filterSystem && typeof window.filterSystem.showToast === 'function') {
                window.filterSystem.showToast(message, type);
                return;
            }
            
            // –ò–Ω–∞—á–µ —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const toast = document.createElement('div');
            toast.className = `toast toast--${type}`;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 12px 20px;
                border-radius: 4px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        };
        
        // –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        if (!document.getElementById('toast-styles')) {
            const style = document.createElement('style');
            style.id = 'toast-styles';
            style.textContent = `
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        document.addEventListener('DOMContentLoaded', async function() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ CONFIG
            updateAppVersion();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ–ª–µ–∫—Ç—ã –∏–∑ CONFIG
            initializeJobFiltersFromConfig();
            
            setupJobFilters();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ UI
            const savedFilters = JSON.parse(localStorage.getItem('job_filters') || '{}');
            if (savedFilters.jobType) document.getElementById('jobType').value = savedFilters.jobType;
            if (savedFilters.city) document.getElementById('jobCity').value = savedFilters.city;
            if (savedFilters.experience) document.getElementById('jobExperience').value = savedFilters.experience;
            if (savedFilters.schedule) document.getElementById('jobSchedule').value = savedFilters.schedule;
            if (savedFilters.employment) document.getElementById('jobEmployment').value = savedFilters.employment;
            if (savedFilters.salary) document.getElementById('jobSalary').value = savedFilters.salary;
            if (savedFilters.onlyWithSalary) document.getElementById('jobOnlyWithSalary').checked = savedFilters.onlyWithSalary;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            document.getElementById('clearAllDataBtn')?.addEventListener('click', clearAllData);
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            loadProfile();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
            initializeTabs();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ VK –ø–æ—Å—Ç–æ–≤ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω —Ç–∏–ø –≤–∞–∫–∞–Ω—Å–∏–∏
            setTimeout(() => {
                if (window.rssAggregator) {
                    console.log('üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ VK –ø–æ—Å—Ç–æ–≤');
                    loadVKPosts();
                }
            }, 2000); // –ñ–¥–µ–º 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ API
            
            console.log('üöÄ NewsHub API Integration ready!');
        });
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function updateAppVersion() {
            const versionElement = document.getElementById('appVersion');
            if (versionElement && window.CONFIG?.app?.version) {
                versionElement.textContent = `v${window.CONFIG.app.version}`;
                versionElement.title = `NewsHub –≤–µ—Ä—Å–∏—è ${window.CONFIG.app.version}`;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ–ª–µ–∫—Ç–æ–≤ –∏–∑ CONFIG
        function initializeJobFiltersFromConfig() {
            if (!window.CONFIG) return;
            
            // –¢–∏–ø—ã –≤–∞–∫–∞–Ω—Å–∏–π —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const jobTypeSelect = document.getElementById('jobType');
            if (jobTypeSelect && window.CONFIG.jobTypes && window.CONFIG.jobCategories) {
                // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                const jobsByCategory = {};
                window.CONFIG.jobTypes.forEach(jobType => {
                    const category = jobType.category || 'other';
                    if (!jobsByCategory[category]) {
                        jobsByCategory[category] = [];
                    }
                    jobsByCategory[category].push(jobType);
                });
                
                // –°–æ–∑–¥–∞–µ–º optgroup –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                window.CONFIG.jobCategories.forEach(category => {
                    const jobs = jobsByCategory[category.id];
                    if (jobs && jobs.length > 0) {
                        const optgroup = document.createElement('optgroup');
                        optgroup.label = category.name;
                        
                        jobs.forEach(jobType => {
                            const option = document.createElement('option');
                            option.value = jobType.id;
                            option.textContent = jobType.name;
                            optgroup.appendChild(option);
                        });
                        
                        jobTypeSelect.appendChild(optgroup);
                    }
                });
            }
            
            // –ì–æ—Ä–æ–¥–∞
            const citySelect = document.getElementById('jobCity');
            if (citySelect && window.CONFIG.cities) {
                window.CONFIG.cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city.id;
                    option.textContent = city.name;
                    citySelect.appendChild(option);
                });
            }
            
            // –û–ø—ã—Ç
            const expSelect = document.getElementById('jobExperience');
            if (expSelect && window.CONFIG.experienceLevels) {
                window.CONFIG.experienceLevels.forEach(exp => {
                    const option = document.createElement('option');
                    option.value = exp.id;
                    option.textContent = exp.name;
                    expSelect.appendChild(option);
                });
            }
            
            // –ì—Ä–∞—Ñ–∏–∫
            const scheduleSelect = document.getElementById('jobSchedule');
            if (scheduleSelect && window.CONFIG.schedules) {
                window.CONFIG.schedules.forEach(schedule => {
                    const option = document.createElement('option');
                    option.value = schedule.id;
                    option.textContent = schedule.name;
                    scheduleSelect.appendChild(option);
                });
            }
            
            // –ó–∞–Ω—è—Ç–æ—Å—Ç—å
            const empSelect = document.getElementById('jobEmployment');
            if (empSelect && window.CONFIG.employmentTypes) {
                window.CONFIG.employmentTypes.forEach(emp => {
                    const option = document.createElement('option');
                    option.value = emp.id;
                    option.textContent = emp.name;
                    empSelect.appendChild(option);
                });
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∫–ª–∞–¥–æ–∫
        function initializeTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    // –£–±–∏—Ä–∞–µ–º active —É –≤—Å–µ—Ö
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º active –∫ —Ç–µ–∫—É—â–µ–º—É
                    this.classList.add('active');
                    document.getElementById(`${targetTab}-tab`)?.classList.add('active');
                });
            });
        }

        // ======= –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π =======
        
        window.openJobDetails = function(jobId) {
            const job = window.currentJobs?.find(j => j.id === jobId);
            if (!job) return;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª–∫—É
            document.getElementById('jobModalTitle').textContent = job.title;
            document.getElementById('jobModalCompany').textContent = job.company;
            document.getElementById('jobModalSalary').textContent = `üí∞ ${job.salary}`;
            document.getElementById('jobModalLocation').textContent = `üìç ${job.location}`;
            document.getElementById('jobModalExperience').textContent = `üìÖ ${job.experience}`;
            document.getElementById('jobModalSchedule').textContent = `‚è∞ ${job.schedule}`;
            document.getElementById('jobModalDescription').innerHTML = job.description || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç';
            document.getElementById('jobModalRequirements').innerHTML = job.requirements || '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
            document.getElementById('jobModalResponsibility').innerHTML = job.responsibility || '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
            document.getElementById('jobModalLink').href = job.url;
            
            // –õ–æ–≥–æ
            const logo = document.getElementById('jobModalLogo');
            if (job.companyLogo) {
                logo.src = job.companyLogo;
                logo.style.display = 'block';
            } else {
                logo.style.display = 'none';
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Ü–µ–Ω–∫—É
            document.getElementById('jobAIAssessment').style.display = 'none';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –≤–∞–∫–∞–Ω—Å–∏—é
            window.currentJob = job;
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
            document.getElementById('jobModal').classList.remove('hidden');
        };
        
        window.closeJobModal = function() {
            document.getElementById('jobModal').classList.add('hidden');
        };
        
        // ======= AI –§—É–Ω–∫—Ü–∏–∏ =======
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è OpenAI API –∫–ª—é—á–∞
        window.testOpenAIKey = async function() {
            console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º OpenAI API –∫–ª—é—á...');
            
            let apiKey = localStorage.getItem('openai_api_key');
            if (!apiKey || apiKey.trim() === '') {
                console.error('‚ùå API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return false;
            }
            
            // –û—á–∏—â–∞–µ–º –∫–ª—é—á –æ—Ç –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
            apiKey = apiKey.trim();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞
            if (!apiKey.startsWith('sk-')) {
                console.error('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞. –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"');
                console.log(`üìã –¢–µ–∫—É—â–∏–π –∫–ª—é—á: ${apiKey.substring(0, 10)}...`);
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É –∫–ª—é—á–∞ (–æ–±—ã—á–Ω–æ OpenAI –∫–ª—é—á–∏ –¥–ª–∏–Ω–æ–π 51 —Å–∏–º–≤–æ–ª)
            if (apiKey.length < 40) {
                console.error('‚ùå –ö–ª—é—á —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π');
                console.log(`üìè –î–ª–∏–Ω–∞ –∫–ª—é—á–∞: ${apiKey.length} —Å–∏–º–≤–æ–ª–æ–≤ (–æ–∂–∏–¥–∞–µ—Ç—Å—è ~51)`);
                return false;
            }
            
            try {
                const response = await fetch('https://api.openai.com/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`
                    }
                });
                
                console.log(`üåê –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: ${response.status}`);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('‚úÖ API –∫–ª—é—á –≤–∞–ª–∏–¥–Ω—ã–π!');
                    console.log(`üìä –î–æ—Å—Ç—É–ø–Ω–æ –º–æ–¥–µ–ª–µ–π: ${data.data?.length || 0}`);
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast('‚úÖ OpenAI API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç!', 'success');
                    }
                    return true;
                } else {
                    const error = await response.json();
                    console.error('‚ùå –û—à–∏–±–∫–∞ API:', error);
                    
                    let message = '–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á';
                    if (response.status === 401) {
                        message = 'API –∫–ª—é—á –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω';
                    } else if (response.status === 429) {
                        message = '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤';
                    }
                    
                    if (typeof window.showToast === 'function') {
                        window.showToast(`‚ùå ${message}`, 'error');
                    }
                    return false;
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI', 'error');
                }
                return false;
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è OpenAI API –∫–ª—é—á–∞
        window.fixOpenAIKey = function() {
            console.log('üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º OpenAI API –∫–ª—é—á...');
            
            const apiKey = localStorage.getItem('openai_api_key');
            if (!apiKey) {
                console.error('‚ùå API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return false;
            }
            
            console.log(`üìã –ò—Å—Ö–æ–¥–Ω—ã–π –∫–ª—é—á: ${apiKey.substring(0, 15)}...${apiKey.substring(apiKey.length - 5)}`);
            
            // –û—á–∏—â–∞–µ–º –∫–ª—é—á –æ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
            let cleanKey = apiKey.trim();
            
            // –£–¥–∞–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏–ª–∏ —Å—É—Ñ—Ñ–∏–∫—Å—ã
            cleanKey = cleanKey.replace(/^Bearer\s+/i, ''); // –£–±–∏—Ä–∞–µ–º "Bearer "
            cleanKey = cleanKey.replace(/^sk-ws-01/, 'sk-'); // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å
            
            if (cleanKey !== apiKey) {
                console.log(`üîß –ö–ª—é—á –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: ${cleanKey.substring(0, 15)}...${cleanKey.substring(cleanKey.length - 5)}`);
                localStorage.setItem('openai_api_key', cleanKey);
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚úÖ API –∫–ª—é—á –∏—Å–ø—Ä–∞–≤–ª–µ–Ω', 'success');
                }
                return true;
            } else {
                console.log('‚ÑπÔ∏è –ö–ª—é—á –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è');
                return false;
            }
        };
        
        // AI –¥–µ–±–∞–≥ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        window.checkImages = function() {
            console.log('üñºÔ∏è === –ü–†–û–í–ï–†–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ===');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const images = document.querySelectorAll('.news-image');
            console.log(`üìä –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${images.length}`);
            
            if (images.length === 0) {
                console.log('‚ùå –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º VK –ø–æ—Å—Ç—ã
                if (window.cachedVKPosts) {
                    const postsWithImages = window.cachedVKPosts.filter(post => post.image || post.photo);
                    console.log(`üì± VK –ø–æ—Å—Ç–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ –∫–µ—à–µ: ${postsWithImages.length}/${window.cachedVKPosts.length}`);
                    
                    if (postsWithImages.length > 0) {
                        console.log('üîç –ü—Ä–∏–º–µ—Ä—ã URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –∫–µ—à–∞:');
                        postsWithImages.slice(0, 3).forEach((post, index) => {
                            const imageUrl = post.image || post.photo;
                            console.log(`${index + 1}. ${imageUrl}`);
                        });
                    }
                } else {
                    console.log('‚ùå –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö VK –ø–æ—Å—Ç–æ–≤');
                }
                return;
            }
            
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            let loadedCount = 0;
            let errorCount = 0;
            
            images.forEach((img, index) => {
                const isLoaded = img.complete && img.naturalHeight !== 0;
                const status = isLoaded ? '‚úÖ' : '‚ùå';
                
                console.log(`${status} –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}: ${img.src.substring(0, 50)}...`);
                
                if (isLoaded) {
                    loadedCount++;
                } else {
                    errorCount++;
                    
                    // –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
                    const originalSrc = img.src;
                    img.onerror = () => console.error(`‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å: ${originalSrc}`);
                    img.onload = () => console.log(`‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${originalSrc}`);
                    img.src = originalSrc + '?reload=' + Date.now();
                }
            });
            
            console.log(`üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ${loadedCount} –∑–∞–≥—Ä—É–∂–µ–Ω–æ, ${errorCount} –æ—à–∏–±–æ–∫`);
            console.log('üñºÔ∏è === –ö–û–ù–ï–¶ –ü–†–û–í–ï–†–ö–ò ===');
        };
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ —Ç–µ–∫—É—â–∏–º –ø–æ—Å—Ç–∞–º
        window.addTestImagesToCurrentPosts = function() {
            console.log('üß™ –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–º –ø–æ—Å—Ç–∞–º...');
            
            const newsCards = document.querySelectorAll('.news-card');
            const testImages = [
                'https://picsum.photos/400/300?random=1',
                'https://picsum.photos/400/300?random=2',
                'https://picsum.photos/400/300?random=3',
                'https://picsum.photos/400/300?random=4',
                'https://picsum.photos/400/300?random=5'
            ];
            
            newsCards.forEach((card, index) => {
                const clickableDiv = card.querySelector('.news-card-clickable');
                if (clickableDiv && !clickableDiv.querySelector('.news-image')) {
                    const testImage = testImages[index % testImages.length];
                    const imgElement = document.createElement('img');
                    imgElement.src = testImage;
                    imgElement.alt = 'Test image';
                    imgElement.className = 'news-image';
                    imgElement.loading = 'lazy';
                    imgElement.onerror = function() {
                        this.style.display = 'none';
                        console.warn('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', this.src);
                    };
                    imgElement.onload = function() {
                        console.log('‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ:', this.src);
                    };
                    
                    clickableDiv.appendChild(imgElement);
                    console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –∫–∞—Ä—Ç–æ—á–∫–µ ${index + 1}`);
                }
            });
            
            console.log(`üé® –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ ${newsCards.length} –∫–∞—Ä—Ç–æ—á–µ–∫`);
        };
        
        
        window.summarizeArticle = async function() {
            const btn = document.getElementById('summarizeArticleBtn');
            const originalText = btn.innerHTML;
            
            console.log('ü§ñ –ù–∞—á–∏–Ω–∞–µ–º —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—é —Å—Ç–∞—Ç—å–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ API –∫–ª—é—á–∞
            const apiKey = localStorage.getItem('openai_api_key');
            if (!apiKey || apiKey.trim() === '') {
                console.error('‚ùå OpenAI API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω');
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ OpenAI API –∫–ª—é—á –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö', 'error');
                } else {
                    alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ OpenAI API –∫–ª—é—á –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö');
                }
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–ª—é—á–∞
            if (!apiKey.startsWith('sk-')) {
                console.error('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OpenAI API –∫–ª—é—á–∞');
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"', 'error');
                } else {
                    alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"');
                }
                return;
            }
            
            btn.innerHTML = '<span class="spinner"></span> –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è...';
            btn.disabled = true;
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏
                const contentElement = document.getElementById('articleModalContent');
                const titleElement = document.getElementById('articleModalTitle');
                
                if (!contentElement || !titleElement) {
                    throw new Error('–ù–µ –Ω–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏');
                }
                
                const content = contentElement.textContent || contentElement.innerText || '';
                const title = titleElement.textContent || titleElement.innerText || '';
                
                if (!content.trim()) {
                    throw new Error('–ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ –ø—É—Å—Ç–æ–π');
                }
                
                console.log(`üìù –°—É–º–º–∞—Ä–∏–∑—É–µ–º —Å—Ç–∞—Ç—å—é: "${title.substring(0, 50)}..."`);
                console.log(`üìä –î–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${content.length} —Å–∏–º–≤–æ–ª–æ–≤`);
                
                // –í—ã–∑—ã–≤–∞–µ–º OpenAI API
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{
                            role: 'system',
                            content: '–¢—ã –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ —Å–∞–º–º–∞—Ä–∏ —Å—Ç–∞—Ç–µ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –∫—Ä–∞—Ç–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º, –±–µ–∑ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–π.'
                        }, {
                            role: 'user',
                            content: `–°–¥–µ–ª–∞–π –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è):\n\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: ${title}\n\n–¢–µ–∫—Å—Ç: ${content.substring(0, 3000)}`
                        }],
                        max_tokens: 300,
                        temperature: 0.7
                    })
                });
                
                console.log(`üåê –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ OpenAI: ${response.status}`);
                
                if (!response.ok) {
                    let errorMessage = `HTTP ${response.status}`;
                    try {
                        const error = await response.json();
                        errorMessage = error.error?.message || error.message || errorMessage;
                        console.error('‚ùå –û—à–∏–±–∫–∞ OpenAI API:', error);
                    } catch (e) {
                        console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –æ—à–∏–±–∫—É:', e);
                    }
                    throw new Error(errorMessage);
                }
                
                const data = await response.json();
                console.log('‚úÖ –û—Ç–≤–µ—Ç OpenAI –ø–æ–ª—É—á–µ–Ω:', data);
                
                if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI');
                }
                
                const summary = data.choices[0].message.content;
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º
                const summaryDiv = document.createElement('div');
                summaryDiv.className = 'ai-summary';
                summaryDiv.innerHTML = `
                    <h4>üìù –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (AI)</h4>
                    <p>${summary}</p>
                    <small style="color: var(--text-secondary); font-size: 0.75rem;">
                        –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é OpenAI GPT-3.5
                    </small>
                `;
                
                console.log('üìù –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
                
                const modalBody = document.querySelector('.article-modal-body');
                if (!modalBody) {
                    throw new Error('–ù–µ –Ω–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—É–º–º–∞—Ä–∏');
                }
                
                const existingSummary = modalBody.querySelector('.ai-summary');
                if (existingSummary) {
                    existingSummary.remove();
                }
                modalBody.insertBefore(summaryDiv, modalBody.firstChild);
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!', 'success');
                } else {
                    console.log('‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!');
                }
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏:', error);
                
                let userMessage = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏';
                if (error.message.includes('401')) {
                    userMessage = '–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenAI';
                } else if (error.message.includes('429')) {
                    userMessage = '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ OpenAI';
                } else if (error.message.includes('insufficient_quota')) {
                    userMessage = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI';
                } else if (error.message) {
                    userMessage = error.message;
                }
                
                if (typeof window.showToast === 'function') {
                    window.showToast(`‚ùå ${userMessage}`, 'error');
                } else {
                    alert(`‚ùå ${userMessage}`);
                }
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        };
        
        window.assessJob = async function() {
            const btn = document.getElementById('assessJobBtn');
            const originalText = btn.innerHTML;
            
            console.log('ü§ñ –ù–∞—á–∏–Ω–∞–µ–º –æ—Ü–µ–Ω–∫—É –≤–∞–∫–∞–Ω—Å–∏–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ API –∫–ª—é—á–∞
            const apiKey = localStorage.getItem('openai_api_key');
            if (!apiKey || apiKey.trim() === '') {
                console.error('‚ùå OpenAI API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω');
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ OpenAI API –∫–ª—é—á –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö', 'error');
                } else {
                    alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ OpenAI API –∫–ª—é—á –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö');
                }
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–ª—é—á–∞
            if (!apiKey.startsWith('sk-')) {
                console.error('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OpenAI API –∫–ª—é—á–∞');
                if (typeof window.showToast === 'function') {
                    window.showToast('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"', 'error');
                } else {
                    alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞. –î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"');
                }
                return;
            }
            
            btn.innerHTML = '<span class="spinner"></span> –û—Ü–µ–Ω–∫–∞...';
            btn.disabled = true;
            
            try {
                const job = window.currentJob;
                if (!job) return;
                
                // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userProfile = JSON.parse(localStorage.getItem('user_profile') || '{}');
                const userSkills = userProfile.skills || [];
                const userExperience = userProfile.experience || '–ù–µ —É–∫–∞–∑–∞–Ω';
                const userProfession = userProfile.profession || '–ù–µ —É–∫–∞–∑–∞–Ω–∞';
                const userBio = userProfile.bio || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è OpenAI
                const prompt = `–û—Ü–µ–Ω–∏ –≤–∞–∫–∞–Ω—Å–∏—é –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é.

–í–ê–ö–ê–ù–°–ò–Ø:
–ü–æ–∑–∏—Ü–∏—è: ${job.title}
–ö–æ–º–ø–∞–Ω–∏—è: ${job.company}
–ó–∞—Ä–ø–ª–∞—Ç–∞: ${job.salary}
–õ–æ–∫–∞—Ü–∏—è: ${job.location}
–û–ø—ã—Ç: ${job.experience}
–ì—Ä–∞—Ñ–∏–∫: ${job.schedule}
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: ${job.requirements}
–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏: ${job.responsibility}

–ü–†–û–§–ò–õ–¨ –ö–ê–ù–î–ò–î–ê–¢–ê:
–ü—Ä–æ—Ñ–µ—Å—Å–∏—è: ${userProfession}
–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã: ${userExperience}
–ù–∞–≤—ã–∫–∏: ${userSkills.join(', ') || '–ù–µ —É–∫–∞–∑–∞–Ω—ã'}
–û —Å–µ–±–µ: ${userBio}

–ó–ê–î–ê–ß–ê:
1. –û—Ü–µ–Ω–∏ –≤–∞–∫–∞–Ω—Å–∏—é –ø–æ —à–∫–∞–ª–µ –æ—Ç 0 –¥–æ 100
2. –£–∫–∞–∂–∏ –ø–ª—é—Å—ã –≤–∞–∫–∞–Ω—Å–∏–∏ (—Å–ø–∏—Å–æ–∫)
3. –£–∫–∞–∂–∏ –º–∏–Ω—É—Å—ã –≤–∞–∫–∞–Ω—Å–∏–∏ (—Å–ø–∏—Å–æ–∫)
4. –£–∫–∞–∂–∏ —á–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç—É –¥–ª—è —ç—Ç–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏ (—Å–ø–∏—Å–æ–∫)
5. –î–∞–π –∫–æ—Ä–æ—Ç–∫—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é (–æ–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ)

–û—Ç–≤–µ—Ç –¥–∞–π –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
{
  "score": —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 100,
  "recommendation": "—Ç–µ–∫—Å—Ç —Å —ç–º–æ–¥–∑–∏",
  "pros": ["–ø—É–Ω–∫—Ç1", "–ø—É–Ω–∫—Ç2"],
  "cons": ["–ø—É–Ω–∫—Ç1", "–ø—É–Ω–∫—Ç2"],
  "missing": ["–ø—É–Ω–∫—Ç1", "–ø—É–Ω–∫—Ç2"]
}`;

                // –í—ã–∑—ã–≤–∞–µ–º OpenAI API
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{
                            role: 'system',
                            content: '–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–±–æ—Ä—É –ø–µ—Ä—Å–æ–Ω–∞–ª–∞. –û—Ü–µ–Ω–∏–≤–∞–µ—à—å –≤–∞–∫–∞–Ω—Å–∏–∏ –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤. –û—Ç–≤–µ—á–∞–µ—à—å —Ç–æ–ª—å–∫–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.'
                        }, {
                            role: 'user',
                            content: prompt
                        }],
                        max_tokens: 800,
                        temperature: 0.7,
                        response_format: { type: "json_object" }
                    })
                });
                
                console.log(`üåê –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ OpenAI: ${response.status}`);
                
                if (!response.ok) {
                    let errorMessage = `HTTP ${response.status}`;
                    try {
                        const error = await response.json();
                        errorMessage = error.error?.message || error.message || errorMessage;
                        console.error('‚ùå –û—à–∏–±–∫–∞ OpenAI API:', error);
                    } catch (e) {
                        console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –æ—à–∏–±–∫—É:', e);
                    }
                    throw new Error(errorMessage);
                }
                
                const data = await response.json();
                console.log('‚úÖ –û—Ç–≤–µ—Ç OpenAI –ø–æ–ª—É—á–µ–Ω:', data);
                
                if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                    throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI');
                }
                
                const assessmentText = data.choices[0].message.content;
                console.log('üìä –¢–µ–∫—Å—Ç –æ—Ü–µ–Ω–∫–∏:', assessmentText);
                
                let assessment;
                try {
                    assessment = JSON.parse(assessmentText);
                } catch (parseError) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON:', parseError);
                    throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç AI. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                if (typeof assessment.score !== 'number' || !assessment.recommendation) {
                    throw new Error('–ù–µ–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç AI. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                }
                
                console.log('üíº –û—Ü–µ–Ω–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞:', assessment);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—Ü–µ–Ω–∫—É
                const assessmentDiv = document.getElementById('jobAIAssessment');
                const assessmentContent = document.getElementById('jobAIAssessmentContent');
                
                if (!assessmentDiv || !assessmentContent) {
                    throw new Error('–ù–µ –Ω–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏');
                }
                
                assessmentContent.innerHTML = `
                    <div class="ai-assessment-score">
                        <div class="score-badge">${assessment.score}/100</div>
                        <p class="recommendation">${assessment.recommendation}</p>
                    </div>
                    
                    ${assessment.pros && assessment.pros.length > 0 ? `
                        <div class="assessment-section pros">
                            <h5>‚úÖ –ü–ª—é—Å—ã:</h5>
                            <ul>${assessment.pros.map(p => `<li>${p}</li>`).join('')}</ul>
                        </div>
                    ` : ''}
                    
                    ${assessment.cons && assessment.cons.length > 0 ? `
                        <div class="assessment-section cons">
                            <h5>‚ùå –ú–∏–Ω—É—Å—ã:</h5>
                            <ul>${assessment.cons.map(c => `<li>${c}</li>`).join('')}</ul>
                        </div>
                    ` : ''}
                    
                    ${assessment.missing && assessment.missing.length > 0 ? `
                        <div class="assessment-section missing">
                            <h5>üìù –ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:</h5>
                            <ul>${assessment.missing.map(m => `<li>${m}</li>`).join('')}</ul>
                        </div>
                    ` : ''}
                    
                    <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 1rem;">
                        –û—Ü–µ–Ω–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é OpenAI GPT-3.5 –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.
                    </small>
                `;
                
                assessmentDiv.style.display = 'block';
                
                console.log('üíº –û—Ü–µ–Ω–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
                
                if (typeof window.showToast === 'function') {
                    window.showToast('‚úÖ –û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞!', 'success');
                } else {
                    console.log('‚úÖ –û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞!');
                }
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ü–µ–Ω–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–∏:', error);
                
                let userMessage = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –≤–∞–∫–∞–Ω—Å–∏–∏';
                if (error.message.includes('401')) {
                    userMessage = '–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á OpenAI';
                } else if (error.message.includes('429')) {
                    userMessage = '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ OpenAI';
                } else if (error.message.includes('insufficient_quota')) {
                    userMessage = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ OpenAI';
                } else if (error.message) {
                    userMessage = error.message;
                }
                
                if (typeof window.showToast === 'function') {
                    window.showToast(`‚ùå ${userMessage}`, 'error');
                } else {
                    alert(`‚ùå ${userMessage}`);
                }
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        };
        
        // ======= –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è =======
        
        function loadProfile() {
            const profile = JSON.parse(localStorage.getItem('user_profile') || '{}');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ UI –ø—Ä–æ—Ñ–∏–ª—è
            if (profile.name) document.getElementById('profileName').textContent = profile.name;
            if (profile.profession) document.getElementById('profileProfession').textContent = profile.profession;
            if (profile.location) document.getElementById('profileLocation').textContent = profile.location;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞–≤—ã–∫–∏
            if (profile.skills && profile.skills.length > 0) {
                const skillsList = document.getElementById('skillsList');
                if (skillsList) {
                    skillsList.innerHTML = profile.skills.map(skill => 
                        `<span class="skill-tag">${skill}</span>`
                    ).join('');
                }
            }
        }
        
        window.openEditProfile = function() {
            const profile = JSON.parse(localStorage.getItem('user_profile') || '{}');
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            document.getElementById('profileNameInput').value = profile.name || '';
            document.getElementById('profileProfessionInput').value = profile.profession || '';
            document.getElementById('profileLocationInput').value = profile.location || '';
            document.getElementById('profileExperienceInput').value = profile.experience || '';
            document.getElementById('profileSkillsInput').value = profile.skills ? profile.skills.join(', ') : '';
            document.getElementById('profileBioInput').value = profile.bio || '';
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
            document.getElementById('editProfileModal').classList.remove('hidden');
        };
        
        window.closeEditProfileModal = function() {
            document.getElementById('editProfileModal').classList.add('hidden');
        };
        
        window.saveProfile = function() {
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
            const name = document.getElementById('profileNameInput').value.trim();
            const profession = document.getElementById('profileProfessionInput').value.trim();
            const location = document.getElementById('profileLocationInput').value.trim();
            const experience = document.getElementById('profileExperienceInput').value;
            const skillsText = document.getElementById('profileSkillsInput').value.trim();
            const bio = document.getElementById('profileBioInput').value.trim();
            
            // –ü–∞—Ä—Å–∏–º –Ω–∞–≤—ã–∫–∏
            const skills = skillsText 
                ? skillsText.split(',').map(s => s.trim()).filter(s => s.length > 0)
                : [];
            
            // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –ø—Ä–æ—Ñ–∏–ª—è
            const profile = {
                name: name || '–ò–º—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
                profession: profession || '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞',
                location: location || '–õ–æ–∫–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞',
                experience: experience || '–ù–µ —É–∫–∞–∑–∞–Ω',
                skills: skills,
                bio: bio || '',
                updatedAt: new Date().toISOString()
            };
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('user_profile', JSON.stringify(profile));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            loadProfile();
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É
            closeEditProfileModal();
            
            if (typeof showToast === 'function') {
                showToast('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'success');
            }
            
            console.log('–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω:', profile);
        };
        
        // ======= –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö =======
        
        function clearAllData() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.')) {
                return;
            }
            
            // –û—á–∏—â–∞–µ–º –≤—Å–µ localStorage
            const keysToKeep = ['theme']; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–º—É
            const allKeys = Object.keys(localStorage);
            
            allKeys.forEach(key => {
                if (!keysToKeep.includes(key)) {
                    localStorage.removeItem(key);
                }
            });
            
            // –û—á–∏—â–∞–µ–º API –∫—ç—à
            if (window.hhApi) window.hhApi.clearCache();
            if (window.vkApi) window.vkApi.cache?.clear();
            
            if (typeof showToast === 'function') {
                showToast('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!', 'success');
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            document.getElementById('settingsDropdown')?.classList.remove('active');
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }
    </script>

    <!-- –°—Ç–∏–ª–∏ –¥–ª—è VK –∫–∞—Ä—Ç–æ—á–µ–∫ (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ) -->
    <style>
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }


        .post-header {
            padding: 20px 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .post-source {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #6c757d;
            font-weight: 500;
        }

        .post-time {
            font-size: 12px;
            color: #adb5bd;
        }

        .post-title {
            padding: 10px 20px;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.4;
            color: #212529;
            margin: 0;
        }

        .post-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .post-title a:hover {
            color: #007bff;
        }

        .post-description {
            padding: 0 20px;
            color: #6c757d;
            line-height: 1.6;
            font-size: 14px;
            margin: 0;
        }

        .post-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            margin: 15px 0;
        }

        .post-footer {
            padding: 15px 20px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .post-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .post-tag {
            background: #e9ecef;
            color: #495057;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .post-tag.vk-tag {
            background: #4267B2;
            color: white;
        }

        .post-read-more {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .post-read-more:hover {
            color: #0056b3;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è VK –∫–∞—Ä—Ç–æ—á–µ–∫ */
        @media (max-width: 768px) {
            .posts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è VK –ø–æ—Å—Ç–æ–≤ */
        #feedContainer .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            padding: 0;
        }

        /* –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª–∞–¥–æ–∫ */
        .tab-switcher-modern {
            display: flex;
            background: white;
            position: relative;
            overflow: visible; /* –ò–∑–º–µ–Ω–µ–Ω–æ —Å hidden –Ω–∞ visible –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–∞–º–æ–∫ */
            margin-bottom: 20px;
            padding: 4px; /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø –¥–ª—è —Ä–∞–º–æ–∫ */
            border-radius: 14px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-button-modern {
            flex: 1;
            padding: 16px 20px;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border-radius: 10px;
        }

        .tab-button-modern:hover {
            color: #495057;
            transform: translateY(-1px);
            background: rgba(0, 123, 255, 0.1);
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
        }

        .tab-button-modern.active {
            color: white;
            transform: translateY(0);
            background: linear-gradient(135deg, #007bff, #0056b3);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .tab-button-modern:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }

        .tab-icon-modern {
            font-size: 18px;
        }

        .tab-text-modern {
            font-weight: 600;
        }

        .tab-counter-modern {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 4px;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s ease;
            min-width: 20px;
            text-align: center;
        }

        .tab-button-modern.active .tab-counter-modern {
            opacity: 1;
            transform: scale(1);
        }

        .tab-indicator-modern {
            position: absolute;
            top: 8px;
            bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .content-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        /* –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ quick-filters */
        .quick-filters {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            gap: 1rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è */
        @media (max-width: 768px) {
            .tab-switcher-modern {
                flex-direction: column;
                gap: 4px;
            }

            .tab-indicator-modern {
                display: none;
            }

            .tab-button-modern.active {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }

            .tab-text-modern {
                font-size: 13px;
            }

            .tab-icon-modern {
                font-size: 16px;
            }

            .quick-filters {
                flex-direction: column;
                gap: 1rem;
            }

            .content-actions {
                align-self: flex-end;
            }
        }

        @media (max-width: 480px) {
            .tab-button-modern {
                padding: 12px 16px;
                gap: 6px;
            }

            .tab-text-modern {
                display: none;
            }

            .tab-switcher-modern {
                flex-direction: row;
            }

            .tab-indicator-modern {
                display: block;
            }
        }

        /* CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;
            --border-color: #e9ecef;
            --border-light: #f1f3f4;
            --shadow-light: rgba(0,0,0,0.08);
            --shadow-medium: rgba(0,0,0,0.15);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --card-bg: #ffffff;
            --header-bg: var(--gradient-secondary);
            --primary-color: #007bff;
            --success-color: #28a745;
            --error-color: #dc3545;
            --warning-color: #ffc107;
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #404040;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-muted: #808080;
            --border-color: #404040;
            --shadow-light: rgba(0,0,0,0.3);
            --shadow-medium: rgba(0,0,0,0.5);
            --card-bg: #2d2d2d;
            --header-bg: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
        }

        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ */
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .header {
            background: var(--header-bg);
            border-bottom: 1px solid var(--border-color);
        }

        .tab-switcher-modern {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 20px var(--shadow-light);
            margin: 0 auto;
            max-width: fit-content;
        }

        .tab-button-modern {
            color: var(--text-secondary);
        }

        .tab-button-modern:hover {
            color: var(--text-primary);
        }






        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –≤–∞–∫–∞–Ω—Å–∏–π HH - –∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ */
        .job-card-compact {
            border-left: 4px solid #dc3545;
            border-color: rgba(220, 53, 69, 0.2);
            background: var(--card-bg);
            transition: all 0.3s ease, border-color 0.3s ease;
            position: relative;
        }

        .job-card-compact:hover {
            border-color: rgba(220, 53, 69, 0.4);
            box-shadow: 0 15px 35px rgba(220, 53, 69, 0.2);
        }

        .job-source-badge {
            position: absolute;
            top: 15px;
            right: 15px;
        }

        .hh-badge {
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .job-header {
            position: relative;
            padding-right: 60px;
        }

        /* –û–±—ã—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .news-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            box-shadow: 0 8px 32px var(--shadow-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            position: relative;
        }

        .news-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px var(--shadow-medium);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .news-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .news-card:hover::before {
            opacity: 1;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö VK –ø–æ—Å—Ç–æ–≤ */
        .news-card.priority-post {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 107, 53, 0.05) 100%);
            border: 1px solid rgba(255, 107, 53, 0.2);
            position: relative;
        }

        .news-card.priority-post::before {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            opacity: 1;
            height: 4px;
        }

        [data-theme="dark"] .news-card.priority-post {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 107, 53, 0.1) 100%);
        }

        .priority-badge {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin: 0 0.5rem;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .news-card.priority-post:hover {
            transform: translateY(-8px);
            box-shadow: 0 24px 48px rgba(255, 107, 53, 0.25);
            border-color: rgba(255, 107, 53, 0.4);
        }

        /* –°—Ç–∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .news-card-header {
            padding: 16px 20px 12px;
            border-bottom: 1px solid var(--border-light);
            background: rgba(var(--bg-secondary), 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 8px;
        }

        .news-source {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .news-date {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .news-card-content {
            padding: 20px;
        }

        .news-card-clickable {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .news-card-clickable:hover {
            opacity: 0.9;
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            line-height: 1.4;
            margin: 0 0 12px 0;
            color: var(--text-primary);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0 0 16px 0;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin: 16px 0;
            transition: transform 0.3s ease;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
        }

        .news-card:hover .news-image {
            transform: scale(1.02);
        }

        /* Placeholder –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
        .news-image[src=""], .news-image:not([src]) {
            display: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        .news-image-error {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border-radius: 12px;
            margin: 16px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 2rem;
            border: 1px solid var(--border-light);
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        .news-image-loading {
            width: 100%;
            height: 200px;
            background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 12px;
            margin: 16px 0;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* –î–µ–π—Å—Ç–≤–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .news-card-actions {
            padding: 16px 20px;
            border-top: 1px solid var(--border-light);
            background: linear-gradient(to bottom, transparent, rgba(var(--bg-secondary), 0.3));
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .news-card-actions .btn {
            flex: 1;
            min-width: 120px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .news-card-actions .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ VK */
        .news-card-actions .btn:first-child {
            background: linear-gradient(135deg, #4A76A8, #5B88BD);
            color: white;
            border: none;
        }

        .news-card-actions .btn:first-child:hover {
            background: linear-gradient(135deg, #5B88BD, #6B98CD);
        }

        /* –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .news-card-actions .save-btn {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            border: none;
        }

        .news-card-actions .save-btn:hover {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
        }

        .news-card-actions .save-btn.saved {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ */
        .empty-favorites-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-favorites-state h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .empty-favorites-state p {
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 0 0.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .favorites-header h3 {
            color: var(--text-primary);
            margin: 0;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .favorites-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            padding: 0.5rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ */
        @media (max-width: 768px) {
            .favorites-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                padding: 0;
            }
            
            .favorites-header {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }
            
            .favorites-actions {
                justify-content: center;
            }
        }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .news-card[data-favorite="true"] {
            border: 1px solid rgba(255, 215, 0, 0.3);
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(255, 215, 0, 0.05) 100%);
        }

        .news-card[data-favorite="true"]::before {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            opacity: 1;
        }

        .news-card[data-favorite="true"]:hover {
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.2);
        }

        /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
        .theme-toggle {
            position: relative;
            overflow: hidden;
        }

        .theme-icon {
            transition: all 0.3s ease;
        }

        [data-theme="dark"] .theme-icon-light {
            display: none;
        }

        [data-theme="dark"] .theme-icon-dark {
            display: block !important;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏–Ω–Ω–µ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem auto;
            display: inline-block;
        }

        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }

        .loading-spinner.hidden {
            display: none !important;
        }

        .loading-spinner p {
            margin: 0.5rem 0 0 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* –ú–∞–ª–µ–Ω—å–∫–∏–π —Å–ø–∏–Ω–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .btn .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 0.5rem 0 0;
            display: inline-block;
            vertical-align: middle;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 1;
            visibility: visible;
            transition: all 0.3s ease;
        }

        .modal.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(1);
            transition: transform 0.3s ease;
        }

        .modal.hidden .modal-content {
            transform: scale(0.9);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-desc {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è API —Å—Ç–∞—Ç—É—Å–∞ */
        .api-status-section {
            margin-bottom: 1.5rem;
        }

        .status-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .status-icon {
            font-size: 1.5rem;
        }

        .status-info {
            flex: 1;
        }

        .status-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .status-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã API –∫–ª—é—á–∞ */
        .api-input-section {
            margin-bottom: 1.5rem;
        }

        .api-input-section h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .api-input-form {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-control {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ */
        .api-info-section h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .info-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-list li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            border-bottom: 1px solid var(--border-light);
        }

        .info-list li:last-child {
            border-bottom: none;
        }

        .info-list a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .info-list a:hover {
            text-decoration: underline;
        }

        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .quick-filters {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö */
        .post-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            justify-content: space-between;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .action-btn:hover {
            background: var(--bg-secondary);
            color: var(--primary-color);
            transform: translateY(-1px);
        }

        .save-btn.active {
            color: #ffd700;
        }

        .save-btn.active svg {
            fill: #ffd700;
        }

        .like-btn.liked {
            color: #e74c3c;
        }

        .like-btn.liked svg {
            fill: #e74c3c;
        }

        .comment-btn:hover {
            color: #3498db;
        }

        .like-count {
            font-size: 0.8rem;
            margin-left: 0.25rem;
        }

        .job-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .job-meta {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .job-actions {
            display: flex;
            gap: 0.5rem;
        }

        @media (max-width: 768px) {
            .header-actions {
                gap: 0.25rem;
            }

            .app-version {
                display: none;
            }

            .tab-switcher-modern {
                margin: 0;
                border-radius: 0;
                border-left: none;
                border-right: none;
                max-width: 100%;
            }

            .tab-button-modern {
                padding: 14px 12px;
                font-size: 13px;
            }

            .tab-icon-modern {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                padding: 1rem;
            }

            .site-title {
                font-size: 1.5rem;
            }

            .breadcrumb {
                display: none;
            }

            .tab-text-modern {
                display: none;
            }

            .tab-button-modern {
                padding: 12px 8px;
                min-width: 50px;
            }

            .quick-filters {
                margin-bottom: 1rem;
            }

            .content-actions {
                margin-top: 1rem;
            }
        }

        /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        [data-theme="dark"] .post-source,
        [data-theme="dark"] .post-description {
            color: var(--text-secondary);
        }

        [data-theme="dark"] .post-title {
            color: var(--text-primary);
        }

        [data-theme="dark"] .post-time {
            color: var(--text-muted);
        }

        [data-theme="dark"] .post-tag {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        [data-theme="dark"] .post-tag.vk-tag {
            background: #4267B2;
            color: white;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã */
        .theme-switching {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* –°–º–µ—à–∞–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .mixed-content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            padding: 0;
        }

        /* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Å–º–µ—à–∞–Ω–Ω–æ–π —Å–µ—Ç–∫–µ */
        .mixed-content-grid .news-card,
        .mixed-content-grid .job-card-compact {
            width: 100%;
            margin: 0;
        }
    </style>
</body>
</html>